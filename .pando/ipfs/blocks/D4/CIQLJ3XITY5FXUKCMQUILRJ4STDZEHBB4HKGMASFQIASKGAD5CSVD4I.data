
Š€€€ T(e){return C(e)?function(e){return e.match(_)||[]}(e):function(e){return e.split(\"\")}(e)}var D=Object.prototype.toString,P=A.Symbol,O=Math.ceil,N=Math.floor,U=P?P.prototype:void 0,R=U?U.toString:void 0;function L(e,t){var r=\"\";if(!e||t<1||t>i)return r;do{t%2&&(r+=e),(t=N(t/2))&&(e+=e)}while(t);return r}function F(e){if(\"string\"==typeof e)return e;if(K(e))return R?R.call(e):\"\";var t=e+\"\";return\"0\"==t&&1/e==-n?\"-0\":t}function j(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}(e,t,r)}function M(e){var t=typeof e;return!!e&&(\"object\"==t||\"function\"==t)}function K(e){return\"symbol\"==typeof e||function(e){return!!e&&\"object\"==typeof e}(e)&&D.call(e)==a}function H(e){return e?(e=function(e){if(\"number\"==typeof e)return e;if(K(e))return o;if(M(e)){var t=\"function\"==typeof e.valueOf?e.valueOf():e;e=M(t)?t+\"\":t}if(\"string\"!=typeof e)return 0===e?e:+e;e=e.replace(u,\"\");var r=f.test(e);return r||l.test(e)?S(e.slice(2),r?2:8):c.test(e)?o:+e}(e))===n||e===-n?(e<0?-1:1)*s:e==e?e:0:0===e?e:0}e.exports=function(e,t,r){var n;e=null==(n=e)?\"\":F(n);var i=(t=function(e){var t=H(e),r=t%1;return t==t?r?t-r:t:0}(t))?I(e):0;return t&&i<t?function(e,t){var r=(t=void 0===t?\" \":F(t)).length;if(r<2)return r?L(t,e):t;var n=L(t,O(e/I(t)));return C(t)?j(T(n),0,e).join(\"\"):n.slice(0,e)}(t-i,r)+e:e}},function(e,t,r){\"use strict\";var n=t.falseIfInvalid=function(e){return function(){return!!this.valid&&e.apply(this,arguments)}};t.isInSubnet=n(function(e){return!(this.subnetMask<e.subnetMask)&&this.mask(e.subnetMask)===e.mask()}),t.isCorrect=function(e){return n(function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===e&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))})}},function(e,t){e.exports=require(\"jsbn\")},function(e,t,r){\"use strict\";var n=r(285).BigInteger,i=r(284),s=r(283),o=r(282),a=r(93).sprintf,u=r(167);function c(e){this.valid=!1,this.address=e,this.groups=u.GROUPS,this.v4=!0,this.subnet=\"/32\",this.subnetMask=32;var t=u.RE_SUBNET_STRING.exec(e);if(t){if(this.parsedSubnet=t[0].replace(\"/\",\"\"),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=\"/\"+this.subnetMask,this.subnetMask<0||this.subnetMask>u.BITS)return this.valid=!1,void(this.error=\"Invalid subnet mask.\");e=e.replace(u.RE_SUBNET_STRING,\"\")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}c.prototype.parse=function(e){var t=e.split(\".\");return e.match(u.RE_ADDRESS)?this.valid=!0:this.error=\"Invalid IPv4 address.\",t},c.prototype.isValid=function(){return this.valid},c.prototype.correctForm=function(){return this.parsedAddress.map(function(e){return parseInt(e,10)}).join(\".\")},c.prototype.isCorrect=i.isCorrect(u.BITS),c.fromHex=function(e){var t,r=s(e.replace(/:/g,\"\"),8,\"0\"),n=[];for(t=0;t<8;t+=2){var i=r.slice(t,t+2);n.push(parseInt(i,16))}return new c(n.join(\".\"))},c.fromInteger=function(e){return c.fromHex(e.toString(16))},c.prototype.toHex=function(){return this.parsedAddress.map(function(e){return a(\"%02x\",parseInt(e,10))}).join(\":\")},c.prototype.toArray=function(){return this.parsedAddress.map(function(e){return parseInt(e,10)})},c.prototype.toGroup6=function(){var e,t=[];for(e=0;e<u.GROUPS;e+=2){var r=a(\"%02x%02x\",parseInt(this.parsedAddress[e],10),parseInt(this.parsedAddress[e+1],10));t.push(a(\"%x\",parseInt(r,16)))}return t.join(\":\")},c.prototype.bigInteger=function(){return this.valid?new n(this.parsedAddress.map(function(e){return a(\"%02x\",parseInt(e,10))}).join(\"\"),16):null},c.prototype.startAddress=function(){var e=new n(this.mask()+o(0,u.BITS-this.subnetMask),2);return c.fromBigInteger(e)},c.prototype.endAddress=function(){var e=new n(this.mask()+o(1,u.BITS-this.subnetMask),2);return c.fromBigInteger(e)},c.fromBigInteger=function(e){return c.fromInteger(parseInt(e.toString(),10))},c.prototype.mask=function(e){return void 0===e&&(e=this.subnetMask),this.getBitsBase2(0,e)},c.prototype.getBitsBase2=function(e,t){return this.binaryZeroPad().slice(e,t)},c.prototype.isInSubnet=i.isInSubnet,c.prototype.binaryZeroPad=function(){return s(this.bigInteger().toString(2),u.BITS,\"0\")},e.exports=c},function(e,t,r){\"use strict\";const n=r(174),i=r(119),s=r(60),o=r(118),a=r(168),u=r(32).Connection,c=r(53),f=r(0)(\"libp2p:tcp:dial\"),l=r(601);function h(){}e.exports=class{dial(e,t,r){a(t)&&(r=t,t={}),r=c(r||h);const s=e.toOptions();f(\"Connecting to %s %s\",s.port,s.host);const o=n.connect(s);o.once(\"timeout\",()=>{f(\"timeout\"),o.emit(\"error\",new Error(\"Timeout\"))}),o.once(\"error\",r),o.once(\"connect\",()=>{o.removeListener(\"error\",r),r()});const l=i.duplex(o),p=new u(l);return p.getObservedAddrs=(t=>t(null,[e])),p}createListener(e,t){return a(e)&&(t=e,e={}),l(t=t||h)}filter(e){return Array.isArray(e)||(e=[e]),e.filter(e=>!o(e.protoNames(),\"p2p-circuit\")&&(o(e.protoNames(),\"ipfs\")&&(e=e.decapsulate(\"ipfs\")),s.TCP.matches(e)))}}},function(e,t,r){var n=r(618);e.exports=function(e,t,r){r=void 0===r||r;var i,s=!1;return function(o){var a,u,c=0,f=0,l=0,h=[],p=!1,d=!1;function y(){if(a){var e=a;if(u)return a=null,e(u);if(Object.hasOwnProperty.call(h,f)){a=null;var r=h[f];delete h[f],f++,e(null,r),t&&m()}else f>=l&&d&&(a=null,e(d))}}var m=n(function(){if(p=!0,d)return y();s||t&&c-t>=f||(s=!0,o(i,function(t,n){if(s=!1,t)l=c,d=t,y();else{var i=c++;e(n,function(e,t){r?h[i]=t:h.push(t),e&&(u=e),y()}),d||m()}}))});return function(e,t){e?o(d=i=e,function(e){if(t)return t(e)}):(a=t,p||m(),y())}}}},function(e,t){e.exports=function(e){!function t(){var r=!0,n=!1;do{n=!0,r=!1,e.call(this,function(){n?r=!0:t()}),n=!1}while(r)}()}},function(e,t){e.exports=function(e){var t,r,n;function i(e){return r=e,function(e,i){n?t=[e,i]:r(e,i)}}return i.pause=function(){n||(n=!0,e&&e(n))},i.resume=function(){if(n&&(n=!1,e&&e(n),t)){var i=t;t=null,r(i[0],i[1])}},i}},function(e,t,r){\"use strict\";t.importer=t.Importer=r(644),t.exporter=t.Exporter=r(620)},function(e){e.exports={Addresses:{Swarm:[\"/ip4/0.0.0.0/tcp/4002\",\"/ip4/127.0.0.1/tcp/4003/ws\"],API:\"/ip4/127.0.0.1/tcp/5002\",Gateway:\"/ip4/127.0.0.1/tcp/9090\"},Discovery:{MDNS:{Enabled:!0,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:[\"/ip4/104.236.176.52/tcp/4001/ipfs/QmSoLnSGccFuZQJzRadHn95W2CrSFmZuTdDWP8HXaHca9z\",\"/ip4/104.131.131.82/tcp/4001/ipfs/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ\",\"/ip4/104.236.179.241/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM\",\"/ip4/162.243.248.213/tcp/4001/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm\",\"/ip4/128.199.219.111/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu\",\"/ip4/104.236.76.40/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64\",\"/ip4/178.62.158.247/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd\",\"/ip4/178.62.61.185/tcp/4001/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3\",\"/ip4/104.236.151.122/tcp/4001/ipfs/QmSoLju6m7xTh3DuokvT3886QRYqxAzb1kShaanJgW36yx\",\"/ip6/2604:a880:1:20::1f9:9001/tcp/4001/ipfs/QmSoLnSGccFuZQJzRadHn95W2CrSFmZuTdDWP8HXaHca9z\",\"/ip6/2604:a880:1:20::203:d001/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM\",\"/ip6/2604:a880:0:1010::23:d001/tcp/4001/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm\",\"/ip6/2400:6180:0:d0::151:6001/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu\",\"/ip6/2604:a880:800:10::4a:5001/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64\",\"/ip6/2a03:b0c0:0:1010::23:1001/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd\",\"/ip6/2a03:b0c0:1:d0::e7:1/tcp/4001/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3\",\"/ip6/2604:a880:1:20::1d9:6001/tcp/4001/ipfs/QmSoLju6m7xTh3DuokvT3886QRYqxAzb1kShaanJgW36yx\",\"/dns4/wss0.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic\",\"/dns4/wss1.bootstrap.libp2p.io/tcp/443/wss/ipfs/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6\"]}},function(e,t,r){\"use strict\";const n=r(17),i=r(188).repoVersion;e.exports=function(e){return{init:(e,t,r)=>{},version:n(t=>{e._repo._isInitialized(r=>{if(r){return[/Key not found in database \\[\\/version\\]/,/ENOENT/,/not yet initialized/].some(e=>e.test(r.message))?t(null,i):t(r)}e._repo.version.get(t)})}),gc:()=>{},stat:n((t,r)=>{\"function\"==typeof t&&(r=t,t={}),e._repo.stat(t,(e,t)=>{if(e)return r(e);r(null,{numObjects:t.numObjects,repoSize:t.repoSize,repoPath:t.repoPath,version:t.version.toString(),storageMax:t.storageMax})})}),path:()=>e._repo.path}}},function(e){e.exports={_from:\"ipfs@^0.28.2\",_id:\"ipfs@0.28.2\",_inBundle:!1,_integrity:\"sha512-ryNxKhNQvU33M3tvRwk/pVG63ZLiS1R5a2zbrqAS75DSrO3N/sRd/iCr8THr4EPIdnYfGEEWluqig6n6rBzl4A==\",_location:\"/ipfs\",_phantomChildren:{async:\"2.6.1\",cids:\"0.5.3\",\"core-util-is\":\"1.0.2\",decamelize:\"1.2.0\",\"error-ex\":\"1.3.1\",execa:\"0.7.0\",\"get-caller-file\":\"1.0.2\",\"graceful-fs\":\"4.1.11\",inherits:\"2.0.3\",\"interface-datastore\":\"0.4.2\",\"ipfs-block\":\"0.6.1\",\"ipfs-block-service\":\"0.13.0\",\"ipfs-repo\":\"0.18.7\",\"ipld-bitcoin\":\"0.1.5\",\"ipld-dag-cbor\":\"0.12.0\",\"ipld-dag-pb\":\"0.13.1\",\"ipld-ethereum\":\"2.0.0\",\"ipld-git\":\"0.2.0\",\"ipld-raw\":\"2.0.0\",\"ipld-zcash\":\"0.1.3\",\"is-ipfs\":\"0.3.2\",\"json-parse-better-errors\":\"1.0.2\",lcid:\"1.0.0\",\"locate-path\":\"2.0.0\",\"lodash.flatten\":\"4.4.0\",\"lodash.includes\":\"4.3.0\",mem:\"1.1.0\",memdown:\"1.4.1\",multihashes:\"0.4.13\",\"normalize-package-data\":\"2.4.0\",\"process-nextick-args\":\"2.0.0\",\"pull-defer\":\"0.2.2\",\"pull-sort\":\"1.0.1\",\"pull-stream\":\"3.6.8\",\"pull-traverse\":\"1.0.3\",\"require-directory\":\"2.1.1\",\"require-main-filename\":\"1.0.1\",\"safe-buffer\":\"5.1.2\",\"set-blocking\":\"2.0.0\",\"util-deprecate\":\"1.0.2\",\"wrap-ansi\":\"2.1.0\",y18n:\"3.2.1\"},_requested:{type:\"range\",registry:!0,raw:\"ipfs@^0.28.2\",name:\"ipfs\",escapedName:\"ipfs\",rawSpec:\"^0.28.2\",saveSpec:null,fetchSpec:\"^0.28.2\"},_requiredBy:[\"/\"],_resolved:\"https://registry.npmjs.org/ipfs/-/ipfs-0.28.2.tgz\",_shasum:\"1e9806354fdeecd773ffa612c28953c9a1ac64a0\",_spec:\"ipfs@^0.28.2\",_where:\"/Users/osarrouy/Documents/devs/dapps/@wespr/pando.js\",author:{name:\"David Dias\",email:\"daviddias@ipfs.io\"},bin:{jsipfs:\"src/cli/bin.js\"},browser:{\"./src/core/components/init-assets.js\":!1,\"./src/core/runtime/config-nodejs.json\":\"./src/core/runtime/config-browser.json\",\"./src/core/runtime/libp2p-nodejs.js\":\"./src/core/runtime/libp2p-browser.js\",\"./src/core/runtime/repo-nodejs.js\":\"./src/core/runtime/repo-browser.js\",\"./src/core/runtime/dns-nodejs.js\":\"./src/core/runtime/dns-browser.js\",\"./test/utils/create-repo-nodejs.js\":\"./test/utils/create-repo-browser.js\",stream:\"readable-stream\",joi:\"joi-browser\"},bugs:{url:\"https://github.com/ipfs/js-ipfs/issues\"},bundleDependencies:!1,contributors:[{name:\"Alan Shaw\",email:\"alan@tableflip.io\"},{name:\"Andrew de Andrade\",email:\"andrew@deandrade.com.br\"},{name:\"Arpit Agarwal\",email:\"93arpit@gmail.com\"},{name:\"Arpit Agarwal\",email:\"atvanguard@users.noreply.github.com\"},{name:\"Bernard Mordan\",email:\"bernard@tableflip.io\"},{name:\"Bruno Zell\",email:\"bruno.zzell@gmail.com\"},{name:\"CHEVALAY JOSSELIN\",email:\"josselin54.chevalay@gmail.com\"},{name:\"Caio Gondim\",email:\"me@caiogondim.com\"},{name:\"Christian Couder\",email:\"chriscool@tuxfamily.org\"},{name:\"Dafeng\",email:\"dfguo.joe@gmail.com\"},{name:\"Daniel J. O'Quinn\",email:\"danieljoquinn@gmail.com\"},{name:\"Daniela Borges Matos de Carvalho\",email:\"alunassertiva@gmail.com\"},{name:\"David Dias\",email:\"daviddias.p@gmail.com\"},{name:\"David da Silva\",email:\"dasilvacontin@gmail.com\"},{name:\"Dmitriy Ryajov\",email:\"dryajov@gmail.com\"},{name:\"Dzmitry Das\",email:\"dbachko@gmail.com\"},{name:\"Enrico Marino\",email:\"enrico.marino@email.com\"},{name:\"Faheel Ahmad\",email:\"faheel@live.in\"},{name:\"Felix Yan\",email:\"felixonmars@archlinux.org\"},{name:\"Francisco Baio Dias\",email:\"xicombd@gmail.com\"},{name:\"Francisco Baio Dias\",email:\"francisco@typeform.com\"},{name:\"Friedel Ziegelmayer\",email:\"dignifiedquire@gmail.com\"},{name:\"Georgios Rassias\",email:\"georassias@gmail.com\"},{name:\"Gorka Ludlow\",email:\"gorka@aquigorka.com\"},{name:\"Greenkeeper\",email:\"support@greenkeeper.io\"},{name:\"Haad\",email:\"haadcode@users.noreply.github.com\"},{name:\"Haoliang Yu\",email:\"haoliangyu@users.noreply.github.com\"},{name:\"Harsh Vakharia\",email:\"harshjv@users.noreply.github.com\"},{name:\"Henrique Dias\",email:\"hacdias@gmail.com\"},{name:\"Henry Rodrick\",email:\"moshisushi@gmail.com\"},{name:\"Jade Meskill\",email:\"jade.meskill@gmail.com\"},{name:\"Johannes Wikner\",email:\"johannes.wikner@gmail.com\"},{name:\"Jon Schlinkert\",email:\"dev@sellside.com\"},{name:\"Jonathan\",email:\"jkrone@vt.edu\"},{name:\"JoÃ£o Antunes\",email:\"j.goncalo.antunes@gmail.com\"},{name:\"JoÃ£o Santos\",email:\"joaosantos15@users.noreply.github.com\"},{name:\"Kevin Wang\",email:\"kevin@fossa.io\"},{name:\"Lars Gierth\",email:\"larsg@systemli.org\"},{name:\"Lukas Drgon\",email:\"lukas.drgon@gmail.com\"},{name:\"Maciej KrÃ¼ger\",email:\"mkg20001@gmail.com\"},{name:\"Marius Darila\",email:\"marius.darila@gmail.com\"},{name:\"Michelle Lee\",email:\"michelle@protocol.ai\"},{name:\"Mikeal Rogers\",email:\"mikeal.rogers@gmail.com\"},{name:\"Mithgol\",email:\"getgit@mithgol.ru\"},{name:\"Nuno Nogueira\",email:\"nunofmn@gmail.com\"},{name:\"Oskar Nyberg\",email:\"oskar@oskarnyberg.com\"},{name:\"Pau Ramon Revilla\",email:\"masylum@gmail.com\"},{name:\"Paulo Rodrigues\",email:\"me@paulogr.com\"},{name:\"Pedro Teixeira\",email:\"i@pgte.me\"},{name:\"RasmusErik Voel Jensen\",email:\"github@solsort.com\"},{name:\"Richard Littauer\",email:\"richard.littauer@gmail.com\"},{name:\"Richard Schneider\",email:\"makaretu@gmail.com\"},{name:\"Rod Keys\",email:\"rod@zokos.com\"},{name:\"Sangwon Hong\",email:\"qpakzk@gmail.com\"},{name:\"Sid Harder\",email:\"sideharder@gmail.com\"},{name:\"SidHarder\",email:\"softwarenavigator@gmail.com\"},{name:\"Stephen Whitmore\",email:\"stephen.whitmore@gmail.com\"},{name:\"Stephen Whitmore\",email:\"noffle@users.noreply.github.com\"},{name:\"Terence Pae\",email:\"terencepae@gmail.com\"},{name:\"UroÅ¡ JurgliÄ\",email:\"jurglic@gmail.com\"},{name:\"Volker Mische\",email:\"volker.mische@gmail.com\"},{name:\"Xiao Liang\",email:\"yxliang01@users.noreply.github.com\"},{name:\"Yahya\",email:\"ya7yaz@gmail.com\"},{name:\"achingbrain\",email:\"alex@achingbrain.net\"},{name:\"bitspill\",email:\"bitspill+github@bitspill.net\"},{name:\"haad\",email:\"haad@headbanggames.com\"},{name:\"jbenet\",email:\"juan@benet.ai\"},{name:\"jonahweissman\",email:\"19804455+jonahweissman@users.noreply.github.com\"},{name:\"kevingzhang\",email:\"kevin.zhang.canada@gmail.com\"},{name:\"kumavis\",email:\"kumavis@users.noreply.github.com\"},{name:\"nginnever\",email:\"ginneversource@gmail.com\"},{name:\"npmcdn-to-unpkg-bot\",email:\"npmcdn-to-unpkg-bot@users.noreply.github.com\"},{name:\"tcme\",email:\"hi@this-connect.me\"},{name:\"victorbjelkholm\",email:\"victorbjelkholm@gmail.com\"},{name:\"Åukasz Magiera\",email:\"magik6k@users.noreply.github.com\"}],dependencies:{async:\"^2.6.0\",\"big.js\":\"^5.0.3\",\"binary-querystring\":\"~0.1.2\",bl:\"^1.2.1\",boom:\"^7.1.1\",bs58:\"^4.0.1\",byteman:\"^1.3.5\",cids:\"~0.5.2\",debug:\"^3.1.0\",\"file-type\":\"^7.6.0\",filesize:\"^3.6.0\",\"fsm-event\":\"^2.1.0\",\"get-folder-size\":\"^1.0.1\",glob:\"^7.1.2\",hapi:\"^16.6.2\",\"hapi-set-header\":\"^1.0.2\",hoek:\"^5.0.3\",\"human-to-milliseconds\":\"^1.0.0\",\"ipfs-api\":\"^18.1.2\",\"ipfs-bitswap\":\"~0.19.0\",\"ipfs-block\":\"~0.6.1\",\"ipfs-block-service\":\"~0.13.0\",\"ipfs-multipart\":\"~0.1.0\",\"ipfs-repo\":\"~0.18.7\",\"ipfs-unixfs\":\"~0.1.14\",\"ipfs-unixfs-engine\":\"~0.24.4\",ipld:\"^0.15.0\",\"is-ipfs\":\"^0.3.2\",\"is-stream\":\"^1.1.0\",joi:\"^13.1.2\",\"joi-browser\":\"^13.0.1\",\"joi-multiaddr\":\"^1.0.1\",libp2p:\"~0.18.0\",\"libp2p-circuit\":\"~0.1.4\",\"libp2p-floodsub\":\"~0.14.1\",\"libp2p-kad-dht\":\"~0.8.0\",\"libp2p-keychain\":\"~0.3.1\",\"libp2p-mdns\":\"~0.9.2\",\"libp2p-multiplex\":\"~0.5.1\",\"libp2p-railing\":\"~0.7.1\",\"libp2p-secio\":\"~0.9.3\",\"libp2p-tcp\":\"~0.11.6\",\"libp2p-webrtc-star\":\"~0.13.4\",\"libp2p-websocket-star\":\"~0.7.7\",\"libp2p-websockets\":\"~0.10.5\",\"lodash.flatmap\":\"^4.5.0\",\"lodash.get\":\"^4.4.2\",\"lodash.sortby\":\"^4.7.0\",\"lodash.values\":\"^4.3.0\",mafmt:\"^4.0.0\",\"mime-types\":\"^2.1.18\",mkdirp:\"~0.5.1\",multiaddr:\"^3.0.2\",multihashes:\"~0.4.13\",once:\"^1.4.0\",\"path-exists\":\"^3.0.0\",\"peer-book\":\"~0.5.4\",\"peer-id\":\"~0.10.6\",\"peer-info\":\"~0.11.6\",progress:\"^2.0.0\",\"prom-client\":\"^10.2.2\",\"prometheus-gc-stats\":\"^0.5.0\",\"promisify-es6\":\"^1.0.3\",\"pull-abortable\":\"^4.1.1\",\"pull-defer\":\"^0.2.2\",\"pull-file\":\"^1.1.0\",\"pull-ndjson\":\"^0.1.1\",\"pull-paramap\":\"^1.2.2\",\"pull-pushable\":\"^2.2.0\",\"pull-sort\":\"^1.0.1\",\"pull-stream\":\"^3.6.2\",\"pull-stream-to-stream\":\"^1.3.4\",\"pull-zip\":\"^2.0.1\",\"read-pkg-up\":\"^3.0.0\",\"readable-stream\":\"2.3.4\",\"safe-buffer\":\"^5.1.1\",\"stream-to-pull-stream\":\"^1.7.2\",\"tar-stream\":\"^1.5.5\",temp:\"~0.8.3\",through2:\"^2.0.3\",\"update-notifier\":\"^2.3.0\",yargs:\"^11.0.0\",\"yargs-parser\":\"^9.0.2\"},deprecated:!1,description:\"JavaScript implementation of the IPFS specification\",devDependencies:{aegir:\"^13.0.5\",\"buffer-loader\":\"0.0.1\",chai:\"^4.1.2\",delay:\"^2.0.0\",\"detect-node\":\"^2.0.3\",\"dir-compare\":\"^1.4.0\",\"dirty-chai\":\"^2.0.1\",\"eslint-plugin-react\":\"^7.7.0\",execa:\"^0.9.0\",\"expose-loader\":\"^0.7.4\",\"form-data\":\"^2.3.2\",\"go-ipfs-dep\":\"^0.4.13\",hat:\"0.0.3\",\"interface-ipfs-core\":\"~0.52.0\",\"ipfsd-ctl\":\"~0.29.1\",\"left-pad\":\"^1.2.0\",lodash:\"^4.17.5\",mocha:\"^5.0.1\",ncp:\"^2.0.0\",nexpect:\"^0.5.0\",\"pre-commit\":\"^1.2.2\",\"pretty-bytes\":\"^4.0.2\",qs:\"^6.5.1\",\"random-fs\":\"^1.0.3\",rimraf:\"^2.6.2\",\"stream-to-promise\":\"^2.2.0\",\"transform-loader\":\"^0.2.4\"},engines:{node:\">=6.0.0\",npm:\">=3.0.0\"},homepage:\"https://github.com/ipfs/js-ipfs#readme\",keywords:[\"IPFS\"],license:\"MIT\",main:\"src/core/index.js\",name:\"ipfs\",optionalDependencies:{\"prom-client\":\"^10.2.2\",\"prometheus-gc-stats\":\"^0.5.0\"},\"pre-push\":[\"lint\",\"test\"],repository:{type:\"git\",url:\"git+https://github.com/ipfs/js-ipfs.git\"},scripts:{benchmark:'echo \"Error: no benchmarks yet\" && exit 1',\"benchmark:browser\":'echo \"Error: no benchmarks yet\" && exit 1',\"benchmark:node\":'echo \"Error: no benchmarks yet\" && exit 1',\"benchmark:node:core\":'echo \"Error: no benchmarks yet\" && exit 1',\"benchmark:node:http\":'echo \"Error: no benchmarks yet\" && exit 1',build:\"aegir build\",coverage:\"aegir coverage\",\"coverage-publish\":\"aegir-coverage publish\",lint:\"aegir lint\",release:\"aegir release -t node -t browser\",\"release-major\":\"aegir release --type major -t node -t browser\",\"release-minor\":\"aegir release --type minor -t node -t browser\",test:\"aegir test -t node -t browser -t webworker --no-cors\",\"test:bootstrapers\":\"IPFS_TEST=bootstrapers aegir test -t browser -f test/bootstrapers.js\",\"test:browser\":\"aegir test -t browser --no-cors\",\"test:node\":\"aegir test -t node\",\"test:node:cli\":\"aegir test -t node -f test/cli/index.js\",\"test:node:core\":\"aegir test -t node -f test/core/**.js\",\"test:node:gateway\":\"aegir test -t node -f test/gateway/index.js\",\"test:node:http\":\"aegir test -t node -f test/http-api/index.js\",\"test:webworker\":\"aegir test -t webworker --no-cors\"},version:\"0.28.2\"}},function(e,t,r){(function(e){var r=200,n=\"Expected a function\",i=\"__lodash_hash_undefined__\",s=1,o=2,a=1/0,u=9007199254740991,c=1.7976931348623157e308,f=NaN,l=\"[object Arguments]\",h=\"[object Array]\",p=\"[object Boolean]\",d=\"[object Date]\",y=\"[object Error]\",m=\"[object Function]\",g=\"[object GeneratorFunction]\",v=\"[object Map]\",b=\"[object Number]\",w=\"[object Object]\",_=\"[object RegExp]\",k=\"[object Set]\",S=\"[object String]\",E=\"[object Symbol]\",x=\"[object ArrayBuffer]\",A=\"[object DataView]\",B=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,C=/^\\w*$/,I=/^\\./,T=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,D=/^\\s+|\\s+$/g,P=/\\\\(\\\\)?/g,O=/^[-+]0x[0-9a-f]+$/i,N=/^0b[01]+$/i,U=/^\\[object .+?Constructor\\]$/,R=/^0o[0-7]+$/i,L=/^(?:0|[1-9]\\d*)$/,F={};F[\"[object Float32Array]\"]=F[\"[object Float64Array]\"]=F[\"[object Int8Array]\"]=F[\"[object Int16Array]\"]=F[\"[object Int32Array]\"]=F[\"[object Uint8Array]\"]=F[\"[object Uint8ClampedArray]\"]=F[\"[object Uint16Array]\"]=F[\"[object Uint32Array]\"]=!0,F[l]=F[h]=F[x]=F[p]=F[A]=F[d]=F[y]=F[m]=F[v]=F[b]=F[w]=F[_]=F[k]=F[S]=F[\"[object WeakMap]\"]=!1;var j=parseInt,M=\"object\"==typeof global&&global&&global.Object===Object&&global,K=\"object\"==typeof self&&self&&self.Object===Object&&self,H=M||K||Function(\"return this\")(),z=\"object\"==typeof t&&t&&!t.nodeType&&t,V=z&&\"object\"==typeof e&&e&&!e.nodeType&&e,q=V&&V.exports===z&&M.process,G=function(){try{return q&&q.binding(\"util\")}catch(e){}}(),W=G&&G.isTypedArray;function $(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function X(e){var t=!1;if(null!=e&&\"function\"!=typeof e.toString)try{t=!!(e+\"\")}catch(e){}return t}function J(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function Y(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var Q,Z,ee,te=Array.prototype,re=Function.prototype,ne=Object.prototype,ie=H[\"__core-js_shared__\"],se=(Q=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+Q:\"\",oe=re.toString,ae=ne.hasOwnProperty,ue=ne.toString,ce=RegExp(\"^\"+oe.call(ae).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),fe=H.Symbol,le=H.Uint8Array,he=ne.propertyIsEnumerable,pe=te.splice,de=(Z=Object.keys,ee=Object,function(e){return Z(ee(e))}),ye=Math.max,me=Ge(H,\"DataView\"),ge=Ge(H,\"Map\"),ve=Ge(H,\"Promise\"),be=Ge(H,\"Set\"),we=Ge(H,\"WeakMap\"),_e=Ge(Object,\"create\"),ke=et(me),Se=et(ge),Ee=et(ve),xe=et(be),Ae=et(we),Be=fe?fe.prototype:void 0,Ce=Be?Be.valueOf:void 0,Ie=Be?Be.toString:void 0;function Te(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function De(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Pe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){var t=-1,r=e?e.length:0;for(this.__data__=new Pe;++t<r;)this.add(e[t])}function Ne(e){this.__data__=new De(e)}function Ue(e,t){var r=ot(e)||st(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var s in e)!t&&!ae.call(e,s)||i&&(\"length\"==s||$e(s,n))||r.push(s);return r}function Re(e,t){for(var r=e.length;r--;)if(it(e[r][0],t))return r;return-1}function Le(e,t){for(var r=0,n=(t=Xe(t,e)?[t]:ze(t)).length;null!=e&&r<n;)e=e[Ze(t[r++])];return r&&r==n?e:void 0}function Fe(e,t){return null!=e&&t in Object(e)}function je(e,t,r,n,i){return e===t||(null==e||null==t||!ft(e)&&!lt(t)?e!=e&&t!=t:function(e,t,r,n,i,a){var u=ot(e),c=ot(t),f=h,m=h;u||(f=(f=We(e))==l?w:f);c||(m=(m=We(t))==l?w:m);var g=f==w&&!X(e),B=m==w&&!X(t),C=f==m;if(C&&!g)return a||(a=new Ne),u||pt(e)?Ve(e,t,r,n,i,a):function(e,t,r,n,i,a,u){switch(r){case A:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!n(new le(e),new le(t)));case p:case d:case b:return it(+e,+t);case y:return e.name==t.name&&e.message==t.message;case _:case S:return e==t+\"\";case v:var c=J;case k:var f=a&o;if(c||(c=Y),e.size!=t.size&&!f)return!1;var l=u.get(e);if(l)return l==t;a|=s,u.set(e,t);var h=Ve(c(e),c(t),n,i,a,u);return u.delete(e),h;case E:if(Ce)return Ce.call(e)==Ce.call(t)}return!1}(e,t,f,r,n,i,a);if(!(i&o)){var I=g&&ae.call(e,\"__wrapped__\"),T=B&&ae.call(t,\"__wrapped__\");if(I||T){var D=I?e.value():e,P=T?t.value():t;return a||(a=new Ne),r(D,P,n,i,a)}}if(!C)return!1;return a||(a=new Ne),function(e,t,r,n,i,s){var a=i&o,u=dt(e),c=u.length,f=dt(t).length;if(c!=f&&!a)return!1;for(var l=c;l--;){var h=u[l];if(!(a?h in t:ae.call(t,h)))return!1}var p=s.get(e);if(p&&s.get(t))return p==t;var d=!0;s.set(e,t),s.set(t,e);for(var y=a;++l<c;){h=u[l];var m=e[h],g=t[h];if(n)var v=a?n(g,m,h,t,e,s):n(m,g,h,e,t,s);if(!(void 0===v?m===g||r(m,g,n,i,s):v)){d=!1;break}y||(y=\"constructor\"==h)}if(d&&!y){var b=e.constructor,w=t.constructor;b!=w&&\"constructor\"in e&&\"constructor\"in t&&!(\"function\"==typeof b&&b instanceof b&&\"function\"==typeof w&&w instanceof w)&&(d=!1)}return s.delete(e),s.delete(t),d}(e,t,r,n,i,a)}(e,t,je,r,n,i))}function Me(e){return!(!ft(e)||se&&se in e)&&(ut(e)||X(e)?ce:U).test(et(e))}function Ke(e){return\"function\"==typeof e?e:null==e?yt:\"object\"==typeof e?ot(e)?function(e,t){if(Xe(e)&&Je(t))return Ye(Ze(e),t);return function(r){var n=function(e,t,r){var n=null==e?void 0:Le(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){var n,i=-1,s=(t=Xe(t,e)?[t]:ze(t)).length;for(;++i<s;){var o=Ze(t[i]);if(!(n=null!=e&&r(e,o)))break;e=e[o]}if(n)return n;return!!(s=e?e.length:0)&&ct(s)&&$e(o,s)&&(ot(e)||st(e))}(e,t,Fe)}(r,e):je(t,n,void 0,s|o)}}(e[0],e[1]):function(e){var t=function(e){var t=dt(e),r=t.length;for(;r--;){var n=t[r],i=e[n];t[r]=[n,i,Je(i)]}return t}(e);if(1==t.length&&t[0][2])return Ye(t[0][0],t[0][1]);return function(r){return r===e||function(e,t,r,n){var i=r.length,a=i,u=!n;if(null==e)return!a;for(e=Object(e);i--;){var c=r[i];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<a;){var f=(c=r[i])[0],l=e[f],h=c[1];if(u&&c[2]){if(void 0===l&&!(f in e))return!1}else{var p=new Ne;if(n)var d=n(l,h,f,e,t,p);if(!(void 0===d?je(h,l,n,s|o,p):d))return!1}}return!0}(r,e,t)}}(e):Xe(t=e)?(r=Ze(t),function(e){return null==e?void 0:e[r]}):function(e){return function(t){return Le(t,e)}}(t);var t,r}function He(e){if(r=(t=e)&&t.constructor,n=\"function\"==typeof r&&r.prototype||ne,t!==n)return de(e);var t,r,n,i=[];for(var s in Object(e))ae.call(e,s)&&\"constructor\"!=s&&i.push(s);return i}function ze(e){return ot(e)?e:Qe(e)}function Ve(e,t,r,n,i,a){var u=i&o,c=e.length,f=t.length;if(c!=f&&!(u&&f>c))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var h=-1,p=!0,d=i&s?new Oe:void 0;for(a.set(e,t),a.set(t,e);++h<c;){var y=e[h],m=t[h];if(n)var g=u?n(m,y,h,t,e,a):n(y,m,h,e,t,a);if(void 0!==g){if(g)continue;p=!1;break}if(d){if(!$(t,function(e,t){if(!d.has(t)&&(y===e||r(y,e,n,i,a)))return d.add(t)})){p=!1;break}}else if(y!==m&&!r(y,m,n,i,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function qe(e,t){var r,n,i=e.__data__;return(\"string\"==(n=typeof(r=t))||\"number\"==n||\"symbol\"==n||\"boolean\"==n?\"__proto__\"!==r:null===r)?i[\"string\"==typeof t?\"string\":\"hash\"]:i.map}function Ge(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Me(r)?r:void 0}Te.prototype.clear=function(){this.__data__=_e?_e(null):{}},Te.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Te.prototype.get=function(e){var t=this.__data__;if(_e){var r=t[e];return r===i?void 0:r}return ae.call(t,e)?t[e]:void 0},Te.prototype.has=function(e){var t=this.__data__;return _e?void 0!==t[e]:ae.call(t,e)},Te.prototype.set=function(e,t){return this.__data__[e]=_e&&void 0===t?i:t,this},De.prototype.clear=function(){this.__data__=[]},De.prototype.delete=function(e){var t=this.__data__,r=Re(t,e);return!(r<0||(r==t.length-1?t.pop():pe.call(t,r,1),0))},De.prototype.get=function(e){var t=this.__data__,r=Re(t,e);return r<0?void 0:t[r][1]},De.prototype.has=function(e){return Re(this.__data__,e)>-1},De.prototype.set=function(e,t){var r=this.__data__,n=Re(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Pe.prototype.clear=function(){this.__data__={hash:new Te,map:new(ge||De),string:new Te}},Pe.prototype.delete=function(e){return qe(this,e).delete(e)},Pe.prototype.get=function(e){return qe(this,e).get(e)},Pe.prototype.has=function(e){return qe(this,e).has(e)},Pe.prototype.set=function(e,t){return qe(this,e).set(e,t),this},Oe.prototype.add=Oe.prototype.push=function(e){return this.__data__.set(e,i),this},Oe.prototype.has=function(e){return this.__data__.has(e)},Ne.prototype.clear=function(){this.__data__=new De},Ne.prototype.delete=function(e){return this.__data__.delete(e)},Ne.prototype.get=function(e){return this.__data__.get(e)},Ne.prototype.has=function(e){return this.__data__.has(e)},Ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof De){var i=n.__data__;if(!ge||i.length<r-1)return i.push([e,t]),this;n=this.__data__=new Pe(i)}return n.set(e,t),this};var We=function(e){return ue.call(e)};function $e(e,t){return!!(t=null==t?u:t)&&(\"number\"==typeof e||L.test(e))&&e>-1&&e%1==0&&e<t}function Xe(e,t){if(ot(e))return!1;var r=typeof e;return!(\"number\"!=r&&\"symbol\"!=r&&\"boolean\"!=r&&null!=e&&!ht(e))||(C.test(e)||!B.test(e)||null!=t&&e in Object(t))}function Je(e){return e==e&&!ft(e)}function Ye(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}(me&&We(new me(new ArrayBuffer(1)))!=A||ge&&We(new ge)!=v||ve&&\"[object Promise]\"!=We(ve.resolve())||be&&We(new be)!=k||we&&\"[object WeakMap]\"!=We(new we))&&(We=function(e){var t=ue.call(e),r=t==w?e.constructor:void 0,n=r?et(r):void 0;if(n)switch(n){case ke:return A;case Se:return v;case Ee:return\"[object Promise]\";case xe:return k;case Ae:return\"[object WeakMap]\"}return t});var Qe=nt(function(e){var t;e=null==(t=e)?\"\":function(e){if(\"string\"==typeof e)return e;if(ht(e))return Ie?Ie.call(e):\"\";var t=e+\"\";return\"0\"==t&&1/e==-a?\"-0\":t}(t);var r=[];return I.test(e)&&r.push(\"\"),e.replace(T,function(e,t,n,i){r.push(n?i.replace(P,\"$1\"):t||e)}),r});function Ze(e){if(\"string\"==typeof e||ht(e))return e;var t=e+\"\";return\"0\"==t&&1/e==-a?\"-0\":t}function et(e){if(null!=e){try{return oe.call(e)}catch(e){}try{return e+\"\"}catch(e){}}return\"\"}var tt,rt=(tt=function(e,t,r){var n=e?e.length:0;if(!n)return-1;var i,s,o=null==r?0:(i=function(e){if(!e)return 0===e?e:0;if((e=function(e){if(\"number\"==typeof e)return e;if(ht(e))return f;if(ft(e)){var t=\"function\"==typeof e.valueOf?e.valueOf():e;e=ft(t)?t+\"\":t}if(\"string\"!=typeof e)return 0===e?e:+e;e=e.replace(D,\"\");var r=N.test(e);return r||R.test(e)?j(e.slice(2),r?2:8):O.test(e)?f:+e}(e))===a||e===-a){var t=e<0?-1:1;return t*c}return e==e?e:0}(r),s=i%1,i==i?s?i-s:i:0);return o<0&&(o=ye(n+o,0)),function(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}(e,Ke(t),o)},function(e,t,r){var n=Object(e);if(!at(e)){var i=Ke(t);e=dt(e),t=function(e){return i(n[e],e,n)}}var s=tt(e,t,r);return s>-1?n[i?e[s]:s]:void 0});function nt(e,t){if(\"function\"!=typeof e||t&&\"function\"!=typeof t)throw new TypeError(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o),o};return r.cache=new(nt.Cache||Pe),r}function it(e,t){return e===t||e!=e&&t!=t}function st(e){return function(e){return lt(e)&&at(e)}(e)&&ae.call(e,\"callee\")&&(!he.call(e,\"callee\")||ue.call(e)==l)}nt.Cache=Pe;var ot=Array.isArray;function at(e){return null!=e&&ct(e.length)&&!ut(e)}function ut(e){var t=ft(e)?ue.call(e):\"\";return t==m||t==g}function ct(e){return\"number\"==typeof e&&e>-1&&e%1==0&&e<=u}function ft(e){var t=typeof e;return!!e&&(\"object\"==t||\"function\"==t)}function lt(e){return!!e&&\"object\"==typeof e}function ht(e){return\"symbol\"==typeof e||lt(e)&&ue.call(e)==E}var pt=W?function(e){return function(t){return e(t)}}(W):function(e){return lt(e)&&ct(e.length)&&!!F[ue.call(e)]};function dt(e){return at(e)?Ue(e):He(e)}function yt(e){return e}e.exports=rt}).call(this,r(55)(e))},function(e,t,r){\"use strict\";var n=r(660);function i(e){return\"function\"==typeof e}function s(e,t){return t?function(r,n){var i=setTimeout(function(){e(new Error(\"pull-reader: read exceeded timeout\"),n)},t);e(r,function(e,t){clearTimeout(i),n(e,t)})}:e}e.exports=function(e){var t,r,o,a,u,c=[],f=!1,l=n();function h(){for(;c.length;)if(null==c[0].length&&l.has(1))c.shift().cb(null,l.get());else if(l.has(c[0].length)){var e=c.shift();e.cb(null,l.get(e.length))}else{if(!o)return!!c.length;c.shift().cb(o)}return c.length||!l.has(1)||u}function p(){h()&&!f&&(!t||f||a||(f=!0,r(null,function(e,t){if(f=!1,e)return o=e,h();l.add(t),p()})))}function d(n){if(u){for(;c.length;)c.shift().cb(u);return cb&&cb(u)}r=s(n,e),t=n,p()}return d.abort=function(e,r){u=e||!0,t?(f=!0,t(u,function(){for(;c.length;)c.shift().cb(u);r&&r(u)})):r()},d.read=function(r,n,o){if(i(n)&&(o=n,n=e),!i(o))return a=!0,function(e,r){if(f||l.has(1)){if(e)return t(e,r);c.push({length:null,cb:r}),p()}else s(t,n)(e,function(e,t){r(e,t)})};var u;c.push({length:(u=r,Number.isFinite(u)?r:null),cb:o}),p()},d}},function(e,t){var r=\"Expected a function\",n=NaN,i=\"[object Symbol]\",s=/^\\s+|\\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,f=\"object\"==typeof global&&global&&global.Object===Object&&global,l=\"object\"==typeof self&&self&&self.Object===Object&&self,h=f||l||Function(\"return this\")(),p=Object.prototype.toString,d=Math.max,y=Math.min,m=function(){return h.Date.now()};function g(e){var t=typeof e;return!!e&&(\"object\"==t||\"function\"==t)}function v(e){if(\"number\"==typeof e)return e;if(function(e){return\"symbol\"==typeof e||function(e){return!!e&&\"object\"==typeof e}(e)&&p.call(e)==i}(e))return n;if(g(e)){var t=\"function\"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+\"\":t}if(\"string\"!=typeof e)return 0===e?e:+e;e=e.replace(s,\"\");var r=a.test(e);return r||u.test(e)?c(e.slice(2),r?2:8):o.test(e)?n:+e}e.exports=function(e,t,n){var i,s,o,a,u,c,f=0,l=!1,h=!1,p=!0;if(\"function\"!=typeof e)throw new TypeError(r);function b(t){var r=i,n=s;return i=s=void 0,f=t,a=e.apply(n,r)}function w(e){var r=e-c;return void 0===c||r>=t||r<0||h&&e-f>=o}function _(){var e=m();if(w(e))return k(e);u=setTimeout(_,function(e){var r=t-(e-c);return h?y(r,o-(e-f)):r}(e))}function k(e){return u=void 0,p&&i?b(e):(i=s=void 0,a)}function S(){var e=m(),r=w(e);if(i=arguments,s=this,c=e,r){if(void 0===u)return function(e){return f=e,u=setTimeout(_,t),l?b(e):a}(c);if(h)return u=setTimeout(_,t),b(c)}return void 0===u&&(u=setTimeout(_,t)),a}return t=v(t)||0,g(n)&&(l=!!n.leading,o=(h=\"maxWait\"in n)?d(v(n.maxWait)||0,t):o,p=\"trailing\"in n?!!n.trailing:p),S.cancel=function(){void 0!==u&&clearTimeout(u),f=0,i=c=s=u=void 0},S.flush=function(){return void 0===u?a:k(m())},S}},function(e,t,r){\"use strict\";e.exports=r(682)},function(e,t,r){\"use strict\";const n={rfc3986:{},generate:function(){const e=\"|\";n.rfc3986.ipv4Cidr=\"[0-9]|[1-2][0-9]|3[0-2]\",n.rfc3986.ipv6Cidr=\"(?:0?0?[0-9]|0?[1-9][0-9]|1[01][0-9]|12[0-8])\";const t=\"a-zA-Z0-9-\\\\._~\",r=\"!\\\\$&'\\\\(\\\\)\\\\*\\\\+,;=\",i=t+\"%0-9A-Fa-f\"+r+\":@\",s=\"[\"+i+\"]\",o=\"(?:0?0?[0-9]|0?[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\";n.rfc3986.IPv4address=\"(?:\"+o+\"\\\\.){3}\"+o;const a=\"[0-9A-Fa-f]{1,4}\",u=\"(?:\"+a+\":\"+a+\"|\"+n.rfc3986.IPv4address+\")\",c=\"(?:\"+a+\":){6}\"+u,f=\"::(?:\"+a+\":){5}\"+u,l=\"(?:\"+a+\")?::(?:\"+a+\":){4}\"+u,h=\"(?:(?:\"+a+\":){0,1}\"+a+\")?::(?:\"+a+\":){3}\"+u,p=\"(?:(?:\"+a+\":){0,2}\"+a+\")?::(?:\"+a+\":){2}\"+u,d=\"(?:(?:\"+a+\":){0,3}\"+a+\")?::\"+a+\":\"+u,y=\"(?:(?:\"+a+\":){0,4}\"+a+\")?::\"+u;n.rfc3986.IPv6address=\"(?:\"+c+e+f+e+l+e+h+e+p+e+d+e+y+e+\"(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}\"+e+\"(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)\",n.rfc3986.IPvFuture=\"v[0-9A-Fa-f]+\\\\.[\"+t+r+\":]+\",n.rfc3986.scheme=\"[a-zA-Z][a-zA-Z0-9+-\\\\.]*\";const m=\"(?:[a-zA-Z0-9-\\\\._~%0-9A-Fa-f!\\\\$&'\\\\(\\\\)\\\\*\\\\+,;=:]*@)?\"+(\"(?:\"+(\"\\\\[(?:\"+n.rfc3986.IPv6address+e+n.rfc3986.IPvFuture+\")\\\\]\")+e+n.rfc3986.IPv4address+e+\"[a-zA-Z0-9-\\\\._~%0-9A-Fa-f!\\\\$&'\\\\(\\\\)\\\\*\\\\+,;=]{0,255})\")+\"(?::[0-9]*)?\",g=s+\"+\",v=\"(?:\\\\/[a-zA-Z0-9-\\\\._~%0-9A-Fa-f!\\\\$&'\\\\(\\\\)\\\\*\\\\+,;=:@]*)*\",b=\"\\\\/(?:\"+g+v+\")?\";n.rfc3986.hierPart=\"(?:(?:\\\\/\\\\/\"+m+v+\")\"+e+b+e+\"[a-zA-Z0-9-\\\\._~%0-9A-Fa-f!\\\\$&'\\\\(\\\\)\\\\*\\\\+,;=:@]+(?:\\\\/[a-zA-Z0-9-\\\\._~%0-9A-Fa-f!\\\\$&'\\\\(\\\\)\\\\*\\\\+,;=:@]*)*)\",n.rfc3986.relativeRef=\"(?:(?:\\\\/\\\\/\"+m+v+\")\"+e+b+e+\"[a-zA-Z0-9-\\\\._~%0-9A-Fa-f!\\\\$&'\\\\(\\\\)\\\\*\\\\+,;=@]+(?:\\\\/[a-zA-Z0-9-\\\\._~%0-9A-Fa-f!\\\\$&'\\\\(\\\\)\\\\*\\\\+,;=:@]*)*\"+e+\")\",n.rfc3986.query=\"[\"+i+\"\\\\/\\\\?]*(?=#|$)\",n.rfc3986.fragment=\"[\"+i+\"\\\\/\\\\?]*\"}};n.generate(),e.exports=n.rfc3986},function(e,t,r){\"use strict\";const n=r(26),i=r(693),s=r(48),o=r(175),a=r(94),u={Object:class extends s{constructor(){super(),this._type=\"object\",this._inner.children=null,this._inner.renames=[],this._inner.dependencies=[],this._inner.patterns=[]}_init(...e){return e.length?this.keys(...e):this}_base(e,t,r){let i=e;const s=[],a=()=>({value:i,errors:s.length?s:null});\"string\"==typeof e&&r.convert&&(e=u.safeParse(e));const c=this._flags.func?\"function\":\"object\";if(!e||typeof e!==c||Array.isArray(e))return s.push(this.createError(c+\".base\",null,t,r)),a();if(!(this._inner.renames.length||this._inner.dependencies.length||this._inner.children||this._inner.patterns.length))return i=e,a();if(i===e){\"object\"===c?i=Object.create(Object.getPrototypeOf(e)):(i=function(...t){return e.apply(this,t)}).prototype=n.clone(e.prototype);const t=Object.keys(e);for(let r=0;r<t.length;++r)i[t[r]]=e[t[r]]}else i=e;const f={};for(let e=0;e<this._inner.renames.length;++e){const n=this._inner.renames[e];if(n.isRegExp){const e=Object.keys(i),o=[];for(let t=0;t<e.length;++t)n.from.test(e[t])&&o.push(e[t]);const u=o.every(e=>void 0===i[e]);if(n.options.ignoreUndefined&&u)continue;if(!n.options.multiple&&f[n.to]&&(s.push(this.createError(\"object.rename.regex.multiple\",{from:o,to:n.to},t,r)),r.abortEarly))return a();if(Object.prototype.hasOwnProperty.call(i,n.to)&&!n.options.override&&!f[n.to]&&(s.push(this.createError(\"object.rename.regex.override\",{from:o,to:n.to},t,r)),r.abortEarly))return a();if(u?delete i[n.to]:i[n.to]=i[o[o.length-1]],f[n.to]=!0,!n.options.alias)for(let e=0;e<o.length;++e)delete i[o[e]]}else{if(n.options.ignoreUndefined&&void 0===i[n.from])continue;if(!n.options.multiple&&f[n.to]&&(s.push(this.createError(\"object.rename.multiple\",{from:n.from,to:n.to},t,r)),r.abortEarly))return a();if(Object.prototype.hasOwnProperty.call(i,n.to)&&!n.options.override&&!f[n.to]&&(s.push(this.createError(\"object.rename.override\",{from:n.from,to:n.to},t,r)),r.abortEarly))return a();void 0===i[n.from]?delete i[n.to]:i[n.to]=i[n.from],f[n.to]=!0,n.options.alias||delete i[n.from]}}if(!this._inner.children&&!this._inner.patterns.length&&!this._inner.dependencies.length)return a();const l=new Set(Object.keys(i));if(this._inner.children){const e=[];for(let n=0;n<this._inner.children.length;++n){const o=this._inner.children[n],u=o.key,c=i[u];l.delete(u);const f={key:u,path:t.path.concat(u),parent:i,reference:t.reference},h=o.schema._validate(c,f,r);if(h.errors){if(s.push(this.createError(\"object.child\",{key:u,child:o.schema._getLabel(u),reason:h.errors},f,r)),r.abortEarly)return a()}else o.schema._flags.strip||void 0===h.value&&h.value!==c?(e.push(u),i[u]=h.finalValue):void 0!==h.value&&(i[u]=h.value)}for(let t=0;t<e.length;++t)delete i[e[t]]}if(l.size&&this._inner.patterns.length)for(const e of l){const n={key:e,path:t.path.concat(e),parent:i,reference:t.reference},o=i[e];for(let t=0;t<this._inner.patterns.length;++t){const u=this._inner.patterns[t];if(u.regex?u.regex.test(e):!u.schema.validate(e).error){l.delete(e);const t=u.rule._validate(o,n,r);if(t.errors&&(s.push(this.createError(\"object.child\",{key:e,child:u.rule._getLabel(e),reason:t.errors},n,r)),r.abortEarly))return a();i[e]=t.value}}}if(l.size&&(this._inner.children||this._inner.patterns.length)){if(r.stripUnknown&&!0!==this._flags.allowUnknown||r.skipFunctions){const e=!!r.stripUnknown&&(!0===r.stripUnknown||!!r.stripUnknown.objects);for(const t of l)e?(delete i[t],l.delete(t)):\"function\"==typeof i[t]&&l.delete(t)}if(void 0!==this._flags.allowUnknown?!this._flags.allowUnknown:!r.allowUnknown)for(const e of l)s.push(this.createError(\"object.allowUnknown\",{child:e},{key:e,path:t.path.concat(e)},r,{}))}for(let e=0;e<this._inner.dependencies.length;++e){const n=this._inner.dependencies[e],c=u[n.type].call(this,null!==n.key&&i[n.key],n.peers,i,{key:n.key,path:null===n.key?t.path:t.path.concat(n.key)},r);if(c instanceof o.Err&&(s.push(c),r.abortEarly))return a()}return a()}keys(e){n.assert(null===e||void 0===e||\"object\"==typeof e,\"Object schema must be a valid object\"),n.assert(!(e&&e instanceof s),\"Object schema cannot be a joi schema\");const t=this.clone();if(!e)return t._inner.children=null,t;const r=Object.keys(e);if(!r.length)return t._inner.children=[],t;const o=new i;if(t._inner.children)for(let e=0;e<t._inner.children.length;++e){const n=t._inner.children[e];r.includes(n.key)||o.add(n,{after:n._refs,group:n.key})}for(let t=0;t<r.length;++t){const n=r[t],i=e[n];try{const e=a.schema(this._currentJoi,i);o.add({key:n,schema:e},{after:e._refs,group:n})}catch(e){throw e.hasOwnProperty(\"path\")?e.path=n+\".\"+e.path:e.path=n,e}}return t._inner.children=o.nodes,t}append(e){return null===e||void 0===e||0===Object.keys(e).length?this:this.keys(e)}unknown(e){const t=!1!==e;if(this._flags.allowUnknown===t)return this;const r=this.clone();return r._flags.allowUnknown=t,r}length(e){return n.assert(Number.isSafeInteger(e)&&e>=0,\"limit must be a positive integer\"),this._test(\"length\",e,function(t,r,n){return Object.keys(t).length===e?t:this.createError(\"object.length\",{limit:e},r,n)})}min(e){return n.assert(Number.isSafeInteger(e)&&e>=0,\"limit must be a positive integer\"),this._test(\"min\",e,function(t,r,n){return Object.keys(t).length>=e?t:this.createError(\"object.min\",{limit:e},r,n)})}max(e){return n.assert(Number.isSafeInteger(e)&&e>=0,\"limit must be a positive integer\"),this._test(\"max\",e,function(t,r,n){return Object.keys(t).length<=e?t:this.createError(\"object.max\",{limit:e},r,n)})}pattern(e,t){const r=e instanceof RegExp;n.assert(r||e instanceof s,\"pattern must be a regex or schema\"),n.assert(void 0!==t,\"Invalid rule\"),r&&(e=new RegExp(e.source,e.ignoreCase?\"i\":void 0));try{t=a.schema(this._currentJoi,t)}catch(e){throw e.hasOwnProperty(\"path\")&&(e.message=e.message+\"(\"+e.path+\")\"),e}const i=this.clone();return r?i._inner.patterns.push({regex:e,rule:t}):i._inner.patterns.push({schema:e,rule:t}),i}schema(){return this._test(\"schema\",null,function(e,t,r){return e instanceof s?e:this.createError(\"object.schema\",null,t,r)})}with(e,t){return n.assert(2===arguments.length,\"Invalid number of arguments, expected 2.\"),this._dependency(\"with\",e,t)}without(e,t){return n.assert(2===arguments.length,\"Invalid number of arguments, expected 2.\"),this._dependency(\"without\",e,t)}xor(...e){return e=n.flatten(e),this._dependency(\"xor\",null,e)}or(...e){return e=n.flatten(e),this._dependency(\"or\",null,e)}and(...e){return e=n.flatten(e),this._dependency(\"and\",null,e)}nand(...e){return e=n.flatten(e),this._dependency(\"nand\",null,e)}requiredKeys(...e){return e=n.flatten(e),this.applyFunctionToChildren(e,\"required\")}optionalKeys(...e){return e=n.flatten(e),this.applyFunctionToChildren(e,\"optional\")}forbiddenKeys(...e){return e=n.flatten(e),this.applyFunctionToChildren(e,\"forbidden\")}rename(e,t,r){n.assert(\"string\"==typeof e||e instanceof RegExp,\"Rename missing the from argument\"),n.assert(\"string\"==typeof t,\"Rename missing the to argument\"),n.assert(t!==e,\"Cannot rename key to same name:\",e);for(let t=0;t<this._inner.renames.length;++t)n.assert(this._inner.renames[t].from!==e,\"Cannot rename the same key multiple times\");const i=this.clone();return i._inner.renames.push({from:e,to:t,options:n.applyToDefaults(u.renameDefaults,r||{}),isRegExp:e instanceof RegExp}),i}applyFunctionToChildren(e,t,r,i){e=[].concat(e),n.assert(e.length>0,\"expected at least one children\");const s=u.groupChildren(e);let o;if(\"\"in s?(o=this[t].apply(this,r),delete s[\"\"]):o=this.clone(),o._inner.children){i=i?i+\".\":\"\";for(let e=0;e<o._inner.children.length;++e){const n=o._inner.children[e],a=s[n.key];a&&(o._inner.children[e]={key:n.key,_refs:n._refs,schema:n.schema.applyFunctionToChildren(a,t,r,i+n.key)},delete s[n.key])}}const a=Object.keys(s);return n.assert(0===a.length,\"unknown key(s)\",a.join(\", \")),o}_dependency(e,t,r){r=[].concat(r);for(let t=0;t<r.length;++t)n.assert(\"string\"==typeof r[t],e,\"peers must be a string or array of strings\");const i=this.clone();return i._inner.dependencies.push({type:e,key:t,peers:r}),i}describe(e){const t=s.prototype.describe.call(this);if(t.rules)for(let e=0;e<t.rules.length;++e){const r=t.rules[e];r.arg&&\"object\"==typeof r.arg&&r.arg.schema&&r.arg.ref&&(r.arg={schema:r.arg.schema.describe(),ref:r.arg.ref.toString()})}if(this._inner.children&&!e){t.children={};for(let e=0;e<this._inner.children.length;++e){const r=this._inner.children[e];t.children[r.key]=r.schema.describe()}}if(this._inner.dependencies.length&&(t.dependencies=n.clone(this._inner.dependencies)),this._inner.patterns.length){t.patterns=[];for(let e=0;e<this._inner.patterns.length;++e){const r=this._inner.patterns[e];r.regex?t.patterns.push({regex:r.regex.toString(),rule:r.rule.describe()}):t.patterns.push({schema:r.schema.describe(),rule:r.rule.describe()})}}return this._inner.renames.length>0&&(t.renames=n.clone(this._inner.renames)),t}assert(e,t,r){e=a.ref(e),n.assert(e.isContext||e.depth>1,\"Cannot use assertions for root level references - use direct key rules instead\"),r=r||\"pass the assertion test\";try{t=a.schema(this._currentJoi,t)}catch(e){throw e.hasOwnProperty(\"path\")&&(e.message=e.message+\"(\"+e.path+\")\"),e}const i=e.path[e.path.length-1],s=e.path.join(\".\");return this._test(\"assert\",{schema:t,ref:e},function(o,a,u){if(!t._validate(e(o),null,u,o).errors)return o;const c=n.merge({},a);return c.key=i,c.path=e.path,this.createError(\"object.assert\",{ref:s,message:r},c,u)})}type(e,t=e.name){n.assert(\"function\"==typeof e,\"type must be a constructor function\");const r={name:t,ctor:e};return this._test(\"type\",r,function(t,n,i){return t instanceof e?t:this.createError(\"object.type\",{type:r.name},n,i)})}},safeParse:function(e){try{return JSON.parse(e)}catch(e){}return e},renameDefaults:{alias:!1,multiple:!1,override:!1},groupChildren:function(e){e.sort();const t={};for(let r=0;r<e.length;++r){const i=e[r];n.assert(\"string\"==typeof i,\"children must be strings\");const s=i.split(\".\")[0];(t[s]=t[s]||[]).push(i.substring(s.length+1))}return t},keysToLabels:function(e,t){const r=e._inner.children;if(!r)return t;const n=function(e){const t=r.find(t=>t.key===e);return t?t.schema._getLabel(e):e};return Array.isArray(t)?t.map(n):n(t)},with:function(e,t,r,n,i){if(void 0===e)return e;for(let e=0;e<t.length;++e){const s=t[e];if(!Object.prototype.hasOwnProperty.call(r,s)||void 0===r[s])return this.createError(\"object.with\",{main:n.key,mainWithLabel:u.keysToLabels(this,n.key),peer:s,peerWithLabel:u.keysToLabels(this,s)},n,i)}return e},without:function(e,t,r,n,i){if(void 0===e)return e;for(let e=0;e<t.length;++e){const s=t[e];if(Object.prototype.hasOwnProperty.call(r,s)&&void 0!==r[s])return this.createError(\"object.without\",{main:n.key,mainWithLabel:u.keysToLabels(this,n.key),peer:s,peerWithLabel:u.keysToLabels(this,s)},n,i)}return e},xor:function(e,t,r,n,i){const s=[];for(let e=0;e<t.length;++e){const n=t[e];Object.prototype.hasOwnProperty.call(r,n)&&void 0!==r[n]&&s.push(n)}if(1===s.length)return e;const o={peers:t,peersWithLabels:u.keysToLabels(this,t)};return 0===s.length?this.createError(\"object.missing\",o,n,i):this.createError(\"object.xor\",o,n,i)},or:function(e,t,r,n,i){for(let n=0;n<t.length;++n){const i=t[n];if(Object.prototype.hasOwnProperty.call(r,i)&&void 0!==r[i])return e}return this.createError(\"object.missing\",{peers:t,peersWithLabels:u.keysToLabels(this,t)},n,i)},and:function(e,t,r,n,i){const s=[],o=[],a=t.length;for(let e=0;e<a;++e){const n=t[e];Object.prototype.hasOwnProperty.call(r,n)&&void 0!==r[n]?o.push(n):s.push(n)}if(!(s.length===a||o.length===a))return this.createError(\"object.and\",{present:o,presentWithLabels:u.keysToLabels(this,o),missing:s,missingWithLabels:u.keysToLabels(this,s)},n,i)},nand:function(e,t,r,i,s){const o=[];for(let e=0;e<t.length;++e){const n=t[e];Object.prototype.hasOwnProperty.call(r,n)&&void 0!==r[n]&&o.push(n)}const a=n.clone(t),c=a.splice(0,1)[0];return o.length===t.length?this.createError(\"object.nand\",{main:c,mainWithLabel:u.keysToLabels(this,c),peers:a,peersWithLabels:u.keysToLabels(this,a)},i,s):null}};e.exports=new u.Object},function(e,t,r){\"use strict\";const n=r(48),i=r(47),s=r(26),o={isoDate:/^(?:[-+]\\d{2})?(?:\\d{4}(?!\\d{2}\\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\\1(?:[12]\\d|0[1-9]|3[01]))?|W(?:[0-4]\\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\\d|[12]\\d{2}|3(?:[0-5]\\d|6[1-6])))(?![T]$|[T][\\d]+Z$)(?:[T\\s](?:(?:(?:[01]\\d|2[0-3])(?:(:?)[0-5]\\d)?|24\\:?00)(?:[.,]\\d+(?!:))?)(?:\\2[0-5]\\d(?:[.,]\\d+)?)?(?:[Z]|(?:[+-])(?:[01]\\d|2[0-3])(?::?[0-5]\\d)?)?)?)?$/};o.invalidDate=new Date(\"\"),o.isIsoDate=(()=>{const e=o.isoDate.toString();return t=>t&&t.toString()===e})(),o.Date=class extends n{constructor(){super(),this._type=\"date\"}_base(e,t,r){const n={value:r.convert&&o.Date.toDate(e,this._flags.format,this._flags.timestamp,this._flags.multiplier)||e};if(n.value instanceof Date&&!isNaN(n.value.getTime()))n.errors=null;else if(r.convert){let e;e=o.isIsoDate(this._flags.format)?\"isoDate\":this._flags.timestamp?`timestamp.${this._flags.timestamp}`:\"base\",n.errors=this.createError(`date.${e}`,null,t,r)}else n.errors=this.createError(\"date.strict\",null,t,r);return n}static toDate(e,t,r,n){if(e instanceof Date)return e;if(\"string\"==typeof e||\"number\"==typeof e&&!isNaN(e)&&isFinite(e)){let i;if(\"string\"==typeof e&&/^[+-]?\\d+(\\.\\d+)?$/.test(e)&&(e=parseFloat(e)),i=t&&o.isIsoDate(t)?t.test(e)?new Date(e):o.invalidDate:r&&n?/^\\s*$/.test(e)?o.invalidDate:new Date(e*n):new Date(e),!isNaN(i.getTime()))return i}return null}iso(){if(this._flags.format===o.isoDate)return this;const e=this.clone();return e._flags.format=o.isoDate,e}timestamp(e=\"javascript\"){const t=[\"javascript\",\"unix\"];if(s.assert(t.includes(e),'\"type\" must be one of \"'+t.join('\", \"')+'\"'),this._flags.timestamp===e)return this;const r=this.clone();return r._flags.timestamp=e,r._flags.multiplier=\"unix\"===e?1e3:1,r}_isIsoDate(e){return o.isoDate.test(e)}},o.compare=function(e,t){return function(r){const n=\"now\"===r,a=i.isRef(r);return n||a||(r=o.Date.toDate(r)),s.assert(r,\"Invalid date format\"),this._test(e,r,function(i,s,u){let c;if(n)c=Date.now();else if(a){if(!(c=o.Date.toDate(r(s.reference||s.parent,u))))return this.createError(\"date.ref\",{ref:r.key},s,u);c=c.getTime()}else c=r.getTime();return t(i.getTime(),c)?i:this.createError(\"date.\"+e,{limit:new Date(c)},s,u)})}},o.Date.prototype.min=o.compare(\"min\",(e,t)=>e>=t),o.Date.prototype.max=o.compare(\"max\",(e,t)=>e<=t),o.Date.prototype.greater=o.compare(\"greater\",(e,t)=>e>t),o.Date.prototype.less=o.compare(\"less\",(e,t)=>e<t),e.exports=new o.Date},function(e,t,r){\"use strict\";const n=r(26),i=r(48),s=r(94),o=r(47),a={Alternatives:class extends i{constructor(){super(),this._type=\"alternatives\",this._invalids.remove(null),this._inner.matches=[]}_init(...e){return e.length?this.try(...e):this}_base(e,t,r){let n=[];const i=this._inner.matches.length,s=this._baseType;for(let o=0;o<i;++o){const a=this._inner.matches[o];if(!a.schema){const n=a.peek||a.is,u=a.is?a.ref(t.reference||t.parent,r):e;if(n._validate(u,null,r,t.parent).errors){if(a.otherwise)return a.otherwise._validate(e,t,r)}else if(a.then)return a.then._validate(e,t,r);if(o===i-1&&s)return s._validate(e,t,r);continue}const u=a.schema._validate(e,t,r);if(!u.errors)return u;n=n.concat(u.errors)}return n.length?{errors:this.createError(\"alternatives.child\",{reason:n},t,r)}:{errors:this.createError(\"alternatives.base\",null,t,r)}}try(...e){e=n.flatten(e),n.assert(e.length,\"Cannot add other alternatives without at least one schema\");const t=this.clone();for(let r=0;r<e.length;++r){const n=s.schema(this._currentJoi,e[r]);n._refs.length&&(t._refs=t._refs.concat(n._refs)),t._inner.matches.push({schema:n})}return t}when(e,t){let r=!1;n.assert(o.isRef(e)||\"string\"==typeof e||(r=e instanceof i),\"Invalid condition:\",e),n.assert(t,\"Missing options\"),n.assert(\"object\"==typeof t,\"Invalid options\"),r?n.assert(!t.hasOwnProperty(\"is\"),'\"is\" can not be used with a schema condition'):n.assert(t.hasOwnProperty(\"is\"),'Missing \"is\" directive'),n.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of \"then\" or \"otherwise\"');const a=this.clone();let u;r||(u=s.schema(this._currentJoi,t.is),null!==t.is&&(o.isRef(t.is)||t.is instanceof i)||(u=u.required()));const c={ref:r?null:s.ref(e),peek:r?e:null,is:u,then:void 0!==t.then?s.schema(this._currentJoi,t.then):void 0,otherwise:void 0!==t.otherwise?s.schema(this._currentJoi,t.otherwise):void 0};return a._baseType&&(c.then=c.then&&a._baseType.concat(c.then),c.otherwise=c.otherwise&&a._baseType.concat(c.otherwise)),r||(o.push(a._refs,c.ref),a._refs=a._refs.concat(c.is._refs)),c.then&&c.then._refs&&(a._refs=a._refs.concat(c.then._refs)),c.otherwise&&c.otherwise._refs&&(a._refs=a._refs.concat(c.otherwise._refs)),a._inner.matches.push(c),a}describe(){const e=i.prototype.describe.call(this),t=[];for(let e=0;e<this._inner.matches.length;++e){const r=this._inner.matches[e];if(r.schema)t.push(r.schema.describe());else{const e=r.is?{ref:r.ref.toString(),is:r.is.describe()}:{peek:r.peek.describe()};r.then&&(e.then=r.then.describe()),r.otherwise&&(e.otherwise=r.otherwise.describe()),t.push(e)}}return e.alternatives=t,e}}};e.exports=new a.Alternatives},function(e,t,r){\"use strict\";const n=r(47),i={extendedCheckForValue:function(e,t){const r=typeof e;if(\"object\"===r){if(e instanceof Date)return t=>t instanceof Date&&e.getTime()===t.getTime();if(Buffer.isBuffer(e))return t=>Buffer.isBuffer(t)&&e.length===t.length&&e.toString(\"binary\")===t.toString(\"binary\")}else if(t&&\"string\"===r){const t=e.toLowerCase();return e=>\"string\"==typeof e&&t===e.toLowerCase()}return null}};e.exports=class e{constructor(e){this._set=new Set(e),this._hasRef=!1}add(e,t){const r=n.isRef(e);return!r&&this.has(e,null,null,!1)?this:(void 0!==t&&n.push(t,e),this._set.add(e),this._hasRef|=r,this)}merge(e,t){for(const t of e._set)this.add(t);for(const e of t._set)this.remove(e);return this}remove(e){return this._set.delete(e),this}has(e,t,r,s){if(!this._set.size)return!1;const o=this._set.has(e);if(o)return o;const a=i.extendedCheckForValue(e,s);if(!a){if(t&&this._hasRef)for(let i of this._set)if(n.isRef(i)&&(e===(i=i(t.reference||t.parent,r))||Array.isArray(i)&&i.includes(e)))return!0;return!1}return this._has(e,t,r,a)}_has(e,t,r,i){const s=!(!t||!this._hasRef),o=function(t){return e===t||i(t)};for(let e of this._set)if(s&&n.isRef(e)&&(e=e(t.reference||t.parent,r),Array.isArray(e))){if(e.find(o))return!0}else if(o(e))return!0;return!1}values(e){if(e&&e.stripUndefined){const e=[];for(const t of this._set)void 0!==t&&e.push(t);return e}return Array.from(this._set)}slice(){const t=new e(this._set);return t._hasRef=this._hasRef,t}concat(t){const r=new e([...this._set,...t._set]);return r._hasRef=!!(this._hasRef|t._hasRef),r}}},function(e,t,r){\"use strict\";const n=r(26);t.concat=function(e,t){if(!t)return e;const r=Object.assign({},e),i=Object.keys(t);for(let e=0;e<i.length;++e){const s=i[e];\"language\"===s&&r.hasOwnProperty(s)?r[s]=n.applyToDefaults(r[s],t[s]):r[s]=t[s]}return r}},function(e,t,r){\"use strict\";const n=r(26),i=r(48),s=r(94),o=r(175),a=r(698),u=r(47),c=r(304),f={alternatives:r(302),array:r(697),boolean:r(696),binary:r(695),date:r(301),func:r(694),number:r(692),object:r(300),string:r(691),callWithDefaults:function(e,t){return n.assert(this,\"Must be invoked on a Joi instance.\"),this._defaults&&(e=this._defaults(e)),e._currentJoi=this,e._init(...t)},root:function(){const e=new i,t=e.clone();return i.prototype._currentJoi=t,t._currentJoi=t,t.any=function(...t){return n.assert(0===t.length,\"Joi.any() does not allow arguments.\"),f.callWithDefaults.call(this,e,t)},t.alternatives=t.alt=function(...e){return f.callWithDefaults.call(this,f.alternatives,e)},t.array=function(...e){return n.assert(0===e.length,\"Joi.array() does not allow arguments.\"),f.callWithDefaults.call(this,f.array,e)},t.boolean=t.bool=function(...e){return n.assert(0===e.length,\"Joi.boolean() does not allow arguments.\"),f.callWithDefaults.call(this,f.boolean,e)},t.binary=function(...e){return n.assert(0===e.length,\"Joi.binary() does not allow arguments.\"),f.callWithDefaults.call(this,f.binary,e)},t.date=function(...e){return n.assert(0===e.length,\"Joi.date() does not allow arguments.\"),f.callWithDefaults.call(this,f.date,e)},t.func=function(...e){return n.assert(0===e.length,\"Joi.func() does not allow arguments.\"),f.callWithDefaults.call(this,f.func,e)},t.number=function(...e){return n.assert(0===e.length,\"Joi.number() does not allow arguments.\"),f.callWithDefaults.call(this,f.number,e)},t.object=function(...e){return f.callWithDefaults.call(this,f.object,e)},t.string=function(...e){return n.assert(0===e.length,\"Joi.string() does not allow arguments.\"),f.callWithDefaults.call(this,f.string,e)},t.ref=function(...e){return u.create(...e)},t.isRef=function(e){return u.isRef(e)},t.validate=function(r,...n){const i=n[n.length-1],s=\"function\"==typeof i?i:null,o=n.length-(s?1:0);if(0===o)return e.validate(r,s);const a=2===o?n[1]:{};return t.compile(n[0])._validateWithOptions(r,a,s)},t.describe=function(...r){return(r.length?t.compile(r[0]):e).describe()},t.compile=function(e){try{return s.schema(this,e)}catch(e){throw e.hasOwnProperty(\"path\")&&(e.message=e.message+\"(\"+e.path+\")\"),e}},t.assert=function(e,r,n){t.attempt(e,r,n)},t.attempt=function(e,r,n){const i=t.validate(e,r),s=i.error;if(s){if(!n)throw\"function\"==typeof s.annotate&&(s.message=s.annotate()),s;if(!(n instanceof Error))throw\"function\"==typeof s.annotate&&(s.message=`${n} ${s.annotate()}`),s;throw n}return i.value},t.reach=function(e,t){n.assert(e&&e instanceof i,\"you must provide a joi schema\"),n.assert(Array.isArray(t)||\"string\"==typeof t,\"path must be a string or an array of strings\");const r=(e,t)=>{if(!t.length)return e;const n=e._inner.children;if(!n)return;const i=t.shift();for(let e=0;e<n.length;++e){const s=n[e];if(s.key===i)return r(s.schema,t)}},s=\"string\"==typeof t?t?t.split(\".\"):[]:t.slice();return r(e,s)},t.lazy=function(e){return a.set(e)},t.defaults=function(e){n.assert(\"function\"==typeof e,\"Defaults must be a function\");let t=Object.create(this.any());return t=e(t),n.assert(t&&t instanceof this.constructor,\"defaults() must return a schema\"),Object.assign(t,this,t.clone()),t._defaults=(t=>(this._defaults&&(t=this._defaults(t),n.assert(t instanceof this.constructor,\"defaults() must return a schema\")),t=e(t),n.assert(t instanceof this.constructor,\"defaults() must return a schema\"),t)),t},t.extend=function(...e){const r=n.flatten(e);n.assert(r.length>0,\"You need to provide at least one extension\"),this.assert(r,t.extensionsSchema);const a=Object.create(this.any());Object.assign(a,this);for(let e=0;e<r.length;++e){let l=r[e];\"function\"==typeof l&&(l=l(a)),this.assert(l,t.extensionSchema);const h=(l.base||this.any()).clone(),p=h.constructor,d=class extends p{constructor(){super(),l.base&&Object.assign(this,h),this._type=l.name,l.language&&(this._settings=c.concat(this._settings,{language:{[l.name]:l.language}}))}};if(l.coerce&&(d.prototype._coerce=function(e,t,r){if(p.prototype._coerce){const n=p.prototype._coerce.call(this,e,t,r);if(n.errors)return n;e=n.value}const n=l.coerce.call(this,e,t,r);return n instanceof o.Err?{value:e,errors:n}:{value:n}}),l.pre&&(d.prototype._base=function(e,t,r){if(p.prototype._base){const n=p.prototype._base.call(this,e,t,r);if(n.errors)return n;e=n.value}const n=l.pre.call(this,e,t,r);return n instanceof o.Err?{value:e,errors:n}:{value:n}}),l.rules)for(let e=0;e<l.rules.length;++e){const t=l.rules[e],r=t.params?t.params instanceof i?t.params._inner.children.map(e=>e.key):Object.keys(t.params):[],o=t.params?s.schema(this,t.params):null;d.prototype[t.name]=function(...e){if(e.length>r.length)throw new Error(\"Unexpected number of arguments\");let s,c=!1,f={};for(let t=0;t<r.length;++t)f[r[t]]=e[t],!c&&u.isRef(e[t])&&(c=!0);if(o&&(f=a.attempt(f,o)),t.validate){const e=function(e,r,n){return t.validate.call(this,f,e,r,n)};s=this._test(t.name,f,e,{description:t.description,hasRef:c})}else s=this.clone();if(t.setup){const e=t.setup.call(s,f);void 0!==e&&(n.assert(e instanceof i,`Setup of extension Joi.${this._type}().${t.name}() must return undefined or a Joi object`),s=e)}return s}}l.describe&&(d.prototype.describe=function(){const e=p.prototype.describe.call(this);return l.describe.call(this,e)});const y=new d;a[l.name]=function(...e){return f.callWithDefaults.call(this,y,e)}}return a},t.extensionSchema=f.object.keys({base:f.object.type(i,\"Joi object\"),name:f.string.required(),coerce:f.func.arity(3),pre:f.func.arity(3),language:f.object,describe:f.func.arity(1),rules:f.array.items(f.object.keys({name:f.string.required(),setup:f.func.arity(1),validate:f.func.arity(4),params:[f.object.pattern(/.*/,f.object.type(i,\"Joi object\")),f.object.type(f.object.constructor,\"Joi object\")],description:[f.string,f.func.arity(1)]}).or(\"setup\",\"validate\"))}).strict(),t.extensionsSchema=f.array.items([f.object,f.func.arity(1)]).strict(),t.version=r(687).version,t}};e.exports=f.root()},function(e,t,r){\"use strict\";const n=r(56),i=r(14),s=r(27);function o(e){let t;if(\"string\"==typeof e)t=e;else if(Buffer.isBuffer(e))t=n.encode(e).toString();else if(i.isPeerId(e))t=e.toB58String();else{if(!s.isPeerInfo(e))throw new Error(\"not valid PeerId or PeerInfo, or B58Str\");t=e.id.toB58String()}return t}e.exports=class{constructor(){this._peers={}}has(e){const t=o(e);return Boolean(this._peers[t])}put(e,t){const r=this._peers[e.id.toB58String()];if(!r||t)return this._peers[e.id.toB58String()]=e,e;e.multiaddrs.forEach(e=>r.multiaddrs.add(e));const n=e.isConnected();return n&&r.connect(n),e.protocols.forEach(e=>r.protocols.add(e)),!r.id.privKey&&e.id.privKey&&(r.id.privKey=e.id.privKey),!r.id.pubKey&&e.id.pubKey&&(r.id.pubKey=e.id.pubKey),r}get(e){const t=o(e),r=this._peers[t];if(r)return r;throw new Error(\"PeerInfo not found\")}getAll(){return this._peers}getAllArray(){return Object.keys(this._peers).map(e=>this._peers[e])}getMultiaddrs(e){return this.get(e).multiaddrs.toArray()}remove(e){const t=o(e);this._peers[t]&&delete this._peers[t]}}},function(e,t,r){\"use strict\";var n=t,i=r(38).Buffer,s=r(75);n.toBuffer=function(e,t,r){var n;if(r=~~r,this.isV4Format(e))n=t||new i(r+4),e.split(/\\./g).map(function(e){n[r++]=255&parseInt(e,10)});else if(this.isV6Format(e)){var s,o=e.split(\":\",8);for(s=0;s<o.length;s++){var a;this.isV4Format(o[s])&&(a=this.toBuffer(o[s]),o[s]=a.slice(0,2).toString(\"hex\")),a&&++s<8&&o.splice(s,0,a.slice(2,4).toString(\"hex\"))}if(\"\"===o[0])for(;o.length<8;)o.unshift(\"0\");else if(\"\"===o[o.length-1])for(;o.length<8;)o.push(\"0\");else if(o.length<8){for(s=0;s<o.length&&\"\"!==o[s];s++);var u=[s,1];for(s=9-o.length;s>0;s--)u.push(\"0\");o.splice.apply(o,u)}for(n=t||new i(r+16),s=0;s<o.length;s++){var c=parseInt(o[s],16);n[r++]=c>>8&255,n[r++]=255&c}}if(!n)throw Error(\"Invalid ip address: \"+e);return n},n.toString=function(e,t,r){t=~~t;var n=[];if(4===(r=r||e.length-t)){for(var i=0;i<r;i++)n.push(e[t+i]);n=n.join(\".\")}else if(16===r){for(i=0;i<r;i+=2)n.push(e.readUInt16BE(t+i).toString(16));n=(n=(n=n.join(\":\")).replace(/(^|:)0(:0)*:0(:|$)/,\"$1::$3\")).replace(/:{3,4}/,\"::\")}return n};var o=/^(\\d{1,3}\\.){3,3}\\d{1,3}$/,a=/^(::)?(((\\d{1,3}\\.){3}(\\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function u(e){return e?e.toLowerCase():\"ipv4\"}n.isV4Format=function(e){return o.test(e)},n.isV6Format=function(e){return a.test(e)},n.fromPrefixLen=function(e,t){var r=4;\"ipv6\"===(t=e>32?\"ipv6\":u(t))&&(r=16);for(var s=new i(r),o=0,a=s.length;o<a;++o){var c=8;e<8&&(c=e),e-=c,s[o]=255&~(255>>c)}return n.toString(s)},n.mask=function(e,t){e=n.toBuffer(e),t=n.toBuffer(t);var r=new i(Math.max(e.length,t.length)),s=0;if(e.length===t.length)for(s=0;s<e.length;s++)r[s]=e[s]&t[s];else if(4===t.length)for(s=0;s<t.length;s++)r[s]=e[e.length-4+s]&t[s];else{for(s=0;s<r.length-6;s++)r[s]=0;for(r[10]=255,r[11]=255,s=0;s<e.length;s++)r[s+12]=e[s]&t[s+12];s+=12}for(;s<r.length;s++)r[s]=0;return n.toString(r)},n.cidr=function(e){var t=e.split(\"/\"),r=t[0];if(2!==t.length)throw new Error(\"invalid CIDR subnet: \"+r);var i=n.fromPrefixLen(parseInt(t[1],10));return n.mask(r,i)},n.subnet=function(e,t){for(var r=n.toLong(n.mask(e,t)),i=n.toBuffer(t),s=0,o=0;o<i.length;o++)if(255===i[o])s+=8;else for(var a=255&i[o];a;)a=a<<1&255,s++;var u=Math.pow(2,32-s);return{networkAddress:n.fromLong(r),firstAddress:u<=2?n.fromLong(r):n.fromLong(r+1),lastAddress:u<=2?n.fromLong(r+u-1):n.fromLong(r+u-2),broadcastAddress:n.fromLong(r+u-1),subnetMask:t,subnetMaskLength:s,numHosts:u<=2?u:u-2,length:u,contains:function(e){return r===n.toLong(n.mask(e,t))}}},n.cidrSubnet=function(e){var t=e.split(\"/\"),r=t[0];if(2!==t.length)throw new Error(\"invalid CIDR subnet: \"+r);var i=n.fromPrefixLen(parseInt(t[1],10));return n.subnet(r,i)},n.not=function(e){for(var t=n.toBuffer(e),r=0;r<t.length;r++)t[r]=255^t[r];return n.toString(t)},n.or=function(e,t){if(e=n.toBuffer(e),t=n.toBuffer(t),e.length===t.length){for(var r=0;r<e.length;++r)e[r]|=t[r];return n.toString(e)}var i=e,s=t;t.length>e.length&&(i=t,s=e);var o=i.length-s.length;for(r=o;r<i.length;++r)i[r]|=s[r-o];return n.toString(i)},n.isEqual=function(e,t){if(e=n.toBuffer(e),t=n.toBuffer(t),e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if(4===t.length){var i=t;t=e,e=i}for(r=0;r<10;r++)if(0!==t[r])return!1;var s=t.readUInt16BE(10);if(0!==s&&65535!==s)return!1;for(r=0;r<4;r++)if(e[r]!==t[r+12])return!1;return!0},n.isPrivate=function(e){return/^(::f{4}:)?10\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\\.168\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\\.(1[6-9]|2\\d|30|31)\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\\.254\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},n.isPublic=function(e){return!n.isPrivate(e)},n.isLoopback=function(e){return/^(::f{4}:)?127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})/.test(e)||/^fe80::1$/.test(e)||/^::1$/.test(e)||/^::$/.test(e)},n.loopback=function(e){if(\"ipv4\"!==(e=u(e))&&\"ipv6\"!==e)throw new Error(\"family must be ipv4 or ipv6\");return\"ipv4\"===e?\"127.0.0.1\":\"fe80::1\"},n.address=function(e,t){var r,i=s.networkInterfaces();if(t=u(t),e&&\"private\"!==e&&\"public\"!==e){var o=i[e].filter(function(e){return e.family.toLowerCase()===t});if(0===o.length)return;return o[0].address}return(r=Object.keys(i).map(function(r){var s=i[r].filter(function(r){return r.family=r.family.toLowerCase(),r.family===t&&!n.isLoopback(r.address)&&(!e||(\"public\"===e?n.isPrivate(r.address):n.isPublic(r.address)))});return s.length?s[0].address:void 0}).filter(Boolean)).length?r[0]:n.loopback(t)},n.toLong=function(e){var t=0;return e.split(\".\").forEach(function(e){t<<=8,t+=parseInt(e)}),t>>>0},n.fromLong=function(e){return(e>>>24)+\".\"+(e>>16&255)+\".\"+(e>>8&255)+\".\"+(255&e)}},function(e,t,r){\"use strict\";const n=r(16);e.exports={ensureMultiaddr:function(e){return n.isMultiaddr(e)?e:n(e)}}},function(e,t,r){\"use strict\";const n=r(311);e.exports=function(e){if(!e||\"number\"!=typeof e)throw new Error(\"first argument must be a Number bigger than 0\");return n.getRandomValues(new Uint8Array(e))}},function(e,t,r){var n=r(126),i=r(720),s=new n.bignum(1);function o(e){return Buffer(e,\"hex\").toString(\"base64\").replace(/\\+/g,\"-\").replace(/\\//g,\"_\").replace(/=/g,\"\")}var a=n.define(\"RSAPublicKey\",function(){this.seq().obj(this.key(\"n\").int(),this.key(\"e\").int())}),u=n.define(\"AlgorithmIdentifier\",function(){this.seq().obj(this.key(\"algorithm\").objid(),this.key(\"parameters\").optional().any())}),c=n.define(\"PublicKeyInfo\",function(){this.seq().obj(this.key(\"algorithm\").use(u),this.key(\"publicKey\").bitstr())}),f=n.define(\"Version\",function(){this.int({0:\"two-prime\",1:\"multi\"})}),l=n.define(\"OtherPrimeInfos\",function(){this.seq().obj(this.key(\"ri\").int(),this.key(\"di\").int(),this.key(\"ti\").int())}),h=n.define(\"RSAPrivateKey\",function(){this.seq().obj(this.key(\"version\").use(f),this.key(\"n\").int(),this.key(\"e\").int(),this.key(\"d\").int(),this.key(\"p\").int(),this.key(\"q\").int(),this.key(\"dp\").int(),this.key(\"dq\").int(),this.key(\"qi\").int(),this.key(\"other\").optional().use(l))}),p=n.define(\"PrivateKeyInfo\",function(){this.seq().obj(this.key(\"version\").use(f),this.key(\"algorithm\").use(u),this.key(\"privateKey\").bitstr())});function d(e,t){return t=t||{},Object.keys(t).forEach(function(r){e[r]=t[r]}),e}function y(e){return e.length%2==1?\"0\"+e:e}function m(e,t){var r=a.decode(e,\"der\"),n=y(r.e.toString(16));return d({kty:\"RSA\",n:w(r.n),e:o(n)},t)}function g(e,t){var r=h.decode(e,\"der\"),n=y(r.e.toString(16));return d({kty:\"RSA\",n:w(r.n),e:o(n),d:w(r.d),p:w(r.p),q:w(r.q),dp:w(r.dp),dq:w(r.dq),qi:w(r.qi)},t)}function v(e,t){return m(c.decode(e,\"der\").publicKey.data,t)}function b(e,t){return g(p.decode(e,\"der\").privateKey.data,t)}function w(e){return o(y(e.toString(16)))}function _(e){return/^[0-9]+$/.test(e)?new n.bignum(e,10):function(e){return new n.bignum(Buffer(e,\"base64\"))}(e)}e.exports={pem2jwk:function(e,t){var r=e.toString().split(/(\\r\\n|\\r|\\n)+/g),n=function(e){var t=/^-----BEGIN (RSA )?(PUBLIC|PRIVATE) KEY-----$/.exec(e);if(!t)return null;var r=!!t[1];return\"PRIVATE\"===t[2]?r?g:b:r?m:v}((r=r.filter(function(e){return 0!==e.trim().length}))[0]);return r=r.slice(1,-1).join(\"\"),n(new Buffer(r.replace(/[^\\w\\d\\+\\/=]+/g,\"\"),\"base64\"),t)},jwk2pem:function(e){var t=function(e){return{n:_(e.n),e:_(e.e),d:e.d&&_(e.d),p:e.p&&_(e.p),q:e.q&&_(e.q),dp:e.dp&&_(e.dp),dq:e.dq&&_(e.dq),qi:e.qi&&_(e.qi)}}(e),r=!!t.d,n=r?\"PRIVATE\":\"PUBLIC\",o=\"-----BEGIN RSA \"+n+\" KEY-----\\n\",u=\"\\n-----END RSA \"+n+\" KEY-----\\n\",c=Buffer(0);return r?(t.p||(t=function(e){var t=i(e.e,e.d,e.n),r=t.p,n=t.q,o=e.d.mod(r.sub(s)),a=e.d.mod(n.sub(s)),u=n.invm(r);return{n:e.n,e:e.e,d:e.d,p:r,q:n,dp:o,dq:a,qi:u}}(t)),t.version=\"two-prime\",c=h.encode(t,\"der\")):c=a.encode(t,\"der\"),o+c.toString(\"base64\").match(/.{1,64}/g).join(\"\\n\")+u},BN:n.bignum}},function(e,t,r){\"use strict\";const n=r(24),i=r(721),s=r(2),o=r(310).pem2jwk,a=r(310).jwk2pem;t.utils=r(719),t.generateKey=function(e,t){s(()=>{let r;try{const n=i({bits:e});r={privateKey:o(n.private),publicKey:o(n.public)}}catch(e){return t(e)}t(null,r)})},t.unmarshalPrivateKey=function(e,t){s(()=>{if(!e)return t(new Error(\"Key is invalid\"));t(null,{privateKey:e,publicKey:{kty:e.kty,n:e.n,e:e.e}})})},t.getRandomValues=function(e){return n.randomBytes(e.length)},t.hashAndSign=function(e,t,r){s(()=>{let i;try{const s=n.createSign(\"RSA-SHA256\");s.update(t);const o=a(e);i=s.sign(o)}catch(e){return r(new Error(\"Key or message is invalid!: \"+e.message))}r(null,i)})},t.hashAndVerify=function(e,t,r,i){s(()=>{let s;try{const o=n.createVerify(\"RSA-SHA256\");o.update(r);const u=a(e);s=o.verify(u,t)}catch(e){return i(new Error(\"Key or message is invalid!:\"+e.message))}i(null,s)})}},function(e,t,r){var n=r(4);r(6),e.exports=n.log=n.log||{},n.log.levels=[\"none\",\"error\",\"warning\",\"info\",\"debug\",\"verbose\",\"max\"];var i={},s=[],o=null;n.log.LEVEL_LOCKED=2,n.log.NO_LEVEL_CHECK=4,n.log.INTERPOLATE=8;for(var a=0;a<n.log.levels.length;++a){var u=n.log.levels[a];i[u]={index:a,name:u.toUpperCase()}}n.log.logMessage=function(e){for(var t=i[e.level].index,r=0;r<s.length;++r){var o=s[r];if(o.flags&n.log.NO_LEVEL_CHECK)o.f(e);else t<=i[o.level].index&&o.f(o,e)}},n.log.prepareStandard=function(e){\"standard\"in e||(e.standard=i[e.level].name+\" [\"+e.category+\"] \"+e.message)},n.log.prepareFull=function(e){if(!(\"full\"in e)){var t=[e.message];t=t.concat([]||e.arguments),e.full=n.util.format.apply(this,t)}},n.log.prepareStandardFull=function(e){\"standardFull\"in e||(n.log.prepareStandard(e),e.standardFull=e.standard)};var c=[\"error\",\"warning\",\"info\",\"debug\",\"verbose\"];for(a=0;a<c.length;++a)!function(e){n.log[e]=function(t,r){var i=Array.prototype.slice.call(arguments).slice(2),s={timestamp:new Date,level:e,category:t,message:r,arguments:i};n.log.logMessage(s)}}(c[a]);if(n.log.makeLogger=function(e){var t={flags:0,f:e};return n.log.setLevel(t,\"none\"),t},n.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&n.log.LEVEL_LOCKED))for(var i=0;i<n.log.levels.length;++i){if(t==n.log.levels[i]){e.level=t,r=!0;break}}return r},n.log.lock=function(e,t){void 0===t||t?e.flags|=n.log.LEVEL_LOCKED:e.flags&=~n.log.LEVEL_LOCKED},n.log.addLogger=function(e){s.push(e)},\"undefined\"!=typeof console&&\"log\"in console){var f;if(console.error&&console.warn&&console.info&&console.debug){var l={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},h=function(e,t){n.log.prepareStandard(t);var r=l[t.level],i=[t.standard];i=i.concat(t.arguments.slice()),r.apply(console,i)};f=n.log.makeLogger(h)}else{h=function(e,t){n.log.prepareStandardFull(t),console.log(t.standardFull)};f=n.log.makeLogger(h)}n.log.setLevel(f,\"debug\"),n.log.addLogger(f),o=f}else console={log:function(){}};if(null!==o){var p=n.util.getQueryVariables();if(\"console.level\"in p&&n.log.setLevel(o,p[\"console.level\"].slice(-1)[0]),\"console.lock\"in p)\"true\"==p[\"console.lock\"].slice(-1)[0]&&n.log.lock(o)}n.log.consoleLogger=o},function(e,t,r){var n=r(4);r(57),r(6);var i=e.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=i;var s=n.sha384=n.sha512.sha384=n.sha512.sha384||{};s.create=function(){return i.create(\"SHA-384\")},n.md.sha384=n.md.algorithms.sha384=s,n.sha512.sha256=n.sha512.sha256||{create:function(){return i.create(\"SHA-512/256\")}},n.md[\"sha512/256\"]=n.md.algorithms[\"sha512/256\"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return i.create(\"SHA-512/224\")}},n.md[\"sha512/224\"]=n.md.algorithms[\"sha512/224\"]=n.sha512.sha224,i.create=function(e){if(a||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(c={})[\"SHA-512\"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c[\"SHA-384\"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c[\"SHA-512/256\"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c[\"SHA-512/224\"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0),void 0===e&&(e=\"SHA-512\"),!(e in c))throw new Error(\"Invalid SHA-512 algorithm: \"+e);for(var t=c[e],r=null,i=n.util.createBuffer(),s=new Array(80),l=0;l<80;++l)s[l]=new Array(2);var h=64;switch(e){case\"SHA-384\":h=48;break;case\"SHA-512/256\":h=32;break;case\"SHA-512/224\":h=28}var p={algorithm:e.replace(\"-\",\"\").toLowerCase(),blockLength:128,digestLength:h,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];for(var e=p.messageLengthSize/4,s=0;s<e;++s)p.fullMessageLength.push(0);i=n.util.createBuffer(),r=new Array(t.length);for(s=0;s<t.length;++s)r[s]=t[s].slice(0);return p}};return p.start(),p.update=function(e,t){\"utf8\"===t&&(e=n.util.encodeUtf8(e));var o=e.length;p.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=p.fullMessageLength.length-1;a>=0;--a)p.fullMessageLength[a]+=o[1],o[1]=o[0]+(p.fullMessageLength[a]/4294967296>>>0),p.fullMessageLength[a]=p.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return i.putBytes(e),f(r,s,i),(i.read>2048||0===i.length())&&i.compact(),p},p.digest=function(){var t=n.util.createBuffer();t.putBytes(i.bytes());var a,u=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize&p.blockLength-1;t.putBytes(o.substr(0,p.blockLength-u));for(var c=8*p.fullMessageLength[0],l=0;l<p.fullMessageLength.length-1;++l)c+=(a=8*p.fullMessageLength[l+1])/4294967296>>>0,t.putInt32(c>>>0),c=a>>>0;t.putInt32(c);var h=new Array(r.length);for(l=0;l<r.length;++l)h[l]=r[l].slice(0);f(h,s,t);var d,y=n.util.createBuffer();d=\"SHA-512\"===e?h.length:\"SHA-384\"===e?h.length-2:h.length-4;for(l=0;l<d;++l)y.putInt32(h[l][0]),l===d-1&&\"SHA-512/224\"===e||y.putInt32(h[l][1]);return y},p};var o=null,a=!1,u=null,c=null;function f(e,t,r){for(var n,i,s,o,a,c,f,l,h,p,d,y,m,g,v,b,w,_,k,S,E,x,A,B,C,I,T,D,P,O,N,U,R,L=r.length();L>=128;){for(T=0;T<16;++T)t[T][0]=r.getInt32()>>>0,t[T][1]=r.getInt32()>>>0;for(;T<80;++T)n=(((D=(O=t[T-2])[0])>>>19|(P=O[1])<<13)^(P>>>29|D<<3)^D>>>6)>>>0,i=((D<<13|P>>>19)^(P<<3|D>>>29)^(D<<26|P>>>6))>>>0,s=(((D=(U=t[T-15])[0])>>>1|(P=U[1])<<31)^(D>>>8|P<<24)^D>>>7)>>>0,o=((D<<31|P>>>1)^(D<<24|P>>>8)^(D<<25|P>>>7))>>>0,N=t[T-7],R=t[T-16],P=i+N[1]+o+R[1],t[T][0]=n+N[0]+s+R[0]+(P/4294967296>>>0)>>>0,t[T][1]=P>>>0;for(d=e[0][0],y=e[0][1],m=e[1][0],g=e[1][1],v=e[2][0],b=e[2][1],w=e[3][0],_=e[3][1],k=e[4][0],S=e[4][1],E=e[5][0],x=e[5][1],A=e[6][0],B=e[6][1],C=e[7][0],I=e[7][1],T=0;T<80;++T)f=((k>>>14|S<<18)^(k>>>18|S<<14)^(S>>>9|k<<23))>>>0,l=(A^k&(E^A))>>>0,a=((d>>>28|y<<4)^(y>>>2|d<<30)^(y>>>7|d<<25))>>>0,c=((d<<4|y>>>28)^(y<<30|d>>>2)^(y<<25|d>>>7))>>>0,h=(d&m|v&(d^m))>>>0,p=(y&g|b&(y^g))>>>0,P=I+(((k<<18|S>>>14)^(k<<14|S>>>18)^(S<<23|k>>>9))>>>0)+((B^S&(x^B))>>>0)+u[T][1]+t[T][1],n=C+f+l+u[T][0]+t[T][0]+(P/4294967296>>>0)>>>0,i=P>>>0,s=a+h+((P=c+p)/4294967296>>>0)>>>0,o=P>>>0,C=A,I=B,A=E,B=x,E=k,x=S,k=w+n+((P=_+i)/4294967296>>>0)>>>0,S=P>>>0,w=v,_=b,v=m,b=g,m=d,g=y,d=n+s+((P=i+o)/4294967296>>>0)>>>0,y=P>>>0;P=e[0][1]+y,e[0][0]=e[0][0]+d+(P/4294967296>>>0)>>>0,e[0][1]=P>>>0,P=e[1][1]+g,e[1][0]=e[1][0]+m+(P/4294967296>>>0)>>>0,e[1][1]=P>>>0,P=e[2][1]+b,e[2][0]=e[2][0]+v+(P/4294967296>>>0)>>>0,e[2][1]=P>>>0,P=e[3][1]+_,e[3][0]=e[3][0]+w+(P/4294967296>>>0)>>>0,e[3][1]=P>>>0,P=e[4][1]+S,e[4][0]=e[4][0]+k+(P/4294967296>>>0)>>>0,e[4][1]=P>>>0,P=e[5][1]+x,e[5][0]=e[5][0]+E+(P/4294967296>>>0)>>>0,e[5][1]=P>>>0,P=e[6][1]+B,e[6][0]=e[6][0]+A+(P/4294967296>>>0)>>>0,e[6][1]=P>>>0,P=e[7][1]+I,e[7][0]=e[7][0]+C+(P/4294967296>>>0)>>>0,e[7][1]=P>>>0,L-=128}}},function(e,t,r){var n=r(4);e.exports=n.debug=n.debug||{},n.debug.storage={},n.debug.get=function(e,t){var r;return void 0===e?r=n.debug.storage:e in n.debug.storage&&(r=void 0===t?n.debug.storage[e]:n.debug.storage[e][t]),r},n.debug.set=function(e,t,r){e in n.debug.storage||(n.debug.storage[e]={}),n.debug.storage[e][t]=r},n.debug.clear=function(e,t){void 0===e?n.debug.storage={}:e in n.debug.storage&&(void 0===t?delete n.debug.storage[e]:delete n.debug.storage[e][t])}},function(e,t,r){var n=r(4);r(6),n.mgf=n.mgf||{},(e.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(e){return{generate:function(t,r){for(var i=new n.util.ByteBuffer,s=Math.ceil(r/e.digestLength),o=0;o<s;o++){var a=new n.util.ByteBuffer;a.putInt32(o),e.start(),e.update(t+a.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-r),i.getBytes()}}}},function(e,t,r){var n=r(4);r(58),r(6);var i=n.asn1,s=e.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=s;var o={name:\"ContentInfo\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"ContentInfo.ContentType\",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:\"contentType\"},{name:\"ContentInfo.content\",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:\"content\"}]};s.contentInfoValidator=o;var a={name:\"EncryptedContentInfo\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"EncryptedContentInfo.contentType\",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:\"contentType\"},{name:\"EncryptedContentInfo.contentEncryptionAlgorithm\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm\",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:\"encAlgorithm\"},{name:\"EncryptedContentInfo.contentEncryptionAlgorithm.parameter\",tagClass:i.Class.UNIVERSAL,captureAsn1:\"encParameter\"}]},{name:\"EncryptedContentInfo.encryptedContent\",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:\"encryptedContent\",captureAsn1:\"encryptedContentAsn1\"}]};s.envelopedDataValidator={name:\"EnvelopedData\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"EnvelopedData.Version\",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:\"version\"},{name:\"EnvelopedData.RecipientInfos\",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:\"recipientInfos\"}].concat(a)},s.encryptedDataValidator={name:\"EncryptedData\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"EncryptedData.Version\",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:\"version\"}].concat(a)};var u={name:\"SignerInfo\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"SignerInfo.version\",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:\"SignerInfo.issuerAndSerialNumber\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"SignerInfo.issuerAndSerialNumber.issuer\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:\"issuer\"},{name:\"SignerInfo.issuerAndSerialNumber.serialNumber\",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:\"serial\"}]},{name:\"SignerInfo.digestAlgorithm\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"SignerInfo.digestAlgorithm.algorithm\",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:\"digestAlgorithm\"},{name:\"SignerInfo.digestAlgorithm.parameter\",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:\"digestParameter\",optional:!0}]},{name:\"SignerInfo.authenticatedAttributes\",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:\"authenticatedAttributes\"},{name:\"SignerInfo.digestEncryptionAlgorithm\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:\"signatureAlgorithm\"},{name:\"SignerInfo.encryptedDigest\",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:\"signature\"},{name:\"SignerInfo.unauthenticatedAttributes\",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:\"unauthenticatedAttributes\"}]};s.signedDataValidator={name:\"SignedData\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"SignedData.Version\",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:\"version\"},{name:\"SignedData.DigestAlgorithms\",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:\"digestAlgorithms\"},o,{name:\"SignedData.Certificates\",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:\"certificates\"},{name:\"SignedData.CertificateRevocationLists\",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:\"crls\"},{name:\"SignedData.SignerInfos\",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:\"signerInfos\",optional:!0,value:[u]}]},s.recipientInfoValidator={name:\"RecipientInfo\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"RecipientInfo.version\",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:\"version\"},{name:\"RecipientInfo.issuerAndSerial\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"RecipientInfo.issuerAndSerial.issuer\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:\"issuer\"},{name:\"RecipientInfo.issuerAndSerial.serialNumber\",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:\"serial\"}]},{name:\"RecipientInfo.keyEncryptionAlgorithm\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"RecipientInfo.keyEncryptionAlgorithm.algorithm\",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:\"encAlgorithm\"},{name:\"RecipientInfo.keyEncryptionAlgorithm.parameter\",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:\"encParameter\"}]},{name:\"RecipientInfo.encryptedKey\",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:\"encKey\"}]}},function(e,t,r){var n=r(4);r(58),r(96),r(66),r(316),r(323),r(42),r(128),r(95),r(6),r(180);var i=n.asn1,s=n.pki,o=e.exports=n.pkcs12=n.pkcs12||{},a={name:\"ContentInfo\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"ContentInfo.contentType\",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:\"contentType\"},{name:\"ContentInfo.content\",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:\"content\"}]},u={name:\"PFX\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"PFX.version\",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:\"version\"},a,{name:\"PFX.macData\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:\"mac\",value:[{name:\"PFX.macData.mac\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"PFX.macData.mac.digestAlgorithm\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"PFX.macData.mac.digestAlgorithm.algorithm\",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:\"macAlgorithm\"},{name:\"PFX.macData.mac.digestAlgorithm.parameters\",tagClass:i.Class.UNIVERSAL,captureAsn1:\"macAlgorithmParameters\"}]},{name:\"PFX.macData.mac.digest\",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:\"macDigest\"}]},{name:\"PFX.macData.macSalt\",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:\"macSalt\"},{name:\"PFX.macData.iterations\",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:\"macIterations\"}]}]},c={name:\"SafeBag\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"SafeBag.bagId\",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:\"bagId\"},{name:\"SafeBag.bagValue\",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:\"bagValue\"},{name:\"SafeBag.bagAttributes\",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,optional:!0,capture:\"bagAttributes\"}]},f={name:\"Attribute\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"Attribute.attrId\",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:\"oid\"},{name:\"Attribute.attrValues\",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,capture:\"values\"}]},l={name:\"CertBag\",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:\"CertBag.certId\",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:\"certId\"},{name:\"CertBag.certValue\",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:\"CertBag.certValue[0]\",tagClass:i.Class.UNIVERSAL,type:i.Class.OCTETSTRING,constructed:!1,capture:\"cert\"}]}]};function h(e,t,r,n){for(var i=[],s=0;s<e.length;s++)for(var o=0;o<e[s].safeBags.length;o++){var a=e[s].safeBags[o];void 0!==n&&a.type!==n||(null!==t?void 0!==a.attributes[t]&&a.attributes[t].indexOf(r)>=0&&i.push(a):i.push(a))}return i}function p(e){if(e.composed||e.constructed){for(var t=n.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function d(e,t){var r={},o=[];if(!i.validate(e,n.pkcs7.asn1.encryptedDataValidator,r,o))throw(a=new Error(\"Cannot read EncryptedContentInfo.\")).errors=o,a;var a,u=i.derToOid(r.contentType);if(u!==s.oids.data)throw(a=new Error(\"PKCS#12 EncryptedContentInfo ContentType is not Data.\")).oid=u,a;u=i.derToOid(r.encAlgorithm);var c=s.pbe.getCipher(u,r.encParameter,t),f=p(r.encryptedContentAsn1),l=n.util.createBuffer(f.value);if(c.update(l),!c.finish())throw new Error(\"Failed to decrypt PKCS#12 SafeContents.\");return c.output.getBytes()}function y(e,t,r){if(!t&&0===e.length)return[];if((e=i.fromDer(e,t)).tagClass!==i.Class.UNIVERSAL||e.type!==i.Type.SEQUENCE||!0!==e.constructed)throw new Error(\"PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.\");for(var n=[],o=0;o<e.value.length;o++){var a=e.value[o],u={},f=[];if(!i.validate(a,c,u,f))throw(g=new Error(\"Cannot read SafeBag.\")).errors=f,g;var h,p,d={type:i.derToOid(u.bagId),attributes:m(u.bagAttributes)};n.push(d);var y=u.bagValue.value[0];switch(d.type){case s.oids.pkcs8ShroudedKeyBag:if(null===(y=s.decryptPrivateKeyInfo(y,r)))throw new Error(\"Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?\");case s.oids.keyBag:try{d.key=s.privateKeyFromAsn1(y)}catch(e){d.key=null,d.asn1=y}continue;case s.oids.certBag:h=l,p=function(){if(i.derToOid(u.certId)!==s.oids.x509Certificate){var e=new Error(\"Unsupported certificate type, only X.509 supported.\");throw e.oid=i.derToOid(u.certId),e}var r=i.fromDer(u.cert,t);try{d.cert=s.certificateFromAsn1(r,!0)}catch(e){d.cert=null,d.asn1=r}};break;default:var g;throw(g=new Error(\"Unsupported PKCS#12 SafeBag type.\")).oid=d.type,g}if(void 0!==h&&!i.validate(y,h,u,f))throw(g=new Error(\"Cannot read PKCS#12 \"+h.name)).errors=f,g;p()}return n}function m(e){var t={};if(void 0!==e)for(var r=0;r<e.length;++r){var n={},o=[];if(!i.validate(e[r],f,n,o)){var a=new Error(\"Cannot read PKCS#12 BagAttribute.\");throw a.errors=o,a}var u=i.derToOid(n.oid);if(void 0!==s.oids[u]){t[s.oids[u]]=[];for(var c=0;c<n.values.length;++c)t[s.oids[u]].push(n.values[c].value)}}return t}o.pkcs12FromAsn1=function(e,t,r){\"string\"==typeof t?(r=t,t=!0):void 0===t&&(t=!0);var c={};if(!i.validate(e,u,c,[]))throw(f=new Error(\"Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.\")).errors=f,f;var f,l={version:c.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,r={};return\"localKeyId\"in e?t=e.localKeyId:\"localKeyIdHex\"in e&&(t=n.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!(\"friendlyName\"in e)&&\"bagType\"in e&&(r[e.bagType]=h(l.safeContents,null,null,e.bagType)),void 0!==t&&(r.localKeyId=h(l.safeContents,\"localKeyId\",t,e.bagType)),\"friendlyName\"in e&&(r.friendlyName=h(l.safeContents,\"friendlyName\",e.friendlyName,e.bagType)),r},getBagsByFriendlyName:function(e,t){return h(l.safeContents,\"friendlyName\",e,t)},getBagsByLocalKeyId:function(e,t){return h(l.safeContents,\"localKeyId\",e,t)}};if(3!==c.version.charCodeAt(0))throw(f=new Error(\"PKCS#12 PFX of version other than 3 not supported.\")).version=c.version.charCodeAt(0),f;if(i.derToOid(c.contentType)!==s.oids.data)throw(f=new Error(\"Only PKCS#12 PFX in password integrity mode supported.\")).oid=i.derToOid(c.contentType),f;var m=c.content.value[0];if(m.tagClass!==i.Class.UNIVERSAL||m.type!==i.Type.OCTETSTRING)throw new Error(\"PKCS#12 authSafe content data is not an OCTET STRING.\");if(m=p(m),c.mac){var g=null,v=0,b=i.derToOid(c.macAlgorithm);switch(b){case s.oids.sha1:g=n.md.sha1.create(),v=20;break;case s.oids.sha256:g=n.md.sha256.create(),v=32;break;case s.oids.sha384:g=n.md.sha384.create(),v=48;break;case s.oids.sha512:g=n.md.sha512.create(),v=64;break;case s.oids.md5:g=n.md.md5.create(),v=16}if(null===g)throw new Error(\"PKCS#12 uses unsupported MAC algorithm: \"+b);var w=new n.util.ByteBuffer(c.macSalt),_=\"macIterations\"in c?parseInt(n.util.bytesToHex(c.macIterations),16):1,k=o.generateKey(r,w,3,_,v,g),S=n.hmac.create();if(S.start(g,k),S.update(m.value),S.getMac().getBytes()!==c.macDigest)throw new Error(\"PKCS#12 MAC could not be verified. Invalid password?\")}return function(e,t,r,n){if((t=i.fromDer(t,r)).tagClass!==i.Class.UNIVERSAL||t.type!==i.Type.SEQUENCE||!0!==t.constructed)throw new Error(\"PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo\");for(var o=0;o<t.value.length;o++){var u=t.value[o],c={},f=[];if(!i.validate(u,a,c,f)){var l=new Error(\"Cannot read ContentInfo.\");throw l.errors=f,l}var h={encrypted:!1},m=null,g=c.content.value[0];switch(i.derToOid(c.contentType)){case s.oids.data:if(g.tagClass!==i.Class.UNIVERSAL||g.type!==i.Type.OCTETSTRING)throw new Error(\"PKCS#12 SafeContents Data is not an OCTET STRING.\");m=p(g).value;break;case s.oids.encryptedData:m=d(g,n),h.encrypted=!0;break;default:var l=new Error(\"Unsupported PKCS#12 contentType.\");throw l.contentType=i.derToOid(c.contentType),l}h.safeBags=y(m,r,n),e.safeContents.push(h)}}(l,m.value,t,r),l},o.toPkcs12Asn1=function(e,t,r,a){(a=a||{}).saltSize=a.saltSize||8,a.count=a.count||2048,a.algorithm=a.algorithm||a.encAlgorithm||\"aes128\",\"useMac\"in a||(a.useMac=!0),\"localKeyId\"in a||(a.localKeyId=null),\"generateLocalKeyId\"in a||(a.generateLocalKeyId=!0);var u,c=a.localKeyId;if(null!==c)c=n.util.hexToBytes(c);else if(a.generateLocalKeyId)if(t){var f=n.util.isArray(t)?t[0]:t;\"string\"==typeof f&&(f=s.certificateFromPem(f)),(B=n.md.sha1.create()).update(i.toDer(s.certificateToAsn1(f)).getBytes()),c=B.digest().getBytes()}else c=n.random.getBytes(20);var l=[];null!==c&&l.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.localKeyId).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,c)])])),\"friendlyName\"in a&&l.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.friendlyName).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.BMPSTRING,!1,a.friendlyName)])])),l.length>0&&(u=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,l));var h=[],p=[];null!==t&&(p=n.util.isArray(t)?t:[t]);for(var d=[],y=0;y<p.length;++y){\"string\"==typeof(t=p[y])&&(t=s.certificateFromPem(t));var m=0===y?u:void 0,g=s.certificateToAsn1(t),v=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.certBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.x509Certificate).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(g).getBytes())])])]),m]);d.push(v)}if(d.length>0){var b=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,d),w=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(b).getBytes())])]);h.push(w)}var _=null;if(null!==e){var k=s.wrapRsaPrivateKey(s.privateKeyToAsn1(e));_=null===r?i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.keyBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[k]),u]):i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.pkcs8ShroudedKeyBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[s.encryptPrivateKeyInfo(k,r,a)]),u]);var S=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[_]),E=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(S).getBytes())])]);h.push(E)}var x,A=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,h);if(a.useMac){var B=n.md.sha1.create(),C=new n.util.ByteBuffer(n.random.getBytes(a.saltSize)),I=a.count,T=(e=o.generateKey(r,C,3,I,20),n.hmac.create());T.start(B,e),T.update(i.toDer(A).getBytes());var D=T.getMac();x=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.sha1).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,\"\")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,D.getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,C.getBytes()),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(I).getBytes())])}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(3).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(A).getBytes())])]),x])},o.generateKey=n.pbe.generatePkcs12Key},function(e,t,r){var n=r(4);r(6),r(127),r(42),function(){if(n.prime)e.exports=n.prime;else{var t=e.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],s=new r(null);s.fromInt(30);var o=function(e,t){return e|t};t.generateProbablePrime=function(e,t,i){\"function\"==typeof t&&(i=t,t={});var s=(t=t||{}).algorithm||\"PRIMEINC\";\"string\"==typeof s&&(s={name:s}),s.options=s.options||{};var o=t.prng||n.random,c={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if(\"PRIMEINC\"===s.name)return function(e,t,i,s){if(\"workers\"in i)return function(e,t,i,s){if(\"undefined\"==typeof Worker)return a(e,t,i,s);var o=u(e,t),c=i.workers,f=i.workLoad||100,l=30*f/8,h=i.workerScript||\"forge/prime.worker.js\";if(-1===c)return n.util.estimateCores(function(e,t){e&&(t=2),c=t-1,p()});function p(){c=Math.max(1,c);for(var n=[],i=0;i<c;++i)n[i]=new Worker(h);for(var i=0;i<c;++i)n[i].addEventListener(\"message\",p);var a=!1;function p(i){if(!a){0;var c=i.data;if(c.found){for(var h=0;h<n.length;++h)n[h].terminate();return a=!0,s(null,new r(c.prime,16))}o.bitLength()>e&&(o=u(e,t));var p=o.toString(16);i.target.postMessage({hex:p,workLoad:f}),o.dAddOffset(l,0)}}}p()}(e,t,i,s);return a(e,t,i,s)}(e,c,s.options,i);throw new Error(\"Invalid prime generation algorithm: \"+s.name)}}function a(e,t,r,s){var o=u(e,t),a=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(o.bitLength());\"millerRabinTests\"in r&&(a=r.millerRabinTests);var c=10;\"maxBlockTime\"in r&&(c=r.maxBlockTime),function e(t,r,s,o,a,c,f){var l=+new Date;do{if(t.bitLength()>r&&(t=u(r,s)),t.isProbablePrime(a))return f(null,t);t.dAddOffset(i[o++%8],0)}while(c<0||+new Date-l<c);n.util.setImmediate(function(){e(t,r,s,o,a,c,f)})}(o,e,t,0,a,c,s)}function u(e,t){var n=new r(e,t),i=e-1;return n.testBit(i)||n.bitwiseTo(r.ONE.shiftLeft(i),o,n),n.dAddOffset(31-n.mod(s).byteValue(),0),n}}()},function(e,t,r){var n=r(4);r(6),r(42),r(95);var i=e.exports=n.pkcs1=n.pkcs1||{};function s(e,t,r){r||(r=n.md.sha1.create());for(var i=\"\",s=Math.ceil(t/r.digestLength),o=0;o<s;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);r.start(),r.update(e+a),i+=r.digest().getBytes()}return i.substring(0,t)}i.encode_rsa_oaep=function(e,t,r){var i,o,a,u;\"string\"==typeof r?(i=r,o=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,o=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),a?a.start():a=n.md.sha1.create(),u||(u=a);var c=Math.ceil(e.n.bitLength()/8),f=c-2*a.digestLength-2;if(t.length>f)throw(m=new Error(\"RSAES-OAEP input message length is too long.\")).length=t.length,m.maxLength=f,m;i||(i=\"\"),a.update(i,\"raw\");for(var l=a.digest(),h=\"\",p=f-t.length,d=0;d<p;d++)h+=\"\\0\";var y=l.getBytes()+h+\"\u0001\"+t;if(o){if(o.length!==a.digestLength){var m;throw(m=new Error(\"Invalid RSAES-OAEP seed. The seed length must match the digest length.\")).seedLength=o.length,m.digestLength=a.digestLength,m}}else o=n.random.getBytes(a.digestLength);var g=s(o,c-a.digestLength-1,u),v=n.util.xorBytes(y,g,y.length),b=s(v,a.digestLength,u);return\"\\0\"+n.util.xorBytes(o,b,o.length)+v},i.decode_rsa_oaep=function(e,t,r){var i,o,a;\"string\"==typeof r?(i=r,o=arguments[3]||void 0):r&&(i=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var u=Math.ceil(e.n.bitLength()/8);if(t.length!==u)throw(g=new Error(\"RSAES-OAEP encoded message length is invalid.\")).length=t.length,g.expectedLength=u,g;if(void 0===o?o=n.md.sha1.create():o.start(),a||(a=o),u<2*o.digestLength+2)throw new Error(\"RSAES-OAEP key is too short for the hash function.\");i||(i=\"\"),o.update(i,\"raw\");for(var c=o.digest().getBytes(),f=t.charAt(0),l=t.substring(1,o.digestLength+1),h=t.substring(1+o.digestLength),p=s(h,o.digestLength,a),d=s(n.util.xorBytes(l,p,l.length),u-o.digestLength-1,a),y=n.util.xorBytes(h,d,h.length),m=y.substring(0,o.digestLength),g=\"\\0\"!==f,v=0;v<o.digestLength;++v)g|=c.charAt(v)!==m.charAt(v);for(var b=1,w=o.digestLength,_=o.digestLength;_<y.length;_++){var k=y.charCodeAt(_);g|=k&(b?65534:0),w+=b&=1&k^1}if(g||1!==y.charCodeAt(w))throw new Error(\"Invalid RSAES-OAEP padding.\");return y.substring(w+1)}},function(e,t,r){var n=r(4);r(6);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5];e.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(e,t){\"string\"==typeof e&&(e=n.util.createBuffer(e)),t=t||128;var r,s=e,o=e.length(),a=t,u=Math.ceil(a/8),c=255>>(7&a);for(r=o;r<128;r++)s.putByte(i[s.at(r-1)+s.at(r-o)&255]);for(s.setAt(128-u,i[s.at(128-u)&c]),r=127-u;r>=0;r--)s.setAt(r,i[s.at(r+1)^s.at(r+u)]);return s};var o=function(e,t,r){var i,o,a,u,c=!1,f=null,l=null,h=null,p=[];for(e=n.rc2.expandKey(e,t),a=0;a<64;a++)p.push(e.getInt16Le());r?(i=function(e){for(a=0;a<4;a++)e[a]+=p[u]+(e[(a+3)%4]&e[(a+2)%4])+(~e[(a+3)%4]&e[(a+1)%4]),e[a]=(t=e[a])<<(r=s[a])&65535|(65535&t)>>16-r,u++;var t,r},o=function(e){for(a=0;a<4;a++)e[a]+=p[63&e[(a+3)%4]]}):(i=function(e){for(a=3;a>=0;a--)e[a]=(65535&(t=e[a]))>>(r=s[a])|t<<16-r&65535,e[a]-=p[u]+(e[(a+3)%4]&e[(a+2)%4])+(~e[(a+3)%4]&e[(a+1)%4]),u--;var t,r},o=function(e){for(a=3;a>=0;a--)e[a]-=p[63&e[(a+3)%4]]});var d=function(e){var t=[];for(a=0;a<4;a++){var n=f.getInt16Le();null!==h&&(r?n^=h.getInt16Le():h.putInt16Le(n)),t.push(65535&n)}u=r?0:63;for(var i=0;i<e.length;i++)for(var s=0;s<e[i][0];s++)e[i][1](t);for(a=0;a<4;a++)null!==h&&(r?h.putInt16Le(t[a]):t[a]^=h.getInt16Le()),l.putInt16Le(t[a])},y=null;return y={start:function(e,t){e&&\"string\"==typeof e&&(e=n.util.createBuffer(e)),c=!1,f=n.util.createBuffer(),l=t||new n.util.createBuffer,h=e,y.output=l},update:function(e){for(c||f.putBuffer(e);f.length()>=8;)d([[5,i],[1,o],[6,i],[1,o],[5,i]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,f,!r);else{var n=8===f.length()?8:8-f.length();f.fillWithByte(n,n)}if(t&&(c=!0,y.update()),!r&&(t=0===f.length()))if(e)t=e(8,l,!r);else{var i=l.length(),s=l.at(i-1);s>i?t=!1:l.truncate(s)}return t}}};n.rc2.startEncrypting=function(e,t,r){var i=n.rc2.createEncryptionCipher(e,128);return i.start(t,r),i},n.rc2.createEncryptionCipher=function(e,t){return o(e,t,!0)},n.rc2.startDecrypting=function(e,t,r){var i=n.rc2.createDecryptionCipher(e,128);return i.start(t,r),i},n.rc2.createDecryptionCipher=function(e,t){return o(e,t,!1)}},function(e,t,r){var n=r(4);r(6);var i=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions[\"node-webkit\"]||(i=r(24)),(e.exports=n.prng=n.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:\"\"},r=e.md,s=new Array(32),o=0;o<32;++o)s[o]=r.create();function a(){if(t.pools[0].messageLength>=32)return u();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),u()}function u(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var r=1,n=0;n<32;++n)t.reseeds%r==0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start()),r<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var i=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(i),t.generated=0}function c(e){var t=null;if(\"undefined\"!=typeof window){var r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(t=function(e){return r.getRandomValues(e)})}var i=n.util.createBuffer();if(t)for(;i.length()<e;){var s=Math.max(1,Math.min(e-i.length(),65536)/4),o=new Uint32Array(Math.floor(s));try{t(o);for(var a=0;a<o.length;++a)i.putInt32(o[a])}catch(e){if(!(\"undefined\"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(i.length()<e)for(var u,c,f,l=Math.floor(65536*Math.random());i.length()<e;){c=16807*(65535&l),c+=(32767&(u=16807*(l>>16)))<<16,l=4294967295&(c=(2147483647&(c+=u>>15))+(c>>31));for(a=0;a<3;++a)f=l>>>(a<<3),f^=Math.floor(256*Math.random()),i.putByte(String.fromCharCode(255&f))}return i.getBytes(e)}return t.pools=s,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var i=t.plugin.cipher,s=t.plugin.increment,o=t.plugin.formatKey,a=t.plugin.formatSeed,c=n.util.createBuffer();t.key=null,function f(l){if(l)return r(l);if(c.length()>=e)return r(null,c.getBytes(e));t.generated>1048575&&(t.key=null);if(null===t.key)return n.util.nextTick(function(){!function(e){if(t.pools[0].messageLength>=32)return u(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,function(r,n){if(r)return e(r);t.collect(n),u(),e()})}(f)});var h=i(t.key,t.seed);t.generated+=h.length;c.putBytes(h);t.key=o(i(t.key,s(t.seed)));t.seed=a(i(t.key,t.seed));n.util.setImmediate(f)}()},t.generateSync=function(e){var r=t.plugin.cipher,i=t.plugin.increment,s=t.plugin.formatKey,o=t.plugin.formatSeed;t.key=null;for(var u=n.util.createBuffer();u.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&a();var c=r(t.key,t.seed);t.generated+=c.length,u.putBytes(c),t.key=s(r(t.key,i(t.seed))),t.seed=o(r(t.key,t.seed))}return u.getBytes(e)},i?(t.seedFile=function(e,t){i.randomBytes(e,function(e,r){if(e)return t(e);t(null,r.toString())})},t.seedFileSync=function(e){return i.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,c(e))}catch(e){t(e)}},t.seedFileSync=c),t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n=\"\",i=0;i<r;i+=8)n+=String.fromCharCode(e>>i&255);t.collect(n)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){self.addEventListener(\"message\",function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener(\"message\",e),t(n.forge.prng.err,n.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener(\"message\",function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})})})}},t}},function(e,t,r){var n=r(4);r(57),r(6);var i=e.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){o||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var e=null,t=n.util.createBuffer(),r=new Array(64),i={algorithm:\"sha256\",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(s,o){\"utf8\"===o&&(s=n.util.encodeUtf8(s));var a=s.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=i.fullMessageLength.length-1;c>=0;--c)i.fullMessageLength[c]+=a[1],a[1]=a[0]+(i.fullMessageLength[c]/4294967296>>>0),i.fullMessageLength[c]=i.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(s),u(e,r,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var a,c=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-c));for(var f=8*i.fullMessageLength[0],l=0;l<i.fullMessageLength.length-1;++l)f+=(a=8*i.fullMessageLength[l+1])/4294967296>>>0,o.putInt32(f>>>0),f=a>>>0;o.putInt32(f);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};u(h,r,o);var p=n.util.createBuffer();return p.putInt32(h.h0),p.putInt32(h.h1),p.putInt32(h.h2),p.putInt32(h.h3),p.putInt32(h.h4),p.putInt32(h.h5),p.putInt32(h.h6),p.putInt32(h.h7),p},i};var s=null,o=!1,a=null;function u(e,t,r){for(var n,i,s,o,u,c,f,l,h,p,d,y,m,g=r.length();g>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=((n=t[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=t[u-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[u]=n+t[u-7]+i+t[u-16]|0;for(c=e.h0,f=e.h1,l=e.h2,h=e.h3,p=e.h4,d=e.h5,y=e.h6,m=e.h7,u=0;u<64;++u)s=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),o=c&f|l&(c^f),n=m+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(y^p&(d^y))+a[u]+t[u],m=y,y=d,d=p,p=h+n>>>0,h=l,l=f,f=c,c=n+(i=s+o)>>>0;e.h0=e.h0+c|0,e.h1=e.h1+f|0,e.h2=e.h2+l|0,e.h3=e.h3+h|0,e.h4=e.h4+p|0,e.h5=e.h5+d|0,e.h6=e.h6+y|0,e.h7=e.h7+m|0,g-=64}}},function(e,t,r){var n=r(4);if(r(67),r(58),r(129),r(57),r(66),r(181),r(83),r(42),r(320),r(128),r(6),void 0===i)var i=n.jsbn.BigInteger;var s=n.asn1,o=n.pki=n.pki||{};e.exports=o.pbe=n.pbe=n.pbe||{};var a=o.oids,u={name:\"EncryptedPrivateKeyInfo\",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:\"EncryptedPrivateKeyInfo.encryptionAlgorithm\",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:\"AlgorithmIdentifier.algorithm\",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:\"encryptionOid\"},{name:\"AlgorithmIdentifier.parameters\",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:\"encryptionParams\"}]},{name:\"EncryptedPrivateKeyInfo.encryptedData\",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:\"encryptedData\"}]},c={name:\"PBES2Algorithms\",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:\"PBES2Algorithms.keyDerivationFunc\",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:\"PBES2Algorithms.keyDerivationFunc.oid\",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:\"kdfOid\"},{name:\"PBES2Algorithms.params\",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:\"PBES2Algorithms.params.salt\",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:\"kdfSalt\"},{name:\"PBES2Algorithms.params.iterationCount\",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:\"kdfIterationCount\"},{name:\"PBES2Algorithms.params.keyLength\",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:\"keyLength\"},{name:\"PBES2Algorithms.params.prf\",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:\"PBES2Algorithms.params.prf.algorithm\",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:\"prfOid\"}]}]}]},{name:\"PBES2Algorithms.encryptionScheme\",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:\"PBES2Algorithms.encryptionScheme.oid\",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:\"encOid\"},{name:\"PBES2Algorithms.encryptionScheme.iv\",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:\"encIv\"}]}]},f={name:\"pkcs-12PbeParams\",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:\"pkcs-12PbeParams.salt\",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:\"salt\"},{name:\"pkcs-12PbeParams.iterations\",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:\"iterations\"}]};function l(e,t){return e.start().update(t).digest().getBytes()}function h(e){var t;if(e){if(!(t=o.oids[s.derToOid(e)])){var r=new Error(\"Unsupported PRF OID.\");throw r.oid=e,r.supported=[\"hmacWithSHA1\",\"hmacWithSHA224\",\"hmacWithSHA256\",\"hmacWithSHA384\",\"hmacWithSHA512\"],r}}else t=\"hmacWithSHA1\";return p(t)}function p(e){var t=n.md;switch(e){case\"hmacWithSHA224\":t=n.md.sha512;case\"hmacWithSHA1\":case\"hmacWithSHA256\":case\"hmacWithSHA384\":case\"hmacWithSHA512\":e=e.substr(8).toLowerCase();break;default:var r=new Error(\"Unsupported PRF algorithm.\");throw r.algorithm=e,r.supported=[\"hmacWithSHA1\",\"hmacWithSHA224\",\"hmacWithSHA256\",\"hmacWithSHA384\",\"hmacWithSHA512\"],r}if(!(t&&e in t))throw new Error(\"Unknown hash algorithm: \"+e);return t[e].create()}o.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||\"aes128\",r.prfAlgorithm=r.prfAlgorithm||\"sha1\";var i,u,c,f=n.random.getBytesSync(r.saltSize),l=r.count,h=s.integerToDer(l);if(0===r.algorithm.indexOf(\"aes\")||\"des\"===r.algorithm){var d,y,m;switch(r.algorithm){case\"aes128\":i=16,d=16,y=a[\"aes128-CBC\"],m=n.aes.createEncryptionCipher;break;case\"aes192\":i=24,d=16,y=a[\"aes192-CBC\"],m=n.aes.createEncryptionCipher;break;case\"aes256\":i=32,d=16,y=a[\"aes256-CBC\"],m=n.aes.createEncryptionCipher;break;case\"des\":i=8,d=8,y=a.desCBC,m=n.des.createEncryptionCipher;break;default:throw(k=new Error(\"Cannot encrypt private key. Unknown encryption algorithm.\")).algorithm=r.algorithm,k}var g=\"hmacWith\"+r.prfAlgorithm.toUpperCase(),v=p(g),b=n.pkcs5.pbkdf2(t,f,l,i,v),w=n.random.getBytesSync(d);(S=m(b)).start(w),S.update(s.toDer(e)),S.finish(),c=S.output.getBytes();var _=function(e,t,r,i){var a=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,t.getBytes())]);\"hmacWithSHA1\"!==i&&a.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids[i]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,\"\")]));return a}(f,h,i,g);u=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBKDF2).getBytes()),_]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(y).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,w)])])])}else{var k;if(\"3des\"!==r.algorithm)throw(k=new Error(\"Cannot encrypt private key. Unknown encryption algorithm.\")).algorithm=r.algorithm,k;i=24;var S,E=new n.util.ByteBuffer(f);b=o.pbe.generatePkcs12Key(t,E,1,l,i),w=o.pbe.generatePkcs12Key(t,E,2,l,i);(S=n.des.createEncryptionCipher(b)).start(w),S.update(s.toDer(e)),S.finish(),c=S.output.getBytes(),u=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a[\"pbeWithSHAAnd3-KeyTripleDES-CBC\"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,f),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,h.getBytes())])])}return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[u,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,c)])},o.decryptPrivateKeyInfo=function(e,t){var r=null,i={},a=[];if(!s.validate(e,u,i,a)){var c=new Error(\"Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.\");throw c.errors=a,c}var f=s.derToOid(i.encryptionOid),l=o.pbe.getCipher(f,i.encryptionParams,t),h=n.util.createBuffer(i.encryptedData);return l.update(h),l.finish()&&(r=s.fromDer(l.output)),r},o.encryptedPrivateKeyToPem=function(e,t){var r={type:\"ENCRYPTED PRIVATE KEY\",body:s.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})},o.encryptedPrivateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if(\"ENCRYPTED PRIVATE KEY\"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is \"ENCRYPTED PRIVATE KEY\".');throw r.headerType=t.type,r}if(t.procType&&\"ENCRYPTED\"===t.procType.type)throw new Error(\"Could not convert encrypted private key from PEM; PEM is encrypted.\");return s.fromDer(t.body)},o.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var i=o.wrapRsaPrivateKey(o.privateKeyToAsn1(e));return i=o.encryptPrivateKeyInfo(i,t,r),o.encryptedPrivateKeyToPem(i)}var a,u,c,f;switch(r.algorithm){case\"aes128\":a=\"AES-128-CBC\",c=16,u=n.random.getBytesSync(16),f=n.aes.createEncryptionCipher;break;case\"aes192\":a=\"AES-192-CBC\",c=24,u=n.random.getBytesSync(16),f=n.aes.createEncryptionCipher;break;case\"aes256\":a=\"AES-256-CBC\",c=32,u=n.random.getBytesSync(16),f=n.aes.createEncryptionCipher;break;case\"3des\":a=\"DES-EDE3-CBC\",c=24,u=n.random.getBytesSync(8),f=n.des.createEncryptionCipher;break;case\"des\":a=\"DES-CBC\",c=8,u=n.random.getBytesSync(8),f=n.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm \"'+r.algorithm+'\".');throw l.algorithm=r.algorithm,l}var h=f(n.pbe.opensslDeriveBytes(t,u.substr(0,8),c));h.start(u),h.update(s.toDer(o.privateKeyToAsn1(e))),h.finish();var p={type:\"RSA PRIVATE KEY\",procType:{version:\"4\",type:\"ENCRYPTED\"},dekInfo:{algorithm:a,parameters:n.util.bytesToHex(u).toUpperCase()},body:h.output.getBytes()};return n.pem.encode(p)},o.decryptRsaPrivateKey=function(e,t){var r=null,i=n.pem.decode(e)[0];if(\"ENCRYPTED PRIVATE KEY\"!==i.type&&\"PRIVATE KEY\"!==i.type&&\"RSA PRIVATE KEY\"!==i.type)throw(c=new Error('Could not convert private key from PEM; PEM header type is not \"ENCRYPTED PRIVATE KEY\", \"PRIVATE KEY\", or \"RSA PRIVATE KEY\".')).headerType=c,c;if(i.procType&&\"ENCRYPTED\"===i.procType.type){var a,u;switch(i.dekInfo.algorithm){case\"DES-CBC\":a=8,u=n.des.createDecryptionCipher;break;case\"DES-EDE3-CBC\":a=24,u=n.des.createDecryptionCipher;break;case\"AES-128-CBC\":a=16,u=n.aes.createDecryptionCipher;break;case\"AES-192-CBC\":a=24,u=n.aes.createDecryptionCipher;break;case\"AES-256-CBC\":a=32,u=n.aes.createDecryptionCipher;break;case\"RC2-40-CBC\":a=5,u=function(e){return n.rc2.createDecryptionCipher(e,40)};break;case\"RC2-64-CBC\":a=8,u=function(e){return n.rc2.createDecryptionCipher(e,64)};break;case\"RC2-128-CBC\":a=16,u=function(e){return n.rc2.createDecryptionCipher(e,128)};break;default:var c;throw(c=new Error('Could not decrypt private key; unsupported encryption algorithm \"'+i.dekInfo.algorithm+'\".')).algorithm=i.dekInfo.algorithm,c}var f=n.util.hexToBytes(i.dekInfo.parameters),l=u(n.pbe.opensslDeriveBytes(t,f.substr(0,8),a));if(l.start(f),l.update(n.util.createBuffer(i.body)),!l.finish())return r;r=l.output.getBytes()}else r=i.body;return null!==(r=\"ENCRYPTED PRIVATE KEY\"===i.type?o.decryptPrivateKeyInfo(s.fromDer(r),t):s.fromDer(r))&&(r=o.privateKeyFromAsn1(r)),r},o.pbe.generatePkcs12Key=function(e,t,r,i,s,o){var a,u;if(void 0===o||null===o){if(!(\"sha1\"in n.md))throw new Error('\"sha1\" hash algorithm unavailable.');o=n.md.sha1.create()}var c=o.digestLength,f=o.blockLength,l=new n.util.ByteBuffer,h=new n.util.ByteBuffer;if(null!==e&&void 0!==e){for(u=0;u<e.length;u++)h.putInt16(e.charCodeAt(u));h.putInt16(0)}var p=h.length(),d=t.length(),y=new n.util.ByteBuffer;y.fillWithByte(r,f);var m=f*Math.ceil(d/f),g=new n.util.ByteBuffer;for(u=0;u<m;u++)g.putByte(t.at(u%d));var v=f*Math.ceil(p/f),b=new n.util.ByteBuffer;for(u=0;u<v;u++)b.putByte(h.at(u%p));var w=g;w.putBuffer(b);for(var _=Math.ceil(s/c),k=1;k<=_;k++){var S=new n.util.ByteBuffer;S.putBytes(y.bytes()),S.putBytes(w.bytes());for(var E=0;E<i;E++)o.start(),o.update(S.getBytes()),S=o.digest();var x=new n.util.ByteBuffer;for(u=0;u<f;u++)x.putByte(S.at(u%c));var A=Math.ceil(d/f)+Math.ceil(p/f),B=new n.util.ByteBuffer;for(a=0;a<A;a++){var C=new n.util.ByteBuffer(w.getBytes(f)),I=511;for(u=x.length()-1;u>=0;u--)I>>=8,I+=x.at(u)+C.at(u),C.setAt(u,255&I);B.putBuffer(C)}w=B,l.putBuffer(S)}return l.truncate(l.length()-s),l},o.pbe.getCipher=function(e,t,r){switch(e){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(e,t,r);case o.oids[\"pbeWithSHAAnd3-KeyTripleDES-CBC\"]:case o.oids[\"pbewithSHAAnd40BitRC2-CBC\"]:return o.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error(\"Cannot read encrypted PBE data block. Unsupported OID.\");throw n.oid=e,n.supportedOids=[\"pkcs5PBES2\",\"pbeWithSHAAnd3-KeyTripleDES-CBC\",\"pbewithSHAAnd40BitRC2-CBC\"],n}},o.pbe.getCipherForPBES2=function(e,t,r){var i,a={},u=[];if(!s.validate(t,c,a,u))throw(i=new Error(\"Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.\")).errors=u,i;if((e=s.derToOid(a.kdfOid))!==o.oids.pkcs5PBKDF2)throw(i=new Error(\"Cannot read encrypted private key. Unsupported key derivation function OID.\")).oid=e,i.supportedOids=[\"pkcs5PBKDF2\"],i;if((e=s.derToOid(a.encOid))!==o.oids[\"aes128-CBC\"]&&e!==o.oids[\"aes192-CBC\"]&&e!==o.oids[\"aes256-CBC\"]&&e!==o.oids[\"des-EDE3-CBC\"]&&e!==o.oids.desCBC)throw(i=new Error(\"Cannot read encrypted private key. Unsupported encryption scheme OID.\")).oid=e,i.supportedOids=[\"aes128-CBC\",\"aes192-CBC\",\"aes256-CBC\",\"des-EDE3-CBC\",\"desCBC\"],i;var f,l,p=a.kdfSalt,d=n.util.createBuffer(a.kdfIterationCount);switch(d=d.getInt(d.length()<<3),o.oids[e]){case\"aes128-CBC\":f=16,l=n.aes.createDecryptionCipher;break;case\"aes192-CBC\":f=24,l=n.aes.createDecryptionCipher;break;case\"aes256-CBC\":f=32,l=n.aes.createDecryptionCipher;break;case\"des-EDE3-CBC\":f=24,l=n.des.createDecryptionCipher;break;case\"desCBC\":f=8,l=n.des.createDecryptionCipher}var y=h(a.prfOid),m=n.pkcs5.pbkdf2(r,p,d,f,y),g=a.encIv,v=l(m);return v.start(g),v},o.pbe.getCipherForPKCS12PBE=function(e,t,r){var i={},a=[];if(!s.validate(t,f,i,a))throw(y=new Error(\"Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.\")).errors=a,y;var u,c,l,p=n.util.createBuffer(i.salt),d=n.util.createBuffer(i.iterations);switch(d=d.getInt(d.length()<<3),e){case o.oids[\"pbeWithSHAAnd3-KeyTripleDES-CBC\"]:u=24,c=8,l=n.des.startDecrypting;break;case o.oids[\"pbewithSHAAnd40BitRC2-CBC\"]:u=5,c=8,l=function(e,t){var r=n.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var y;throw(y=new Error(\"Cannot read PKCS #12 PBE data block. Unsupported OID.\")).oid=e,y}var m=h(i.prfOid),g=o.pbe.generatePkcs12Key(r,p,1,d,u,m);return m.start(),l(g,o.pbe.generatePkcs12Key(r,p,2,d,c,m))},o.pbe.opensslDeriveBytes=function(e,t,r,i){if(void 0===i||null===i){if(!(\"md5\"in n.md))throw new Error('\"md5\" hash algorithm unavailable.');i=n.md.md5.create()}null===t&&(t=\"\");for(var s=[l(i,e+t)],o=16,a=1;o<r;++a,o+=16)s.push(l(i,s[a-1]+e+t));return s.join(\"\").substr(0,r)}},function(e,t,r){var n=r(4);r(58),r(66),r(323),r(83),r(181),r(317),r(179),r(128),r(6),r(180);var i=n.asn1,s=e.exports=n.pki=n.pki||{};s.pemToDer=function(e){var t=n.pem.decode(e)[0];if(t.procType&&\"ENCRYPTED\"===t.procType.type)throw new Error(\"Could not convert PEM to DER; PEM is encrypted.\");return n.util.createBuffer(t.body)},s.privateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if(\"PRIVATE KEY\"!==t.type&&\"RSA PRIVATE KEY\"!==t.type){var r=new Error('Could not convert private key from PEM; PEM header type is not \"PRIVATE KEY\" or \"RSA PRIVATE KEY\".');throw r.headerType=t.type,r}if(t.procType&&\"ENCRYPTED\"===t.procType.type)throw new Error(\"Could not convert private key from PEM; PEM is encrypted.\");var o=i.fromDer(t.body);return s.privateKeyFromAsn1(o)},s.privateKeyToPem=function(e,t){var r={type:\"RSA PRIVATE KEY\",body:i.toDer(s.privateKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.privateKeyInfoToPem=function(e,t){var r={type:\"PRIVATE KEY\",body:i.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})}},function(e,t,r){var n=r(4);r(58),r(96),r(182),r(83),r(324),r(42),r(95),r(6);var i=function(e,t,r,i){var s=n.util.createBuffer(),o=e.length>>1,a=o+(1&e.length),u=e.substr(0,a),c=e.substr(o,a),f=n.util.createBuffer(),l=n.hmac.create();r=t+r;var h=Math.ceil(i/16),p=Math.ceil(i/20);l.start(\"MD5\",u);var d=n.util.createBuffer();f.putBytes(r);for(var y=0;y<h;++y)l.start(null,null),l.update(f.getBytes()),f.putBuffer(l.digest()),l.start(null,null),l.update(f.bytes()+r),d.putBuffer(l.digest());l.start(\"SHA1\",c);var m=n.util.createBuffer();f.clear(),f.putBytes(r);for(y=0;y<p;++y)l.start(null,null),l.update(f.getBytes()),f.putBuffer(l.digest()),l.start(null,null),l.update(f.bytes()+r),m.putBuffer(l.digest());return s.putBytes(n.util.xorBytes(d.getBytes(),m.getBytes(),i)),s},s=function(e,t,r){var i=!1;try{var s=e.deflate(t.fragment.getBytes());t.fragment=n.util.createBuffer(s),t.length=s.length,i=!0}catch(e){}return i},o=function(e,t,r){var i=!1;try{var s=e.inflate(t.fragment.getBytes());t.fragment=n.util.createBuffer(s),t.length=s.length,i=!0}catch(e){}return i},a=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32()}return n.util.createBuffer(e.getBytes(r))},u=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},c={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};c.SupportedVersions=[c.Versions.TLS_1_1,c.Versions.TLS_1_0],c.Version=c.SupportedVersions[0],c.MaxFragment=15360,c.ConnectionEnd={server:0,client:1},c.PRFAlgorithm={tls_prf_sha256:0},c.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},c.CipherType={stream:0,block:1,aead:2},c.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},c.CompressionMethod={none:0,deflate:1},c.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},c.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},c.Alert={},c.Alert.Level={warning:1,fatal:2},c.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},c.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},c.CipherSuites={},c.getCipherSuite=function(e){var t=null;for(var r in c.CipherSuites){var n=c.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t},c.handleUnexpected=function(e,t){!e.open&&e.entity===c.ConnectionEnd.client||e.error(e,{message:\"Unexpected message. Received TLS record out of order.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unexpected_message}})},c.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(c.queue(e,c.createAlert(e,{level:c.Alert.Level.warning,description:c.Alert.Description.no_renegotiation})),c.flush(e)),e.process()},c.parseHelloMessage=function(e,t,r){var i=null,s=e.entity===c.ConnectionEnd.client;if(r<38)e.error(e,{message:s?\"Invalid ServerHello message. Message too short.\":\"Invalid ClientHello message. Message too short.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});else{var o=t.fragment,u=o.length();if(i={version:{major:o.getByte(),minor:o.getByte()},random:n.util.createBuffer(o.getBytes(32)),session_id:a(o,1),extensions:[]},s?(i.cipher_suite=o.getBytes(2),i.compression_method=o.getByte()):(i.cipher_suites=a(o,2),i.compression_methods=a(o,1)),(u=r-(u-o.length()))>0){for(var f=a(o,2);f.length()>0;)i.extensions.push({type:[f.getByte(),f.getByte()],data:a(f,2)});if(!s)for(var l=0;l<i.extensions.length;++l){var h=i.extensions[l];if(0===h.type[0]&&0===h.type[1])for(var p=a(h.data,2);p.length()>0;){if(0!==p.getByte())break;e.session.extensions.server_name.serverNameList.push(a(p,2).getBytes())}}}if(e.session.version&&(i.version.major!==e.session.version.major||i.version.minor!==e.session.version.minor))return e.error(e,{message:\"TLS version change is disallowed during renegotiation.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}});if(s)e.session.cipherSuite=c.getCipherSuite(i.cipher_suite);else for(var d=n.util.createBuffer(i.cipher_suites.bytes());d.length()>0&&(e.session.cipherSuite=c.getCipherSuite(d.getBytes(2)),null===e.session.cipherSuite););if(null===e.session.cipherSuite)return e.error(e,{message:\"No cipher suites in common.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.handshake_failure},cipherSuite:n.util.bytesToHex(i.cipher_suite)});e.session.compressionMethod=s?i.compression_method:c.CompressionMethod.none}return i},c.createSecurityParameters=function(e,t){var r=e.entity===c.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,s=r?n:c.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:c.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:s}},c.handleServerHello=function(e,t,r){var n=c.parseHelloMessage(e,t,r);if(!e.fail){if(!(n.version.minor<=e.version.minor))return e.error(e,{message:\"Incompatible TLS version.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}});e.version.minor=n.version.minor,e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=d,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=f,e.session.resuming=!1,c.createSecurityParameters(e,n)),e.session.id=i,e.process()}},c.handleClientHello=function(e,t,r){var i=c.parseHelloMessage(e,t,r);if(!e.fail){var s=i.session_id.bytes(),o=null;if(e.sessionCache&&(null===(o=e.sessionCache.getSession(s))?s=\"\":(o.version.major!==i.version.major||o.version.minor>i.version.minor)&&(o=null,s=\"\")),0===s.length&&(s=n.random.getBytes(32)),e.session.id=s,e.session.clientHelloVersion=i.version,e.session.sp={},o)e.version=e.session.version=o.version,e.session.sp=o.sp;else{for(var a,u=1;u<c.SupportedVersions.length&&!((a=c.SupportedVersions[u]).minor<=i.version.minor);++u);e.version={major:a.major,minor:a.minor},e.session.version=e.version}null!==o?(e.expect=_,e.session.resuming=!0,e.session.sp.client_random=i.random.bytes()):(e.expect=!1!==e.verifyClient?v:b,e.session.resuming=!1,c.createSecurityParameters(e,i)),e.open=!0,c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createServerHello(e)})),e.session.resuming?(c.queue(e,c.createRecord(e,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),e.state.pending=c.createConnectionState(e),e.state.current.write=e.state.pending.write,c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createFinished(e)}))):(c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createCertificate(e)})),e.fail||(c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createServerKeyExchange(e)})),!1!==e.verifyClient&&c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createCertificateRequest(e)})),c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createServerHelloDone(e)})))),c.flush(e),e.process()}},c.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:\"Invalid Certificate message. Message too short.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var i,s,o=t.fragment,u={certificate_list:a(o,3)},f=[];try{for(;u.certificate_list.length()>0;)i=a(u.certificate_list,3),s=n.asn1.fromDer(i),i=n.pki.certificateFromAsn1(s,!0),f.push(i)}catch(t){return e.error(e,{message:\"Could not parse certificate list.\",cause:t,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate}})}var h=e.entity===c.ConnectionEnd.client;!h&&!0!==e.verifyClient||0!==f.length?0===f.length?e.expect=h?l:b:(h?e.session.serverCertificate=f[0]:e.session.clientCertificate=f[0],c.verifyCertificateChain(e,f)&&(e.expect=h?l:b)):e.error(e,{message:h?\"No server certificate provided.\":\"No client certificate provided.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}}),e.process()},c.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:\"Invalid key parameters. Only RSA is supported.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unsupported_certificate}});e.expect=h,e.process()},c.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:\"Invalid key parameters. Only RSA is supported.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unsupported_certificate}});var i=t.fragment,s={enc_pre_master_secret:a(i,2).getBytes()},o=null;if(e.getPrivateKey)try{o=e.getPrivateKey(e,e.session.serverCertificate),o=n.pki.privateKeyFromPem(o)}catch(t){e.error(e,{message:\"Could not get private key.\",cause:t,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}})}if(null===o)return e.error(e,{message:\"No private key set.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}});try{var u=e.session.sp;u.pre_master_secret=o.decrypt(s.enc_pre_master_secret);var f=e.session.clientHelloVersion;if(f.major!==u.pre_master_secret.charCodeAt(0)||f.minor!==u.pre_master_secret.charCodeAt(1))throw new Error(\"TLS version rollback attack detected.\")}catch(e){u.pre_master_secret=n.random.getBytes(48)}e.expect=_,null!==e.session.clientCertificate&&(e.expect=w),e.process()},c.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:\"Invalid CertificateRequest. Message too short.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:a(n,1),certificate_authorities:a(n,2)};e.session.certificateRequest=i,e.expect=p,e.process()},c.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:\"Invalid CertificateVerify. Message too short.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var i=t.fragment;i.read-=4;var s=i.bytes();i.read+=4;var o={signature:a(i,2).getBytes()},u=n.util.createBuffer();u.putBuffer(e.session.md5.digest()),u.putBuffer(e.session.sha1.digest()),u=u.getBytes();try{if(!e.session.clientCertificate.publicKey.verify(u,o.signature,\"NONE\"))throw new Error(\"CertificateVerify signature does not match.\");e.session.md5.update(s),e.session.sha1.update(s)}catch(t){return e.error(e,{message:\"Bad signature in CertificateVerify.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.handshake_failure}})}e.expect=_,e.process()},c.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:\"Invalid ServerHelloDone message. Invalid length.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.record_overflow}});if(null===e.serverCertificate){var i={message:\"No server certificate provided. Not enough security.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.insufficient_security}},s=e.verify(e,i.alert.description,0,[]);if(!0!==s)return(s||0===s)&&(\"object\"!=typeof s||n.util.isArray(s)?\"number\"==typeof s&&(i.alert.description=s):(s.message&&(i.message=s.message),s.alert&&(i.alert.description=s.alert))),e.error(e,i)}null!==e.session.certificateRequest&&(t=c.createRecord(e,{type:c.ContentType.handshake,data:c.createCertificate(e)}),c.queue(e,t)),t=c.createRecord(e,{type:c.ContentType.handshake,data:c.createClientKeyExchange(e)}),c.queue(e,t),e.expect=g;var o=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createCertificateVerify(e,t)})),c.queue(e,c.createRecord(e,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),e.state.pending=c.createConnectionState(e),e.state.current.write=e.state.pending.write,c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createFinished(e)})),e.expect=d,c.flush(e),e.process()};if(null===e.session.certificateRequest||null===e.session.clientCertificate)return o(e,null);c.getClientSignature(e,o)},c.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:\"Invalid ChangeCipherSpec message received.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var r=e.entity===c.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=c.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?y:k,e.process()},c.handleFinished=function(e,t,r){var s=t.fragment;s.read-=4;var o=s.bytes();s.read+=4;var a=t.fragment.getBytes();(s=n.util.createBuffer()).putBuffer(e.session.md5.digest()),s.putBuffer(e.session.sha1.digest());var u=e.entity===c.ConnectionEnd.client,f=u?\"server finished\":\"client finished\",l=e.session.sp;if((s=i(l.master_secret,f,s.getBytes(),12)).getBytes()!==a)return e.error(e,{message:\"Invalid verify_data in Finished message.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.decrypt_error}});e.session.md5.update(o),e.session.sha1.update(o),(e.session.resuming&&u||!e.session.resuming&&!u)&&(c.queue(e,c.createRecord(e,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createFinished(e)}))),e.expect=u?m:S,e.handshaking=!1,++e.handshakes,e.peerCertificate=u?e.session.serverCertificate:e.session.clientCertificate,c.flush(e),e.isConnected=!0,e.connected(e),e.process()},c.handleAlert=function(e,t){var r,n=t.fragment,i={level:n.getByte(),description:n.getByte()};switch(i.description){case c.Alert.Description.close_notify:r=\"Connection closed.\";break;case c.Alert.Description.unexpected_message:r=\"Unexpected message.\";break;case c.Alert.Description.bad_record_mac:r=\"Bad record MAC.\";break;case c.Alert.Description.decryption_failed:r=\"Decryption failed.\";break;case c.Alert.Description.record_overflow:r=\"Record overflow.\";break;case c.Alert.Description.decompression_failure:r=\"Decompression failed.\";break;case c.Alert.Description.handshake_failure:r=\"Handshake failure.\";break;case c.Alert.Description.bad_certificate:r=\"Bad certificate.\";break;case c.Alert.Description.unsupported_certificate:r=\"Unsupported certificate.\";break;case c.Alert.Description.certificate_revoked:r=\"Certificate revoked.\";break;case c.Alert.Description.certificate_expired:r=\"Certificate expired.\";break;case c.Alert.Description.certificate_unknown:r=\"Certificate unknown.\";break;case c.Alert.Description.illegal_parameter:r=\"Illegal parameter.\";break;case c.Alert.Description.unknown_ca:r=\"Unknown certificate authority.\";break;case c.Alert.Description.access_denied:r=\"Access denied.\";break;case c.Alert.Description.decode_error:r=\"Decode error.\";break;case c.Alert.Description.decrypt_error:r=\"Decrypt error.\";break;case c.Alert.Description.export_restriction:r=\"Export restriction.\";break;case c.Alert.Description.protocol_version:r=\"Unsupported protocol version.\";break;case c.Alert.Description.insufficient_security:r=\"Insufficient security.\";break;case c.Alert.Description.internal_error:r=\"Internal error.\";break;case c.Alert.Description.user_canceled:r=\"User canceled.\";break;case c.Alert.Description.no_renegotiation:r=\"Renegotiation not supported.\";break;default:r=\"Unknown error.\"}if(i.description===c.Alert.Description.close_notify)return e.close();e.error(e,{message:r,send:!1,origin:e.entity===c.ConnectionEnd.client?\"server\":\"client\",alert:i}),e.process()},c.handleHandshake=function(e,t){var r=t.fragment,i=r.getByte(),s=r.getInt24();if(s>r.length())return e.fragmented=t,t.fragment=n.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var o=r.bytes(s+4);r.read+=4,i in F[e.entity][e.expect]?(e.entity!==c.ConnectionEnd.server||e.open||e.fail||(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:n.md.md5.create(),sha1:n.md.sha1.create()}),i!==c.HandshakeType.hello_request&&i!==c.HandshakeType.certificate_verify&&i!==c.HandshakeType.finished&&(e.session.md5.update(o),e.session.sha1.update(o)),F[e.entity][e.expect][i](e,t,s)):c.handleUnexpected(e,t)},c.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},c.handleHeartbeat=function(e,t){var r=t.fragment,i=r.getByte(),s=r.getInt16(),o=r.getBytes(s);if(i===c.HeartbeatMessageType.heartbeat_request){if(e.handshaking||s>o.length)return e.process();c.queue(e,c.createRecord(e,{type:c.ContentType.heartbeat,data:c.createHeartbeat(c.HeartbeatMessageType.heartbeat_response,o)})),c.flush(e)}else if(i===c.HeartbeatMessageType.heartbeat_response){if(o!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,n.util.createBuffer(o))}e.process()};var f=1,l=2,h=3,p=4,d=5,y=6,m=7,g=8,v=1,b=2,w=3,_=4,k=5,S=6,E=c.handleUnexpected,x=c.handleChangeCipherSpec,A=c.handleAlert,B=c.handleHandshake,C=c.handleApplicationData,I=c.handleHeartbeat,T=[];T[c.ConnectionEnd.client]=[[E,A,B,E,I],[E,A,B,E,I],[E,A,B,E,I],[E,A,B,E,I],[E,A,B,E,I],[x,A,E,E,I],[E,A,B,E,I],[E,A,B,C,I],[E,A,B,E,I]],T[c.ConnectionEnd.server]=[[E,A,B,E,I],[E,A,B,E,I],[E,A,B,E,I],[E,A,B,E,I],[x,A,E,E,I],[E,A,B,E,I],[E,A,B,C,I],[E,A,B,E,I]];var D=c.handleHelloRequest,P=c.handleServerHello,O=c.handleCertificate,N=c.handleServerKeyExchange,U=c.handleCertificateRequest,R=c.handleServerHelloDone,L=c.handleFinished,F=[];F[c.ConnectionEnd.client]=[[E,E,P,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[D,E,E,E,E,E,E,E,E,E,E,O,N,U,R,E,E,E,E,E,E],[D,E,E,E,E,E,E,E,E,E,E,E,N,U,R,E,E,E,E,E,E],[D,E,E,E,E,E,E,E,E,E,E,E,E,U,R,E,E,E,E,E,E],[D,E,E,E,E,E,E,E,E,E,E,E,E,E,R,E,E,E,E,E,E],[D,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[D,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,L],[D,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[D,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]];var j=c.handleClientHello,M=c.handleClientKeyExchange,K=c.handleCertificateVerify;F[c.ConnectionEnd.server]=[[E,j,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,O,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,M,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,K,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,L],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]],c.generateKeys=function(e,t){var r=i,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,\"master secret\",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var s=2*t.mac_key_length+2*t.enc_key_length,o=e.version.major===c.Versions.TLS_1_0.major&&e.version.minor===c.Versions.TLS_1_0.minor;o&&(s+=2*t.fixed_iv_length);var a=r(t.master_secret,\"key expansion\",n,s),u={client_write_MAC_key:a.getBytes(t.mac_key_length),server_write_MAC_key:a.getBytes(t.mac_key_length),client_write_key:a.getBytes(t.enc_key_length),server_write_key:a.getBytes(t.enc_key_length)};return o&&(u.client_write_IV=a.getBytes(t.fixed_iv_length),u.server_write_IV=a.getBytes(t.fixed_iv_length)),u},c.createConnectionState=function(e){var t=e.entity===c.ConnectionEnd.client,r=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},n={read:r(),write:r()};if(n.read.update=function(e,t){return n.read.cipherFunction(t,n.read)?n.read.compressFunction(e,t,n.read)||e.error(e,{message:\"Could not decompress record.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.decompression_failure}}):e.error(e,{message:\"Could not decrypt record or bad MAC.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_record_mac}}),!e.fail},n.write.update=function(e,t){return n.write.compressFunction(e,t,n.write)?n.write.cipherFunction(t,n.write)||e.error(e,{message:\"Could not encrypt record.\",send:!1,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}):e.error(e,{message:\"Could not compress record.\",send:!1,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}),!e.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=c.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case c.CompressionMethod.none:break;case c.CompressionMethod.deflate:n.read.compressFunction=o,n.write.compressFunction=s;break;default:throw new Error(\"Unsupported compression algorithm.\")}}return n},c.createRandom=function(){var e=new Date,t=+e+6e4*e.getTimezoneOffset(),r=n.util.createBuffer();return r.putInt32(t),r.putBytes(n.random.getBytes(28)),r},c.createRecord=function(e,t){return t.data?{type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data}:null},c.createAlert=function(e,t){var r=n.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),c.createRecord(e,{type:c.ContentType.alert,data:r})},c.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=n.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var i=e.cipherSuites[r];t.putByte(i.id[0]),t.putByte(i.id[1])}var s=t.length(),o=n.util.createBuffer();o.putByte(c.CompressionMethod.none);var a=o.length(),f=n.util.createBuffer();if(e.virtualHost){var l=n.util.createBuffer();l.putByte(0),l.putByte(0);var h=n.util.createBuffer();h.putByte(0),u(h,2,n.util.createBuffer(e.virtualHost));var p=n.util.createBuffer();u(p,2,h),u(l,2,p),f.putBuffer(l)}var d=f.length();d>0&&(d+=2);var y=e.session.id,m=y.length+1+2+4+28+2+s+1+a+d,g=n.util.createBuffer();return g.putByte(c.HandshakeType.client_hello),g.putInt24(m),g.putByte(e.version.major),g.putByte(e.version.minor),g.putBytes(e.session.sp.client_random),u(g,1,n.util.createBuffer(y)),u(g,2,t),u(g,1,o),d>0&&u(g,2,f),g},c.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,i=n.util.createBuffer();return i.putByte(c.HandshakeType.server_hello),i.putInt24(r),i.putByte(e.version.major),i.putByte(e.version.minor),i.putBytes(e.session.sp.server_random),u(i,1,n.util.createBuffer(t)),i.putByte(e.session.cipherSuite.id[0]),i.putByte(e.session.cipherSuite.id[1]),i.putByte(e.session.compressionMethod),i},c.createCertificate=function(e){var t,r=e.entity===c.ConnectionEnd.client,i=null;e.getCertificate&&(t=r?e.session.certificateRequest:e.session.extensions.server_name.serverNameList,i=e.getCertificate(e,t));var s=n.util.createBuffer();if(null!==i)try{n.util.isArray(i)||(i=[i]);for(var o=null,a=0;a<i.length;++a){var f=n.pem.decode(i[a])[0];if(\"CERTIFICATE\"!==f.type&&\"X509 CERTIFICATE\"!==f.type&&\"TRUSTED CERTIFICATE\"!==f.type){var l=new Error('Could not convert certificate from PEM; PEM header type is not \"CERTIFICATE\", \"X509 CERTIFICATE\", or \"TRUSTED CERTIFICATE\".');throw l.headerType=f.type,l}if(f.procType&&\"ENCRYPTED\"===f.procType.type)throw new Error(\"Could not convert certificate from PEM; PEM is encrypted.\");var h=n.util.createBuffer(f.body);null===o&&(o=n.asn1.fromDer(h.bytes(),!1));var p=n.util.createBuffer();u(p,3,h),s.putBuffer(p)}i=n.pki.certificateFromAsn1(o),r?e.session.clientCertificate=i:e.session.serverCertificate=i}catch(t){return e.error(e,{message:\"Could not send certificate list.\",cause:t,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate}})}var d=3+s.length(),y=n.util.createBuffer();return y.putByte(c.HandshakeType.certificate),y.putInt24(d),u(y,3,s),y},c.createClientKeyExchange=function(e){var t=n.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(n.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var i=(t=e.session.serverCertificate.publicKey.encrypt(r.pre_master_secret)).length+2,s=n.util.createBuffer();return s.putByte(c.HandshakeType.client_key_exchange),s.putInt24(i),s.putInt16(t.length),s.putBytes(t),s},c.createServerKeyExchange=function(e){var t=n.util.createBuffer();return t},c.getClientSignature=function(e,t){var r=n.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(e,t,r){var i=null;if(e.getPrivateKey)try{i=e.getPrivateKey(e,e.session.clientCertificate),i=n.pki.privateKeyFromPem(i)}catch(t){e.error(e,{message:\"Could not get private key.\",cause:t,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}})}null===i?e.error(e,{message:\"No private key set.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}):t=i.sign(t,null),r(e,t)},e.getSignature(e,r,t)},c.createCertificateVerify=function(e,t){var r=t.length+2,i=n.util.createBuffer();return i.putByte(c.HandshakeType.certificate_verify),i.putInt24(r),i.putInt16(t.length),i.putBytes(t),i},c.createCertificateRequest=function(e){var t=n.util.createBuffer();t.putByte(1);var r=n.util.createBuffer();for(var i in e.caStore.certs){var s=e.caStore.certs[i],o=n.pki.distinguishedNameToAsn1(s.subject),a=n.asn1.toDer(o);r.putInt16(a.length()),r.putBuffer(a)}var f=1+t.length()+2+r.length(),l=n.util.createBuffer();return l.putByte(c.HandshakeType.certificate_request),l.putInt24(f),u(l,1,t),u(l,2,r),l},c.createServerHelloDone=function(e){var t=n.util.createBuffer();return t.putByte(c.HandshakeType.server_hello_done),t.putInt24(0),t},c.createChangeCipherSpec=function(){var e=n.util.createBuffer();return e.putByte(1),e},c.createFinished=function(e){var t=n.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===c.ConnectionEnd.client,s=e.session.sp,o=r?\"client finished\":\"server finished\";t=i(s.master_secret,o,t.getBytes(),12);var a=n.util.createBuffer();return a.putByte(c.HandshakeType.finished),a.putInt24(t.length()),a.putBuffer(t),a},c.createHeartbeat=function(e,t,r){void 0===r&&(r=t.length);var i=n.util.createBuffer();i.putByte(e),i.putInt16(r),i.putBytes(t);var s=i.length(),o=Math.max(16,s-r-3);return i.putBytes(n.random.getBytes(o)),i},c.queue=function(e,t){if(t&&(0!==t.fragment.length()||t.type!==c.ContentType.handshake&&t.type!==c.ContentType.alert&&t.type!==c.ContentType.change_cipher_spec)){if(t.type===c.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var i;if(t.fragment.length()<=c.MaxFragment)i=[t];else{i=[];for(var s=t.fragment.bytes();s.length>c.MaxFragment;)i.push(c.createRecord(e,{type:t.type,data:n.util.createBuffer(s.slice(0,c.MaxFragment))})),s=s.slice(c.MaxFragment);s.length>0&&i.push(c.createRecord(e,{type:t.type,data:n.util.createBuffer(s)}))}for(var o=0;o<i.length&&!e.fail;++o){var a=i[o];e.state.current.write.update(e,a)&&e.records.push(a)}}},c.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var H=function(e){switch(e){case!0:return!0;case n.pki.certificateError.bad_certificate:return c.Alert.Description.bad_certificate;case n.pki.certificateError.unsupported_certificate:return c.Alert.Description.unsupported_certificate;case n.pki.certificateError.certificate_revoked:return c.Alert.Description.certificate_revoked;case n.pki.certificateError.certificate_expired:return c.Alert.Description.certificate_expired;case n.pki.certificateError.certificate_unknown:return c.Alert.Description.certificate_unknown;case n.pki.certificateError.unknown_ca:return c.Alert.Description.unknown_ca;default:return c.Alert.Description.bad_certificate}};for(var z in c.verifyCertificateChain=function(e,t){try{n.pki.verifyCertificateChain(e.caStore,t,function(t,r,i){H(t);var s=e.verify(e,t,r,i);if(!0!==s){if(\"object\"==typeof s&&!n.util.isArray(s)){var o=new Error(\"The application rejected the certificate.\");throw o.send=!0,o.alert={level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate},s.message&&(o.message=s.message),s.alert&&(o.alert.description=s.alert),o}s!==t&&(s=function(e){switch(e){case!0:return!0;case c.Alert.Description.bad_certificate:return n.pki.certificateError.bad_certificate;case c.Alert.Description.unsupported_certificate:return n.pki.certificateError.unsupported_certificate;case c.Alert.Description.certificate_revoked:return n.pki.certificateError.certificate_revoked;case c.Alert.Description.certificate_expired:return n.pki.certificateError.certificate_expired;case c.Alert.Description.certificate_unknown:return n.pki.certificateError.certificate_unknown;case c.Alert.Description.unknown_ca:return n.pki.certificateError.unknown_ca;default:return n.pki.certificateError.bad_certificate}}(s))}return s})}catch(t){var r=t;(\"object\"!=typeof r||n.util.isArray(r))&&(r={send:!0,alert:{level:c.Alert.Level.fatal,description:H(t)}}),\"send\"in r||(r.send=!0),\"alert\"in r||(r.alert={level:c.Alert.Level.fatal,description:H(r.error)}),e.error(e,r)}return!e.fail},c.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{for(var i in(r={}).cache=e||{},r.capacity=Math.max(t||100,1),r.order=[],e)r.order.length<=t?r.order.push(i):delete e[i];r.getSession=function(e){var t=null,i=null;if(e?i=n.util.bytesToHex(e):r.order.length>0&&(i=r.order[0]),null!==i&&i in r.cache)for(var s in t=r.cache[i],delete r.cache[i],r.order)if(r.order[s]===i){r.order.splice(s,1);break}return t},r.setSession=function(e,t){if(r.order.length===r.capacity){var i=r.order.shift();delete r.cache[i]}i=n.util.bytesToHex(e);r.order.push(i),r.cache[i]=t}}return r},c.createConnection=function(e){var t=null;t=e.caStore?n.util.isArray(e.caStore)?n.pki.createCaStore(e.caStore):e.caStore:n.pki.createCaStore();var r=e.cipherSuites||null;if(null===r)for(var i in r=[],c.CipherSuites)r.push(c.CipherSuites[i]);var s=e.server?c.ConnectionEnd.server:c.ConnectionEnd.client,o=e.sessionCache?c.createSessionCache(e.sessionCache):null,a={version:{major:c.Version.major,minor:c.Version.minor},entity:s,sessionId:e.sessionId,caStore:t,sessionCache:o,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(e,t,r,n){return t},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:n.util.createBuffer(),tlsData:n.util.createBuffer(),data:n.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(t,r){r.origin=r.origin||(t.entity===c.ConnectionEnd.client?\"client\":\"server\"),r.send&&(c.queue(t,c.createAlert(t,r.alert)),c.flush(t));var n=!1!==r.fatal;n&&(t.fail=!0),e.error(t,r),n&&t.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null,reset:function(e){a.version={major:c.Version.major,minor:c.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=(a.entity,c.ConnectionEnd.client,0),a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(e||void 0===e),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=c.createConnectionState(a)}};a.reset();return a.handshake=function(e){if(a.entity!==c.ConnectionEnd.client)a.error(a,{message:\"Cannot initiate handshake as a server.\",fatal:!1});else if(a.handshaking)a.error(a,{message:\"Handshake already in progress.\",fatal:!1});else{a.fail&&!a.open&&0===a.handshakes&&(a.fail=!1),a.handshaking=!0;var t=null;(e=e||\"\").length>0&&(a.sessionCache&&(t=a.sessionCache.getSession(e)),null===t&&(e=\"\")),0===e.length&&a.sessionCache&&null!==(t=a.sessionCache.getSession())&&(e=t.id),a.session={id:e,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:n.md.md5.create(),sha1:n.md.sha1.create()},t&&(a.version=t.version,a.session.sp=t.sp),a.session.sp.client_random=c.createRandom().getBytes(),a.open=!0,c.queue(a,c.createRecord(a,{type:c.ContentType.handshake,data:c.createClientHello(a)})),c.flush(a)}},a.process=function(e){var t=0;return e&&a.input.putBytes(e),a.fail||(null!==a.record&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),null===a.record&&(t=function(e){var t=0,r=e.input,i=r.length();if(i<5)t=5-i;else{e.record={type:r.getByte(),version:{major:r.getByte(),minor:r.getByte()},length:r.getInt16(),fragment:n.util.createBuffer(),ready:!1};var s=e.record.version.major===e.version.major;s&&e.session&&e.session.version&&(s=e.record.version.minor===e.version.minor),s||e.error(e,{message:\"Incompatible TLS version.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}})}return t}(a)),a.fail||null===a.record||a.record.ready||(t=function(e){var t=0,r=e.input,n=r.length();n<e.record.length?t=e.record.length-n:(e.record.fragment.putBytes(r.getBytes(e.record.length)),r.compact(),e.state.current.read.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:\"Invalid fragmented record.\",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unexpected_message}})),e.record.ready=!0));return t}(a)),!a.fail&&null!==a.record&&a.record.ready&&function(e,t){var r=t.type-c.ContentType.change_cipher_spec,n=T[e.entity][e.expect];r in n?n[r](e,t):c.handleUnexpected(e,t)}(a,a.record)),t},a.prepare=function(e){return c.queue(a,c.createRecord(a,{type:c.ContentType.application_data,data:n.util.createBuffer(e)})),c.flush(a)},a.prepareHeartbeatRequest=function(e,t){return e instanceof n.util.ByteBuffer&&(e=e.bytes()),void 0===t&&(t=e.length),a.expectedHeartbeatPayload=e,c.queue(a,c.createRecord(a,{type:c.ContentType.heartbeat,data:c.createHeartbeat(c.HeartbeatMessageType.heartbeat_request,e,t)})),c.flush(a)},a.close=function(e){if(!a.fail&&a.sessionCache&&a.session){var t={id:a.session.id,version:a.session.version,sp:a.session.sp};t.sp.keys=null,a.sessionCache.setSession(t.id,t)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,c.queue(a,c.createAlert(a,{level:c.Alert.Level.warning,description:c.Alert.Description.close_notify})),c.flush(a)),a.closed(a)),a.reset(e)},a},e.exports=n.tls=n.tls||{},c)\"function\"!=typeof c[z]&&(n.tls[z]=c[z]);n.tls.prf_tls1=i,n.tls.hmac_sha1=function(e,t,r){var i=n.hmac.create();i.start(\"SHA1\",e);var s=n.util.createBuffer();return s.putInt32(t[0]),s.putInt32(t[1]),s.putByte(r.type),s.putByte(r.version.major),s.putByte(r.version.minor),s.putInt16(r.length),s.putBytes(r.fragment.bytes()),i.update(s.getBytes()),i.digest().getBytes()},n.tls.createSessionCache=c.createSessionCache,n.tls.createConnection=c.createConnection},function(e,t,r){var n=r(4);r(6),n.cipher=n.cipher||{};var i=e.exports=n.cipher.modes=n.cipher.modes||{};function s(e){if(\"string\"==typeof e&&(e=n.util.createBuffer(e)),n.util.isArray(e)&&e.length>4){var t=e;e=n.util.createBuffer();for(var r=0;r<t.length;++r)e.putByte(t[r])}return n.util.isArray(e)||(e=[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]),e}function o(e){e[e.length-1]=e[e.length-1]+1&4294967295}function a(e){return[e/4294967296|0,4294967295&e]}i.ecb=function(e){e=e||{},this.name=\"ECB\",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(e){},i.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cbc=function(e){e=e||{},this.name=\"CBC\",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error(\"Invalid IV parameter.\");this._iv=this._prev.slice(0)}else{if(!(\"iv\"in e))throw new Error(\"Invalid IV parameter.\");this._iv=s(e.iv),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cfb=function(e){e=e||{},this.name=\"CFB\",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(e){if(!(\"iv\"in e))throw new Error(\"Invalid IV parameter.\");this._iv=s(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(e){e=e||{},this.name=\"OFB\",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(e){if(!(\"iv\"in e))throw new Error(\"Invalid IV parameter.\");this._iv=s(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(e){e=e||{},this.name=\"CTR\",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(e){if(!(\"iv\"in e))throw new Error(\"Invalid IV parameter.\");this._iv=s(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(e){e=e||{},this.name=\"GCM\",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(e){if(!(\"iv\"in e))throw new Error(\"Invalid IV parameter.\");var t,r=n.util.createBuffer(e.iv);if(this._cipherLength=0,t=\"additionalData\"in e?n.util.createBuffer(e.additionalData):n.util.createBuffer(),this._tagLength=\"tagLength\"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=n.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error(\"Authentication tag does not match tag length.\");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=r.length();if(12===i)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,t=n.util.createBuffer(t),this._aDataLength=a(8*t.length());var s=t.length()%this.blockSize;for(s&&t.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},i.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(0===s||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},i.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=n.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var s=[];this.cipher.encrypt(this._j0,s);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^s[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},i.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){e[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},i.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},i.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},i.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],u=(n-1-o%n)*t;a[o/n|0]=1<<t-1<<u,s[o]=this.generateSubHashTable(this.multiply(a,e),t)}return s},i.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],u=i[o];i[s+o]=[a[0]^u[0],a[1]^u[1],a[2]^u[2],a[3]^u[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var c=i[s^n];i[s]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i}},function(e,t,r){\"use strict\";const n=r(24),i=r(735);t.create=function(e,t,r){r(null,{digest(r,i){const s=n.createHmac(e.toLowerCase(),t);s.update(r),setImmediate(()=>{i(null,s.digest())})},length:i[e]})}},function(e,t,r){\"use strict\";e.exports=class{constructor(e){this._repo=e,this._bitswap=null}setExchange(e){this._bitswap=e}unsetExchange(){this._bitswap=null}hasExchange(){return null!=this._bitswap}put(e,t){if(this.hasExchange())return this._bitswap.put(e,t);this._repo.blocks.put(e,t)}putMany(e,t){if(this.hasExchange())return this._bitswap.putMany(e,t);this._repo.blocks.putMany(e,t)}get(e,t){return this.hasExchange()?this._bitswap.get(e,t):this._repo.blocks.get(e,t)}delete(e,t){this._repo.blocks.delete(e,t)}}},function(e,t,r){\"use strict\";var n=r(7),i=r(12),s=r(28),o=r(136),a=r(100),u=r(34),c=r(330),f=r(189),l=r(70),h=r(85),p=r(50),d=r(45),y=d,m=d.HDPublicKey,g=r(10),v=r(19),b=r(13);function w(e){if(e instanceof w)return e;if(!(this instanceof w))return new w(e);if(e){if(n.isString(e)||b.isBuffer(e)){var t=w.getSerializedError(e);if(t){if(b.isBuffer(e)&&!w.getSerializedError(e.toString()))return this._buildFromSerialized(e.toString());if(t instanceof m.ArgumentIsPrivateExtended)return new c(e).hdPublicKey;throw t}return this._buildFromSerialized(e)}if(n.isObject(e))return e instanceof c?this._buildFromPrivate(e):this._buildFromObject(e);throw new m.UnrecognizedArgument(e)}throw new m.MustSupplyArgument}w.isValidPath=function(e){if(n.isString(e)){var t=c._getDerivationIndexes(e);return null!==t&&n.all(t,w.isValidPath)}return!!n.isNumber(e)&&(e>=0&&e<w.Hardened)},w.prototype.derive=function(e,t){if(n.isNumber(e))return this._deriveWithNumber(e,t);if(n.isString(e))return this._deriveFromString(e);throw new m.InvalidDerivationArgument(e)},w.prototype._deriveWithNumber=function(e,t){if(e>=w.Hardened||t)throw new m.InvalidIndexCantDeriveHardened;if(e<0)throw new m.InvalidPath(e);var r=f.get(this.xpubkey,e,!1);if(r)return r;var n=b.integerAsBuffer(e),i=b.concat([this.publicKey.toBuffer(),n]),o=u.sha512hmac(i,this._buffers.chainCode),a=s.fromBuffer(o.slice(0,32),{size:32}),c=o.slice(32,64),l=p.fromPoint(h.getG().mul(a).add(this.publicKey.point)),d=new w({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:e,chainCode:c,publicKey:l});return f.set(this.xpubkey,e,!1,d),d},w.prototype._deriveFromString=function(e){if(n.contains(e,\"'\"))throw new m.InvalidIndexCantDeriveHardened;if(!w.isValidPath(e))throw new m.InvalidPath(e);return c._getDerivationIndexes(e).reduce(function(e,t){return e._deriveWithNumber(t)},this)},w.isValidSerialized=function(e,t){return n.isNull(w.getSerializedError(e,t))},w.getSerializedError=function(e,t){if(!n.isString(e)&&!b.isBuffer(e))return new m.UnrecognizedArgument(\"expected buffer or string\");if(!o.validCharacters(e))return new y.InvalidB58Char(\"(unknown)\",e);try{e=a.decode(e)}catch(t){return new y.InvalidB58Checksum(e)}if(e.length!==w.DataSize)return new m.InvalidLength(e);if(!n.isUndefined(t)){var r=w._validateNetwork(e,t);if(r)return r}var i=b.integerFromBuffer(e.slice(0,4));return i===l.livenet.xprivkey||i===l.testnet.xprivkey?new m.ArgumentIsPrivateExtended:null},w._validateNetwork=function(e,t){var r=l.get(t);if(!r)return new y.InvalidNetworkArgument(t);var n=e.slice(w.VersionStart,w.VersionEnd);return b.integerFromBuffer(n)!==r.xpubkey?new y.InvalidNetwork(n):null},w.prototype._buildFromPrivate=function(e){var t=n.clone(e._buffers),r=h.getG().mul(s.fromBuffer(t.privateKey));return t.publicKey=h.pointToCompressed(r),t.version=b.integerAsBuffer(l.get(b.integerFromBuffer(t.version)).xpubkey),t.privateKey=void 0,t.checksum=void 0,t.xprivkey=void 0,this._buildFromBuffers(t)},w.prototype._buildFromObject=function(e){var t={version:e.network?b.integerAsBuffer(l.get(e.network).xpubkey):e.version,depth:n.isNumber(e.depth)?b.integerAsSingleByteBuffer(e.depth):e.depth,parentFingerPrint:n.isNumber(e.parentFingerPrint)?b.integerAsBuffer(e.parentFingerPrint):e.parentFingerPrint,childIndex:n.isNumber(e.childIndex)?b.integerAsBuffer(e.childIndex):e.childIndex,chainCode:n.isString(e.chainCode)?b.hexToBuffer(e.chainCode):e.chainCode,publicKey:n.isString(e.publicKey)?b.hexToBuffer(e.publicKey):b.isBuffer(e.publicKey)?e.publicKey:e.publicKey.toBuffer(),checksum:n.isNumber(e.checksum)?b.integerAsBuffer(e.checksum):e.checksum};return this._buildFromBuffers(t)},w.prototype._buildFromSerialized=function(e){var t=a.decode(e),r={version:t.slice(w.VersionStart,w.VersionEnd),depth:t.slice(w.DepthStart,w.DepthEnd),parentFingerPrint:t.slice(w.ParentFingerPrintStart,w.ParentFingerPrintEnd),childIndex:t.slice(w.ChildIndexStart,w.ChildIndexEnd),chainCode:t.slice(w.ChainCodeStart,w.ChainCodeEnd),publicKey:t.slice(w.PublicKeyStart,w.PublicKeyEnd),checksum:t.slice(w.ChecksumStart,w.ChecksumEnd),xpubkey:e};return this._buildFromBuffers(r)},w.prototype._buildFromBuffers=function(e){w._validateBufferArguments(e),v.defineImmutable(this,{_buffers:e});var t=[e.version,e.depth,e.parentFingerPrint,e.childIndex,e.chainCode,e.publicKey],r=b.concat(t),n=a.checksum(r);if(e.checksum&&e.checksum.length){if(e.checksum.toString(\"hex\")!==n.toString(\"hex\"))throw new y.InvalidB58Checksum(r,n)}else e.checksum=n;var i,s=l.get(b.integerFromBuffer(e.version));i=a.encode(b.concat(t)),e.xpubkey=new Buffer(i);var o=new p(e.publicKey,{network:s}),c=w.ParentFingerPrintSize,f=u.sha256ripemd160(o.toBuffer()).slice(0,c);return v.defineImmutable(this,{xpubkey:i,network:s,depth:b.integerFromSingleByteBuffer(e.depth),publicKey:o,fingerPrint:f}),this},w._validateBufferArguments=function(e){var t=function(t,r){var n=e[t];g(b.isBuffer(n),t+\" argument is not a buffer, it's \"+typeof n),g(n.length===r,t+\" has not the expected size: found \"+n.length+\", expected \"+r)};t(\"version\",w.VersionSize),t(\"depth\",w.DepthSize),t(\"parentFingerPrint\",w.ParentFingerPrintSize),t(\"childIndex\",w.ChildIndexSize),t(\"chainCode\",w.ChainCodeSize),t(\"publicKey\",w.PublicKeySize),e.checksum&&e.checksum.length&&t(\"checksum\",w.CheckSumSize)},w.fromString=function(e){return i.checkArgument(n.isString(e),\"No valid string was provided\"),new w(e)},w.fromObject=function(e){return i.checkArgument(n.isObject(e),\"No valid argument was provided\"),new w(e)},w.prototype.toString=function(){return this.xpubkey},w.prototype.inspect=function(){return\"<HDPublicKey: \"+this.xpubkey+\">\"},w.prototype.toObject=w.prototype.toJSON=function(){return{network:l.get(b.integerFromBuffer(this._buffers.version)).name,depth:b.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:b.integerFromBuffer(this.fingerPrint),parentFingerPrint:b.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:b.integerFromBuffer(this._buffers.childIndex),chainCode:b.bufferToHex(this._buffers.chainCode),publicKey:this.publicKey.toString(),checksum:b.integerFromBuffer(this._buffers.checksum),xpubkey:this.xpubkey}},w.fromBuffer=function(e){return new w(e)},w.prototype.toBuffer=function(){return b.copy(this._buffers.xpubkey)},w.Hardened=2147483648,w.RootElementAlias=[\"m\",\"M\"],w.VersionSize=4,w.DepthSize=1,w.ParentFingerPrintSize=4,w.ChildIndexSize=4,w.ChainCodeSize=32,w.PublicKeySize=33,w.CheckSumSize=4,w.DataSize=78,w.SerializedByteSize=82,w.VersionStart=0,w.VersionEnd=w.VersionStart+w.VersionSize,w.DepthStart=w.VersionEnd,w.DepthEnd=w.DepthStart+w.DepthSize,w.ParentFingerPrintStart=w.DepthEnd,w.ParentFingerPrintEnd=w.ParentFingerPrintStart+w.ParentFingerPrintSize,w.ChildIndexStart=w.ParentFingerPrintEnd,w.ChildIndexEnd=w.ChildIndexStart+w.ChildIndexSize,w.ChainCodeStart=w.ChildIndexEnd,w.ChainCodeEnd=w.ChainCodeStart+w.ChainCodeSize,w.PublicKeyStart=w.ChainCodeEnd,w.PublicKeyEnd=w.PublicKeyStart+w.PublicKeySize,w.ChecksumStart=w.PublicKeyEnd,w.ChecksumEnd=w.ChecksumStart+w.CheckSumSize,g(w.PublicKeyEnd===w.DataSize),g(w.ChecksumEnd===w.SerializedByteSize),e.exports=w},function(e,t,r){\"use strict\";var n=r(10),i=r(38),s=r(7),o=r(12),a=r(28),u=r(136),c=r(100),f=r(34),l=r(70),h=r(189),p=r(85),d=r(137),y=r(134),m=r(45),g=m.HDPrivateKey,v=r(13),b=r(19);function w(e){if(e instanceof w)return e;if(!(this instanceof w))return new w(e);if(!e)return this._generateRandomly();if(l.get(e))return this._generateRandomly(e);if(s.isString(e)||v.isBuffer(e))if(w.isValidSerialized(e))this._buildFromSerialized(e);else if(b.isValidJSON(e))this._buildFromJSON(e);else{if(!v.isBuffer(e)||!w.isValidSerialized(e.toString()))throw w.getSerializedError(e);this._buildFromSerialized(e.toString())}else{if(!s.isObject(e))throw new g.UnrecognizedArgument(e);this._buildFromObject(e)}}w.isValidPath=function(e,t){if(s.isString(e)){var r=w._getDerivationIndexes(e);return null!==r&&s.all(r,w.isValidPath)}return!!s.isNumber(e)&&(e<w.Hardened&&!0===t&&(e+=w.Hardened),e>=0&&e<w.MaxIndex)},w._getDerivationIndexes=function(e){var t=e.split(\"/\");if(s.contains(w.RootElementAlias,e))return[];if(!s.contains(w.RootElementAlias,t[0]))return null;var r=t.slice(1).map(function(e){var t=\"'\"===e.slice(-1);if(t&&(e=e.slice(0,-1)),!e||\"-\"===e[0])return NaN;var r=+e;return t&&(r+=w.Hardened),r});return s.any(r,isNaN)?null:r},w.prototype.derive=function(e,t){if(s.isNumber(e))return this._deriveWithNumber(e,t);if(s.isString(e))return this._deriveFromString(e);throw new g.InvalidDerivationArgument(e)},w.prototype._deriveWithNumber=function(e,t){if(!w.isValidPath(e,t))throw new g.InvalidPath(e);t=e>=w.Hardened||t,e<w.Hardened&&!0===t&&(e+=w.Hardened);var r=h.get(this.xprivkey,e,t);if(r)return r;var n,s=v.integerAsBuffer(e);n=t?v.concat([new i.Buffer([0]),this.privateKey.toBuffer(),s]):v.concat([this.publicKey.toBuffer(),s]);var o=f.sha512hmac(n,this._buffers.chainCode),u=a.fromBuffer(o.slice(0,32),{size:32}),c=o.slice(32,64),l=u.add(this.privateKey.toBigNumber()).mod(p.getN()).toBuffer({size:32}),d=new w({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:e,chainCode:c,privateKey:l});return h.set(this.xprivkey,e,t,d),d},w.prototype._deriveFromString=function(e){if(!w.isValidPath(e))throw new g.InvalidPath(e);return w._getDerivationIndexes(e).reduce(function(e,t){return e._deriveWithNumber(t)},this)},w.isValidSerialized=function(e,t){return!w.getSerializedError(e,t)},w.getSerializedError=function(e,t){if(!s.isString(e)&&!v.isBuffer(e))return new g.UnrecognizedArgument(\"Expected string or buffer\");if(!u.validCharacters(e))return new m.InvalidB58Char(\"(unknown)\",e);try{e=c.decode(e)}catch(t){return new m.InvalidB58Checksum(e)}if(e.length!==w.DataLength)return new g.InvalidLength(e);if(!s.isUndefined(t)){var r=w._validateNetwork(e,t);if(r)return r}return null},w._validateNetwork=function(e,t){var r=l.get(t);if(!r)return new m.InvalidNetworkArgument(t);var n=e.slice(0,4);return v.integerFromBuffer(n)!==r.xprivkey?new m.InvalidNetwork(n):null},w.fromString=function(e){return o.checkArgument(s.isString(e),\"No valid string was provided\"),new w(e)},w.fromObject=function(e){return o.checkArgument(s.isObject(e),\"No valid argument was provided\"),new w(e)},w.prototype._buildFromJSON=function(e){return this._buildFromObject(JSON.parse(e))},w.prototype._buildFromObject=function(e){var t={version:e.network?v.integerAsBuffer(l.get(e.network).xprivkey):e.version,depth:s.isNumber(e.depth)?v.integerAsSingleByteBuffer(e.depth):e.depth,parentFingerPrint:s.isNumber(e.parentFingerPrint)?v.integerAsBuffer(e.parentFingerPrint):e.parentFingerPrint,childIndex:s.isNumber(e.childIndex)?v.integerAsBuffer(e.childIndex):e.childIndex,chainCode:s.isString(e.chainCode)?v.hexToBuffer(e.chainCode):e.chainCode,privateKey:s.isString(e.privateKey)&&b.isHexa(e.privateKey)?v.hexToBuffer(e.privateKey):e.privateKey,checksum:e.checksum?e.checksum.length?e.checksum:v.integerAsBuffer(e.checksum):void 0};return this._buildFromBuffers(t)},w.prototype._buildFromSerialized=function(e){var t=c.decode(e),r={version:t.slice(w.VersionStart,w.VersionEnd),depth:t.slice(w.DepthStart,w.DepthEnd),parentFingerPrint:t.slice(w.ParentFingerPrintStart,w.ParentFingerPrintEnd),childIndex:t.slice(w.ChildIndexStart,w.ChildIndexEnd),chainCode:t.slice(w.ChainCodeStart,w.ChainCodeEnd),privateKey:t.slice(w.PrivateKeyStart,w.PrivateKeyEnd),checksum:t.slice(w.ChecksumStart,w.ChecksumEnd),xprivkey:e};return this._buildFromBuffers(r)},w.prototype._generateRandomly=function(e){return w.fromSeed(y.getRandomBuffer(64),e)},w.fromSeed=function(e,t){if(b.isHexaString(e)&&(e=v.hexToBuffer(e)),!Buffer.isBuffer(e))throw new g.InvalidEntropyArgument(e);if(e.length<16)throw new g.InvalidEntropyArgument.NotEnoughEntropy(e);if(e.length>64)throw new g.InvalidEntropyArgument.TooMuchEntropy(e);var r=f.sha512hmac(e,new i.Buffer(\"Bitcoin seed\"));return new w({network:l.get(t)||l.defaultNetwork,depth:0,parentFingerPrint:0,childIndex:0,privateKey:r.slice(0,32),chainCode:r.slice(32,64)})},w.prototype._calcHDPublicKey=function(){if(!this._hdPublicKey){var e=r(329);this._hdPublicKey=new e(this)}},w.prototype._buildFromBuffers=function(e){w._validateBufferArguments(e),b.defineImmutable(this,{_buffers:e});var t=[e.version,e.depth,e.parentFingerPrint,e.childIndex,e.chainCode,v.emptyBuffer(1),e.privateKey],r=i.Buffer.concat(t);if(e.checksum&&e.checksum.length){if(e.checksum.toString()!==c.checksum(r).toString())throw new m.InvalidB58Checksum(r)}else e.checksum=c.checksum(r);var n,s=l.get(v.integerFromBuffer(e.version));n=c.encode(i.Buffer.concat(t)),e.xprivkey=new Buffer(n);var o=new d(a.fromBuffer(e.privateKey),s),u=o.toPublicKey(),h=w.ParentFingerPrintSize,p=f.sha256ripemd160(u.toBuffer()).slice(0,h);return b.defineImmutable(this,{xprivkey:n,network:s,depth:v.integerFromSingleByteBuffer(e.depth),privateKey:o,publicKey:u,fingerPrint:p}),this._hdPublicKey=null,Object.defineProperty(this,\"hdPublicKey\",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey}}),Object.defineProperty(this,\"xpubkey\",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey.xpubkey}}),this},w._validateBufferArguments=function(e){var t=function(t,r){var i=e[t];n(v.isBuffer(i),t+\" argument is not a buffer\"),n(i.length===r,t+\" has not the expected size: found \"+i.length+\", expected \"+r)};t(\"version\",w.VersionSize),t(\"depth\",w.DepthSize),t(\"parentFingerPrint\",w.ParentFingerPrintSize),t(\"childIndex\",w.ChildIndexSize),t(\"chainCode\",w.ChainCodeSize),t(\"privateKey\",w.PrivateKeySize),e.checksum&&e.checksum.length&&t(\"checksum\",w.CheckSumSize)},w.prototype.toString=function(){return this.xprivkey},w.prototype.inspect=function(){return\"<HDPrivateKey: \"+this.xprivkey+\">\"},w.prototype.toObject=w.prototype.toJSON=function(){return{network:l.get(v.integerFromBuffer(this._buffers.version),\"xprivkey\").name,depth:v.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:v.integerFromBuffer(this.fingerPrint),parentFingerPrint:v.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:v.integerFromBuffer(this._buffers.childIndex),chainCode:v.bufferToHex(this._buffers.chainCode),privateKey:this.privateKey.toBuffer().toString(\"hex\"),checksum:v.integerFromBuffer(this._buffers.checksum),xprivkey:this.xprivkey}},w.fromBuffer=function(e){return new w(e.toString())},w.prototype.toBuffer=function(){return v.copy(this._buffers.xprivkey)},w.DefaultDepth=0,w.DefaultFingerprint=0,w.DefaultChildIndex=0,w.Hardened=2147483648,w.MaxIndex=2*w.Hardened,w.RootElementAlias=[\"m\",\"M\",\"m'\",\"M'\"],w.VersionSize=4,w.DepthSize=1,w.ParentFingerPrintSize=4,w.ChildIndexSize=4,w.ChainCodeSize=32,w.PrivateKeySize=32,w.CheckSumSize=4,w.DataLength=78,w.SerializedByteSize=82,w.VersionStart=0,w.VersionEnd=w.VersionStart+w.VersionSize,w.DepthStart=w.VersionEnd,w.DepthEnd=w.DepthStart+w.DepthSize,w.ParentFingerPrintStart=w.DepthEnd,w.ParentFingerPrintEnd=w.ParentFingerPrintStart+w.ParentFingerPrintSize,w.ChildIndexStart=w.ParentFingerPrintEnd,w.ChildIndexEnd=w.ChildIndexStart+w.ChildIndexSize,w.ChainCodeStart=w.ChildIndexEnd,w.ChainCodeEnd=w.ChainCodeStart+w.ChainCodeSize,w.PrivateKeyStart=w.ChainCodeEnd+1,w.PrivateKeyEnd=w.PrivateKeyStart+w.PrivateKeySize,w.ChecksumStart=w.PrivateKeyEnd,w.ChecksumEnd=w.ChecksumStart+w.CheckSumSize,n(w.ChecksumEnd===w.SerializedByteSize),e.exports=w},function(e,t,r){\"use strict\";var n=r(7),i=r(133),s=r(13),o=r(63),a=r(41),u=r(34),c=(r(19),r(135)),f=r(12);function l(e){if(!(this instanceof l))return new l(e);var t={};if(s.isBuffer(e))t=l._fromBufferReader(o(e));else{if(!n.isObject(e))throw new TypeError(\"Unrecognized argument for MerkleBlock\");t={header:e.header instanceof i?e.header:i.fromObject(e.header),numTransactions:e.numTransactions,hashes:e.hashes,flags:e.flags}}return n.extend(this,t),this._flagBitsUsed=0,this._hashesUsed=0,this}l.fromBuffer=function(e){return l.fromBufferReader(o(e))},l.fromBufferReader=function(e){return new l(l._fromBufferReader(e))},l.prototype.toBuffer=function(){return this.toBufferWriter().concat()},l.prototype.toBufferWriter=function(e){e||(e=new a),e.write(this.header.toBuffer()),e.writeUInt32LE(this.numTransactions),e.writeVarintNum(this.hashes.length);for(var t=0;t<this.hashes.length;t++)e.write(new Buffer(this.hashes[t],\"hex\"));for(e.writeVarintNum(this.flags.length),t=0;t<this.flags.length;t++)e.writeUInt8(this.flags[t]);return e},l.prototype.toObject=l.prototype.toJSON=function(){return{header:this.header.toObject(),numTransactions:this.numTransactions,hashes:this.hashes,flags:this.flags}},l.prototype.validMerkleTree=function(){if(f.checkState(n.isArray(this.flags),\"MerkleBlock flags is not an array\"),f.checkState(n.isArray(this.hashes),\"MerkleBlock hashes is not an array\"),this.hashes.length>this.numTransactions)return!1;if(8*this.flags.length<this.hashes.length)return!1;var e=this._calcTreeHeight(),t={hashesUsed:0,flagBitsUsed:0},r=this._traverseMerkleTree(e,0,t);return t.hashesUsed===this.hashes.length&&s.equals(r,this.header.merkleRoot)},l.prototype._traverseMerkleTree=function(e,t,r){if((r=r||{}).txs=r.txs||[],r.flagBitsUsed=r.flagBitsUsed||0,r.hashesUsed=r.hashesUsed||0,r.flagBitsUsed>8*this.flags.length)return null;var n=this.flags[r.flagBitsUsed>>3]>>>(7&r.flagBitsUsed++)&1;if(0!==e&&n){var i=this._traverseMerkleTree(e-1,2*t,r),s=i;return 2*t+1<this._calcTreeWidth(e-1)&&(s=this._traverseMerkleTree(e-1,2*t+1,r)),u.sha256sha256(new Buffer.concat([i,s]))}if(r.hashesUsed>=this.hashes.length)return null;var o=this.hashes[r.hashesUsed++];return 0===e&&n&&r.txs.push(o),new Buffer(o,\"hex\")},l.prototype._calcTreeWidth=function(e){return this.numTransactions+(1<<e)-1>>e},l.prototype._calcTreeHeight=function(){for(var e=0;this._calcTreeWidth(e)>1;)e++;return e},l.prototype.hasTransaction=function(e){f.checkArgument(!n.isUndefined(e),\"tx cannot be undefined\"),f.checkArgument(e instanceof c||\"string\"==typeof e,'Invalid tx given, tx must be a \"string\" or \"Transaction\"');var t=e;e instanceof c&&(t=s.reverse(new Buffer(e.id,\"hex\")).toString(\"hex\"));var r=[],i=this._calcTreeHeight();return this._traverseMerkleTree(i,0,{txs:r}),-1!==r.indexOf(t)},l._fromBufferReader=function(e){f.checkState(!e.finished(),\"No merkleblock data received\");var t={};t.header=i.fromBufferReader(e),t.numTransactions=e.readUInt32LE();var r=e.readVarintNum();t.hashes=[];for(var n=0;n<r;n++)t.hashes.push(e.read(32).toString(\"hex\"));var s=e.readVarintNum();for(t.flags=[],n=0;n<s;n++)t.flags.push(e.readUInt8());return t},l.fromObject=function(e){return new l(e)},e.exports=l},function(e,t,r){\"use strict\";var n=r(7),i=r(12),s=r(19),o=r(43),a=r(69),u=r(190);function c(e){if(!(this instanceof c))return new c(e);i.checkArgument(n.isObject(e),\"Must provide an object from where to extract data\");var t=e.address?new a(e.address):void 0,r=e.txid?e.txid:e.txId;if(!r||!s.isHexaString(r)||r.length>64)throw new Error(\"Invalid TXID in object\",e);var f=n.isUndefined(e.vout)?e.outputIndex:e.vout;if(!n.isNumber(f))throw new Error(\"Invalid outputIndex, received \"+f);i.checkArgument(!n.isUndefined(e.scriptPubKey)||!n.isUndefined(e.script),\"Must provide the scriptPubKey for that output!\");var l=new o(e.scriptPubKey||e.script);i.checkArgument(!n.isUndefined(e.amount)||!n.isUndefined(e.satoshis),\"Must provide an amount for the output\");var h=n.isUndefined(e.amount)?e.satoshis:new u.fromBTC(e.amount).toSatoshis();i.checkArgument(n.isNumber(h),\"Amount must be a number\"),s.defineImmutable(this,{address:t,txId:r,outputIndex:f,script:l,satoshis:h})}c.prototype.inspect=function(){return\"<UnspentOutput: \"+this.txId+\":\"+this.outputIndex+\", satoshis: \"+this.satoshis+\", address: \"+this.address+\">\"},c.prototype.toString=function(){return this.txId+\":\"+this.outputIndex},c.fromObject=function(e){return new c(e)},c.prototype.toObject=c.prototype.toJSON=function(){return{address:this.address?this.address.toString():void 0,txid:this.txId,vout:this.outputIndex,scriptPubKey:this.script.toBuffer().toString(\"hex\"),amount:u.fromSatoshis(this.satoshis).toBTC()}},e.exports=c},function(e,t,r){\"use strict\";var n=r(69),i=r(63),s=r(41),o=r(34),a=r(193),u=r(50),c=r(44),f=r(70),l=r(12),h=r(7),p=r(45),d=r(38),y=r(13),m=r(19),g=function e(t){return this instanceof e?(this.chunks=[],y.isBuffer(t)?e.fromBuffer(t):t instanceof n?e.fromAddress(t):t instanceof e?e.fromBuffer(t.toBuffer()):\"string\"==typeof t?e.fromString(t):void(void 0!==t&&this.set(t))):new e(t)};g.prototype.set=function(e){return this.chunks=e.chunks||this.chunks,this},g.fromBuffer=function(e){var t=new g;t.chunks=[];for(var r=new i(e);!r.finished();)try{var n,s,o=r.readUInt8();o>0&&o<a.OP_PUSHDATA1?(n=o,t.chunks.push({buf:r.read(n),len:n,opcodenum:o})):o===a.OP_PUSHDATA1?(n=r.readUInt8(),s=r.read(n),t.chunks.push({buf:s,len:n,opcodenum:o})):o===a.OP_PUSHDATA2?(n=r.readUInt16LE(),s=r.read(n),t.chunks.push({buf:s,len:n,opcodenum:o})):o===a.OP_PUSHDATA4?(n=r.readUInt32LE(),s=r.read(n),t.chunks.push({buf:s,len:n,opcodenum:o})):t.chunks.push({opcodenum:o})}catch(t){if(t instanceof RangeError)throw new p.Script.InvalidBuffer(e.toString(\"hex\"));throw t}return t},g.prototype.toBuffer=function(){for(var e=new s,t=0;t<this.chunks.length;t++){var r=this.chunks[t],n=r.opcodenum;e.writeUInt8(r.opcodenum),r.buf&&(n<a.OP_PUSHDATA1?e.write(r.buf):n===a.OP_PUSHDATA1?(e.writeUInt8(r.len),e.write(r.buf)):n===a.OP_PUSHDATA2?(e.writeUInt16LE(r.len),e.write(r.buf)):n===a.OP_PUSHDATA4&&(e.writeUInt32LE(r.len),e.write(r.buf)))}return e.concat()},g.fromASM=function(e){var t=new g;t.chunks=[];for(var r=e.split(\" \"),n=0;n<r.length;){var i=r[n],s=a(i).toNumber();if(h.isUndefined(s)){var o=new Buffer(r[n],\"hex\");t.chunks.push({buf:o,len:o.length,opcodenum:o.length}),n+=1}else s===a.OP_PUSHDATA1||s===a.OP_PUSHDATA2||s===a.OP_PUSHDATA4?(t.chunks.push({buf:new Buffer(r[n+2],\"hex\"),len:parseInt(r[n+1]),opcodenum:s}),n+=3):(t.chunks.push({opcodenum:s}),n+=1)}return t},g.fromHex=function(e){return new g(new d.Buffer(e,\"hex\"))},g.fromString=function(e){if(m.isHexa(e)||0===e.length)return new g(new d.Buffer(e,\"hex\"));var t=new g;t.chunks=[];for(var r=e.split(\" \"),n=0;n<r.length;){var i=r[n],s=a(i).toNumber();if(h.isUndefined(s)){if(!((s=parseInt(i))>0&&s<a.OP_PUSHDATA1))throw new Error(\"Invalid script: \"+JSON.stringify(e));t.chunks.push({buf:new Buffer(r[n+1].slice(2),\"hex\"),len:s,opcodenum:s}),n+=2}else if(s===a.OP_PUSHDATA1||s===a.OP_PUSHDATA2||s===a.OP_PUSHDATA4){if(\"0x\"!==r[n+2].slice(0,2))throw new Error(\"Pushdata data must start with 0x\");t.chunks.push({buf:new Buffer(r[n+2].slice(2),\"hex\"),len:parseInt(r[n+1]),opcodenum:s}),n+=3}else t.chunks.push({opcodenum:s}),n+=1}return t},g.prototype._chunkToString=function(e,t){var r=e.opcodenum,n=\"asm\"===t,i=\"\";if(e.buf)r!==a.OP_PUSHDATA1&&r!==a.OP_PUSHDATA2&&r!==a.OP_PUSHDATA4||(i=i+\" \"+a(r).toString()),e.len>0&&(i=n?i+\" \"+e.buf.toString(\"hex\"):i+\" \"+e.len+\" 0x\"+e.buf.toString(\"hex\"));else if(void 0!==a.reverseMap[r])i=i+\" \"+a(r).toString();else{var s=r.toString(16);s.length%2!=0&&(s=\"0\"+s),i=n?i+\" \"+s:i+\" 0x\"+s}return i},g.prototype.toASM=function(){for(var e=\"\",t=0;t<this.chunks.length;t++){var r=this.chunks[t];e+=this._chunkToString(r,\"asm\")}return e.substr(1)},g.prototype.toString=function(){for(var e=\"\",t=0;t<this.chunks.length;t++){var r=this.chunks[t];e+=this._chunkToString(r)}return e.substr(1)},g.prototype.toHex=function(){return this.toBuffer().toString(\"hex\")},g.prototype.inspect=function(){return\"<Script: \"+this.toString()+\">\"},g.prototype.isPublicKeyHashOut=function(){return!(5!==this.chunks.length||this.chunks[0].opcodenum!==a.OP_DUP||this.chunks[1].opcodenum!==a.OP_HASH160||!this.chunks[2].buf||20!==this.chunks[2].buf.length||this.chunks[3].opcodenum!==a.OP_EQUALVERIFY||this.chunks[4].opcodenum!==a.OP_CHECKSIG)},g.prototype.isPublicKeyHashIn=function(){if(2===this.chunks.length){var e=this.chunks[0].buf,t=this.chunks[1].buf;if(e&&e.length&&48===e[0]&&t&&t.length){var r=t[0];if((4===r||6===r||7===r)&&65===t.length)return!0;if((3===r||2===r)&&33===t.length)return!0}}return!1},g.prototype.getPublicKey=function(){return l.checkState(this.isPublicKeyOut(),\"Can't retreive PublicKey from a non-PK output\"),this.chunks[0].buf},g.prototype.getPublicKeyHash=function(){return l.checkState(this.isPublicKeyHashOut(),\"Can't retrieve PublicKeyHash from a non-PKH output\"),this.chunks[2].buf},g.prototype.isPublicKeyOut=function(){if(2===this.chunks.length&&this.chunks[0].buf&&this.chunks[0].buf.length&&this.chunks[1].opcodenum===a.OP_CHECKSIG){var e=this.chunks[0].buf,t=e[0],r=!1;if((4!==t&&6!==t&&7!==t||65!==e.length)&&(3!==t&&2!==t||33!==e.length)||(r=!0),r)return u.isValid(e)}return!1},g.prototype.isPublicKeyIn=function(){if(1===this.chunks.length){var e=this.chunks[0].buf;if(e&&e.length&&48===e[0])return!0}return!1},g.prototype.isScriptHashOut=function(){var e=this.toBuffer();return 23===e.length&&e[0]===a.OP_HASH160&&20===e[1]&&e[e.length-1]===a.OP_EQUAL},g.prototype.isScriptHashIn=function(){if(this.chunks.length<=1)return!1;var e,t=this.chunks[this.chunks.length-1].buf;if(!t)return!1;try{e=g.fromBuffer(t)}catch(e){if(e instanceof p.Script.InvalidBuffer)return!1;throw e}return e.classify()!==g.types.UNKNOWN},g.prototype.isMultisigOut=function(){return this.chunks.length>3&&a.isSmallIntOp(this.chunks[0].opcodenum)&&this.chunks.slice(1,this.chunks.length-2).every(function(e){return e.buf&&y.isBuffer(e.buf)})&&a.isSmallIntOp(this.chunks[this.chunks.length-2].opcodenum)&&this.chunks[this.chunks.length-1].opcodenum===a.OP_CHECKMULTISIG},g.prototype.isMultisigIn=function(){return this.chunks.length>=2&&0===this.chunks[0].opcodenum&&this.chunks.slice(1,this.chunks.length).every(function(e){return e.buf&&y.isBuffer(e.buf)&&c.isTxDER(e.buf)})},g.prototype.isDataOut=function(){return this.chunks.length>=1&&this.chunks[0].opcodenum===a.OP_RETURN&&(1===this.chunks.length||2===this.chunks.length&&this.chunks[1].buf&&this.chunks[1].buf.length<=g.OP_RETURN_STANDARD_SIZE&&this.chunks[1].length===this.chunks.len)},g.prototype.getData=function(){if(this.isDataOut()||this.isScriptHashOut())return h.isUndefined(this.chunks[1])?new Buffer(0):new Buffer(this.chunks[1].buf);if(this.isPublicKeyHashOut())return new Buffer(this.chunks[2].buf);throw new Error(\"Unrecognized script type to get data from\")},g.prototype.isPushOnly=function(){return h.every(this.chunks,function(e){return e.opcodenum<=a.OP_16})},(g.types={}).UNKNOWN=\"Unknown\",g.types.PUBKEY_OUT=\"Pay to public key\",g.types.PUBKEY_IN=\"Spend from public key\",g.types.PUBKEYHASH_OUT=\"Pay to public key hash\",g.types.PUBKEYHASH_IN=\"Spend from public key hash\",g.types.SCRIPTHASH_OUT=\"Pay to script hash\",g.types.SCRIPTHASH_IN=\"Spend from script hash\",g.types.MULTISIG_OUT=\"Pay to multisig\",g.types.MULTISIG_IN=\"Spend from multisig\",g.types.DATA_OUT=\"Data push\",g.OP_RETURN_STANDARD_SIZE=80,g.prototype.classify=function(){if(this._isInput)return this.classifyInput();if(this._isOutput)return this.classifyOutput();var e=this.classifyOutput();return e!=g.types.UNKNOWN?e:this.classifyInput()},(g.outputIdentifiers={}).PUBKEY_OUT=g.prototype.isPublicKeyOut,g.outputIdentifiers.PUBKEYHASH_OUT=g.prototype.isPublicKeyHashOut,g.outputIdentifiers.MULTISIG_OUT=g.prototype.isMultisigOut,g.outputIdentifiers.SCRIPTHASH_OUT=g.prototype.isScriptHashOut,g.outputIdentifiers.DATA_OUT=g.prototype.isDataOut,g.prototype.classifyOutput=function(){for(var e in g.outputIdentifiers)if(g.outputIdentifiers[e].bind(this)())return g.types[e];return g.types.UNKNOWN},(g.inputIdentifiers={}).PUBKEY_IN=g.prototype.isPublicKeyIn,g.inputIdentifiers.PUBKEYHASH_IN=g.prototype.isPublicKeyHashIn,g.inputIdentifiers.MULTISIG_IN=g.prototype.isMultisigIn,g.inputIdentifiers.SCRIPTHASH_IN=g.prototype.isScriptHashIn,g.prototype.classifyInput=function(){for(var e in g.inputIdentifiers)if(g.inputIdentifiers[e].bind(this)())return g.types[e];return g.types.UNKNOWN},g.prototype.isStandard=function(){return this.classify()!==g.types.UNKNOWN},g.prototype.prepend=function(e){return this._addByType(e,!0),this},g.prototype.equals=function(e){if(l.checkState(e instanceof g,\"Must provide another script\"),this.chunks.length!==e.chunks.length)return!1;var t;for(t=0;t<this.chunks.length;t++){if(y.isBuffer(this.chunks[t].buf)&&!y.isBuffer(e.chunks[t].buf))return!1;if(y.isBuffer(this.chunks[t].buf)&&!y.equals(this.chunks[t].buf,e.chunks[t].buf))return!1;if(this.chunks[t].opcodenum!==e.chunks[t].opcodenum)return!1}return!0},g.prototype.add=function(e){return this._addByType(e,!1),this},g.prototype._addByType=function(e,t){if(\"string\"==typeof e)this._addOpcode(e,t);else if(\"number\"==typeof e)this._addOpcode(e,t);else if(e instanceof a)this._addOpcode(e,t);else if(y.isBuffer(e))this._addBuffer(e,t);else if(e instanceof g)this.chunks=this.chunks.concat(e.chunks);else{if(\"object\"!=typeof e)throw new Error(\"Invalid script chunk\");this._insertAtPosition(e,t)}},g.prototype._insertAtPosition=function(e,t){t?this.chunks.unshift(e):this.chunks.push(e)},g.prototype._addOpcode=function(e,t){var r;return r=\"number\"==typeof e?e:e instanceof a?e.toNumber():a(e).toNumber(),this._insertAtPosition({opcodenum:r},t),this},g.prototype._addBuffer=function(e,t){var r,n=e.length;if(n>=0&&n<a.OP_PUSHDATA1)r=n;else if(n<Math.pow(2,8))r=a.OP_PUSHDATA1;else if(n<Math.pow(2,16))r=a.OP_PUSHDATA2;else{if(!(n<Math.pow(2,32)))throw new Error(\"You can't push that much data\");r=a.OP_PUSHDATA4}return this._insertAtPosition({buf:e,len:n,opcodenum:r},t),this},g.prototype.removeCodeseparators=function(){for(var e=[],t=0;t<this.chunks.length;t++)this.chunks[t].opcodenum!==a.OP_CODESEPARATOR&&e.push(this.chunks[t]);return this.chunks=e,this},g.buildMultisigOut=function(e,t,r){l.checkArgument(t<=e.length,\"Number of required signatures must be less than or equal to the number of public keys\"),r=r||{};var n=new g;n.add(a.smallInt(t));var i=e=h.map(e,u);r.noSorting||(i=h.sortBy(e,function(e){return e.toString(\"hex\")}));for(var s=0;s<i.length;s++){var o=i[s];n.add(o.toBuffer())}return n.add(a.smallInt(e.length)),n.add(a.OP_CHECKMULTISIG),n},g.buildMultisigIn=function(e,t,r,n){l.checkArgument(h.isArray(e)),l.checkArgument(h.isNumber(t)),l.checkArgument(h.isArray(r)),n=n||{};var i=new g;return i.add(a.OP_0),h.each(r,function(e){l.checkArgument(y.isBuffer(e),\"Signatures must be an array of Buffers\"),i.add(e)}),i},g.buildP2SHMultisigIn=function(e,t,r,n){l.checkArgument(h.isArray(e)),l.checkArgument(h.isNumber(t)),l.checkArgument(h.isArray(r)),n=n||{};var i=new g;return i.add(a.OP_0),h.each(r,function(e){l.checkArgument(y.isBuffer(e),\"Signatures must be an array of Buffers\"),i.add(e)}),i.add((n.cachedMultisig||g.buildMultisigOut(e,t,n)).toBuffer()),i},g.buildPublicKeyHashOut=function(e){l.checkArgument(!h.isUndefined(e)),l.checkArgument(e instanceof u||e instanceof n||h.isString(e)),e instanceof u?e=e.toAddress():h.isString(e)&&(e=new n(e));var t=new g;return t.add(a.OP_DUP).add(a.OP_HASH160).add(e.hashBuffer).add(a.OP_EQUALVERIFY).add(a.OP_CHECKSIG),t._network=e.network,t},g.buildPublicKeyOut=function(e){l.checkArgument(e instanceof u);var t=new g;return t.add(e.toBuffer()).add(a.OP_CHECKSIG),t},g.buildDataOut=function(e,t){l.checkArgument(h.isUndefined(e)||h.isString(e)||y.isBuffer(e)),h.isString(e)&&(e=new Buffer(e,t));var r=new g;return r.add(a.OP_RETURN),h.isUndefined(e)||r.add(e),r},g.buildScriptHashOut=function(e){l.checkArgument(e instanceof g||e instanceof n&&e.isPayToScriptHash());var t=new g;return t.add(a.OP_HASH160).add(e instanceof n?e.hashBuffer:o.sha256ripemd160(e.toBuffer())).add(a.OP_EQUAL),t._network=e._network||e.network,t},g.buildPublicKeyIn=function(e,t){l.checkArgument(e instanceof c||y.isBuffer(e)),l.checkArgument(h.isUndefined(t)||h.isNumber(t)),e instanceof c&&(e=e.toBuffer());var r=new g;return r.add(y.concat([e,y.integerAsSingleByteBuffer(t||c.SIGHASH_ALL)])),r},g.buildPublicKeyHashIn=function(e,t,r){return l.checkArgument(t instanceof c||y.isBuffer(t)),l.checkArgument(h.isUndefined(r)||h.isNumber(r)),t instanceof c&&(t=t.toBuffer()),(new g).add(y.concat([t,y.integerAsSingleByteBuffer(r||c.SIGHASH_ALL)])).add(new u(e).toBuffer())},g.empty=function(){return new g},g.prototype.toScriptHashOut=function(){return g.buildScriptHashOut(this)},g.fromAddress=function(e){if((e=n(e)).isPayToScriptHash())return g.buildScriptHashOut(e);if(e.isPayToPublicKeyHash())return g.buildPublicKeyHashOut(e);throw new p.Script.UnrecognizedAddress(e)},g.prototype.getAddressInfo=function(e){if(this._isInput)return this._getInputAddressInfo();if(this._isOutput)return this._getOutputAddressInfo();var t=this._getOutputAddressInfo();return t||this._getInputAddressInfo()},g.prototype._getOutputAddressInfo=function(){var e={};if(this.isScriptHashOut())e.hashBuffer=this.getData(),e.type=n.PayToScriptHash;else{if(!this.isPublicKeyHashOut())return!1;e.hashBuffer=this.getData(),e.type=n.PayToPublicKeyHash}return e},g.prototype._getInputAddressInfo=function(){var e={};if(this.isPublicKeyHashIn())e.hashBuffer=o.sha256ripemd160(this.chunks[1].buf),e.type=n.PayToPublicKeyHash;else{if(!this.isScriptHashIn())return!1;e.hashBuffer=o.sha256ripemd160(this.chunks[this.chunks.length-1].buf),e.type=n.PayToScriptHash}return e},g.prototype.toAddress=function(e){var t=this.getAddressInfo();return!!t&&(t.network=f.get(e)||this._network||f.defaultNetwork,new n(t))},g.prototype.findAndDelete=function(e){for(var t=e.toBuffer().toString(\"hex\"),r=0;r<this.chunks.length;r++){t===g({chunks:[this.chunks[r]]}).toBuffer().toString(\"hex\")&&this.chunks.splice(r,1)}return this},g.prototype.checkMinimalPush=function(e){var t=this.chunks[e],r=t.buf,n=t.opcodenum;return!r||(0===r.length?n===a.OP_0:1===r.length&&r[0]>=1&&r[0]<=16?n===a.OP_1+(r[0]-1):1===r.length&&129===r[0]?n===a.OP_1NEGATE:r.length<=75?n===r.length:r.length<=255?n===a.OP_PUSHDATA1:!(r.length<=65535)||n===a.OP_PUSHDATA2)},g.prototype._decodeOP_N=function(e){if(e===a.OP_0)return 0;if(e>=a.OP_1&&e<=a.OP_16)return e-(a.OP_1-1);throw new Error(\"Invalid opcode: \"+JSON.stringify(e))},g.prototype.getSignatureOperationsCount=function(e){e=!!h.isUndefined(e)||e;var t=this,r=0,n=a.OP_INVALIDOPCODE;return h.each(t.chunks,function(i){var s=i.opcodenum;s==a.OP_CHECKSIG||s==a.OP_CHECKSIGVERIFY?r++:s!=a.OP_CHECKMULTISIG&&s!=a.OP_CHECKMULTISIGVERIFY||(e&&n>=a.OP_1&&n<=a.OP_16?r+=t._decodeOP_N(n):r+=20),n=s}),r},e.exports=g},function(e,t){e.exports=require(\"elliptic\")},function(e,t,r){\"use strict\";var n=r(28),i=r(85),s=r(44),o=r(50),a=r(134),u=r(34),c=r(13),f=r(7),l=r(12),h=function e(t){if(!(this instanceof e))return new e(t);t&&this.set(t)};h.prototype.set=function(e){return this.hashbuf=e.hashbuf||this.hashbuf,this.endian=e.endian||this.endian,this.privkey=e.privkey||this.privkey,this.pubkey=e.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey),this.sig=e.sig||this.sig,this.k=e.k||this.k,this.verified=e.verified||this.verified,this},h.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey()},h.prototype.calci=function(){for(var e=0;e<4;e++){var t;this.sig.i=e;try{t=this.toPublicKey()}catch(e){console.error(e);continue}if(t.point.eq(this.pubkey.point))return this.sig.compressed=this.pubkey.compressed,this}throw this.sig.i=void 0,new Error(\"Unable to find valid recovery factor\")},h.fromString=function(e){var t=JSON.parse(e);return new h(t)},h.prototype.randomK=function(){var e,t=i.getN();do{e=n.fromBuffer(a.getRandomBuffer(32))}while(!e.lt(t)||!e.gt(n.Zero));return this.k=e,this},h.prototype.deterministicK=function(e){f.isUndefined(e)&&(e=0);var t=new Buffer(32);t.fill(1);var r=new Buffer(32);r.fill(0);var s=this.privkey.bn.toBuffer({size:32}),o=\"little\"===this.endian?c.reverse(this.hashbuf):this.hashbuf;r=u.sha256hmac(Buffer.concat([t,new Buffer([0]),s,o]),r),t=u.sha256hmac(t,r),r=u.sha256hmac(Buffer.concat([t,new Buffer([1]),s,o]),r),t=u.sha256hmac(t,r),t=u.sha256hmac(t,r);for(var a=n.fromBuffer(t),l=i.getN(),h=0;h<e||!a.lt(l)||!a.gt(n.Zero);h++)r=u.sha256hmac(Buffer.concat([t,new Buffer([0])]),r),t=u.sha256hmac(t,r),t=u.sha256hmac(t,r),a=n.fromBuffer(t);return this.k=a,this},h.prototype.toPublicKey=function(){var e=this.sig.i;l.checkArgument(0===e||1===e||2===e||3===e,new Error(\"i must be equal to 0, 1, 2, or 3\"));var t=n.fromBuffer(this.hashbuf),r=this.sig.r,s=this.sig.s,a=1&e,u=e>>1,c=i.getN(),f=i.getG(),h=u?r.add(c):r,p=i.fromX(a,h);if(!p.mul(c).isInfinity())throw new Error(\"nR is not a valid curve point\");var d=t.neg().mod(c),y=r.invm(c),m=p.mul(s).add(f.mul(d)).mul(y);return o.fromPoint(m,this.sig.compressed)},h.prototype.sigError=function(){if(!c.isBuffer(this.hashbuf)||32!==this.hashbuf.length)return\"hashbuf must be a 32 byte buffer\";var e=this.sig.r,t=this.sig.s;if(!(e.gt(n.Zero)&&e.lt(i.getN())&&t.gt(n.Zero)&&t.lt(i.getN())))return\"r and s not in range\";var r=n.fromBuffer(this.hashbuf,this.endian?{endian:this.endian}:void 0),s=i.getN(),o=t.invm(s),a=o.mul(r).mod(s),u=o.mul(e).mod(s),f=i.getG().mulAdd(a,this.pubkey.point,u);return f.isInfinity()?\"p is infinity\":0!==f.getX().mod(s).cmp(e)&&\"Invalid signature\"},h.toLowS=function(e){return e.gt(n.fromBuffer(new Buffer(\"7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0\",\"hex\")))&&(e=i.getN().sub(e)),e},h.prototype._findSignature=function(e,t){var r,s,o,a=i.getN(),u=i.getG(),c=0;do{(!this.k||c>0)&&this.deterministicK(c),c++,r=this.k,s=u.mul(r).x.mod(a),o=r.invm(a).mul(t.add(e.mul(s))).mod(a)}while(s.cmp(n.Zero)<=0||o.cmp(n.Zero)<=0);return{s:o=h.toLowS(o),r:s}},h.prototype.sign=function(){var e=this.hashbuf,t=this.privkey,r=t.bn;l.checkState(e&&t&&r,new Error(\"invalid parameters\")),l.checkState(c.isBuffer(e)&&32===e.length,new Error(\"hashbuf must be a 32 byte buffer\"));var i=n.fromBuffer(e,this.endian?{endian:this.endian}:void 0),o=this._findSignature(r,i);return o.compressed=this.pubkey.compressed,this.sig=new s(o),this},h.prototype.signRandomK=function(){return this.randomK(),this.sign()},h.prototype.toString=function(){var e={};return this.hashbuf&&(e.hashbuf=this.hashbuf.toString(\"hex\")),this.privkey&&(e.privkey=this.privkey.toString()),this.pubkey&&(e.pubkey=this.pubkey.toString()),this.sig&&(e.sig=this.sig.toString()),this.k&&(e.k=this.k.toString()),JSON.stringify(e)},h.prototype.verify=function(){return this.sigError()?this.verified=!1:this.verified=!0,this},h.sign=function(e,t,r){return h().set({hashbuf:e,endian:r,privkey:t}).sign().sig},h.verify=function(e,t,r,n){return h().set({hashbuf:e,endian:n,sig:t,pubkey:r}).verify().verified},e.exports=h},function(e,t,r){\"use strict\";const n=r(770).Block,i=r(5),s=r(23),o=r(347),a=e=>{const t=s.encode(e,\"dbl-sha2-256\");return new i(1,\"zcash-block\",t)};e.exports={hashToCid:a,cid:(e,t)=>{let r,n=null;try{const i=o().update(e.header.toBuffer(!0)).digest(),s=o().update(Buffer.from(i)).digest();r=a(Buffer.from(s))}catch(e){n=e}finally{t(n,r)}},deserialize:(e,t)=>{let r,i=null;try{r=n.fromBuffer(e)}catch(e){i=e}finally{t(i,r)}},serialize:(e,t)=>{let r,n=null;try{r=e.toBuffer()}catch(e){n=e}finally{t(n,r)}}}},function(e,t,r){\"use strict\";t.resolver=r(771),t.util=r(336)},function(e,t,r){\"use strict\";const n=r(5);e.exports={resolver:{multicodec:\"raw\",resolve:(e,t,r)=>{r(null,{value:e,remainderPath:\"\"})},tree:(e,t,r)=>{r(null,[])}},util:{deserialize:(e,t)=>{t(null,e)},serialize:(e,t)=>{t(null,e)},cid:(e,t)=>{t(null,new n(1,\"raw\",e))}}}},function(e,t,r){\"use strict\";const n=r(773),i=r(101);e.exports=i(\"eth-tx\",n,function(e,t,r){const n=[];n.push({path:\"nonce\",value:e.nonce}),n.push({path:\"gasPrice\",value:e.gasPrice}),n.push({path:\"gasLimit\",value:e.gasLimit}),n.push({path:\"toAddress\",value:e.to}),n.push({path:\"value\",value:e.value}),n.push({path:\"data\",value:e.data}),n.push({path:\"v\",value:e.v}),n.push({path:\"r\",value:e.r}),n.push({path:\"s\",value:e.s}),n.push({path:\"fromAddress\",value:e.from}),n.push({path:\"signature\",value:[e.v,e.r,e.s]}),n.push({path:\"isContractPublish\",value:e.toCreationAddress()}),r(null,n)})},function(e,t){e.exports=require(\"rlp\")},function(e,t){e.exports=require(\"ethereumjs-block/header\")},function(e,t,r){\"use strict\";const n=r(341),i=r(102),s=r(101);e.exports=s(\"eth-block\",n,function(e,t,r){const n=[];n.push({path:\"parent\",value:{\"/\":i(\"eth-block\",e.parentHash).toBaseEncodedString()}}),n.push({path:\"ommers\",value:{\"/\":i(\"eth-block-list\",e.uncleHash).toBaseEncodedString()}}),n.push({path:\"transactions\",value:{\"/\":i(\"eth-tx-trie\",e.transactionsTrie).toBaseEncodedString()}}),n.push({path:\"transactionReceipts\",value:{\"/\":i(\"eth-tx-receipt-trie\",e.receiptTrie).toBaseEncodedString()}}),n.push({path:\"state\",value:{\"/\":i(\"eth-state-trie\",e.stateRoot).toBaseEncodedString()}}),n.push({path:\"parentHash\",value:e.parentHash}),n.push({path:\"ommerHash\",value:e.uncleHash}),n.push({path:\"transactionTrieRoot\",value:e.transactionsTrie}),n.push({path:\"transactionReceiptTrieRoot\",value:e.receiptTrie}),n.push({path:\"stateRoot\",value:e.stateRoot}),n.push({path:\"authorAddress\",value:e.coinbase}),n.push({path:\"bloom\",value:e.bloom}),n.push({path:\"difficulty\",value:e.difficulty}),n.push({path:\"number\",value:e.number}),n.push({path:\"gasLimit\",value:e.gasLimit}),n.push({path:\"gasUsed\",value:e.gasUsed}),n.push({path:\"timestamp\",value:e.timestamp}),n.push({path:\"extraData\",value:e.extraData}),n.push({path:\"mixHash\",value:e.mixHash}),n.push({path:\"nonce\",value:e.nonce}),r(null,n)})},function(e,t,r){\"use strict\";const n=r(102);e.exports=function(e,t){const r=t.hash();return n(e,r)}},function(e,t,r){const n=r(343),i=r(195);e.exports=function(e,t){return{deserialize:i(e=>new t(e)),serialize:i(e=>e.serialize()),cid:i(t=>n(e,t))}}},function(e,t){e.exports=function(e){return function(t,r,n){e(t,r,(e,t)=>e?n(e):t.remainderPath.length>0?n(new Error(\"path out of scope\")):void(\"object\"==typeof t.value&&t.value[\"/\"]?n(null,t.value):n(null,!1)))}}},function(e,t,r){\"use strict\";const n=r(780),i=r(102),s=r(101),o=r(779);e.exports=s(\"eth-account-snapshot\",n,function(e,t,r){const n=[];n.push({path:\"storage\",value:{\"/\":i(\"eth-storage-trie\",e.stateRoot).toBaseEncodedString()}}),o.equals(e.codeHash)?n.push({path:\"code\",value:Buffer.from(\"\")}):n.push({path:\"code\",value:{\"/\":i(\"raw\",e.codeHash).toBaseEncodedString()}});n.push({path:\"stateRoot\",value:e.stateRoot}),n.push({path:\"codeHash\",value:e.codeHash}),n.push({path:\"nonce\",value:e.nonce}),n.push({path:\"balance\",value:e.balance}),n.push({path:\"isEmpty\",value:e.isEmpty()}),n.push({path:\"isContract\",value:e.isContract()}),r(null,n)})},function(e,t){e.exports=require(\"hash.js/lib/hash/sha/256\")},function(e,t){e.exports=require(\"randombytes\")},function(e,t,r){var n=r(10),i=r(71),s=r(350);function o(e,t,r,n,o,a,u){this.p=e,this.a=t,this.b=r,this.G=s.fromAffine(this,n,o),this.n=a,this.h=u,this.infinity=new s(this,null,null,i.ZERO),this.pOverFour=e.add(i.ONE).shiftRight(2),this.pLength=Math.floor((this.p.bitLength()+7)/8)}o.prototype.pointFromX=function(e,t){var r=t.pow(3).add(this.a.multiply(t)).add(this.b).mod(this.p).modPow(this.pOverFour,this.p),n=r;return r.isEven()^!e&&(n=this.p.subtract(n)),s.fromAffine(this,t,n)},o.prototype.isInfinity=function(e){return e===this.infinity||0===e.z.signum()&&0!==e.y.signum()},o.prototype.isOnCurve=function(e){if(this.isInfinity(e))return!0;var t=e.affineX,r=e.affineY,n=this.a,i=this.b,s=this.p;if(t.signum()<0||t.compareTo(s)>=0)return!1;if(r.signum()<0||r.compareTo(s)>=0)return!1;var o=r.square().mod(s),a=t.pow(3).add(n.multiply(t)).add(i).mod(s);return o.equals(a)},o.prototype.validate=function(e){n(!this.isInfinity(e),\"Point is at infinity\"),n(this.isOnCurve(e),\"Point is not on the curve\");var t=e.multiply(this.n);return n(this.isInfinity(t),\"Point is not a scalar multiple of G\"),!0},e.exports=o},function(e,t,r){var n=r(10),i=r(8).Buffer,s=r(71),o=s.valueOf(3);function a(e,t,r,i){n.notStrictEqual(i,void 0,\"Missing Z coordinate\"),this.curve=e,this.x=t,this.y=r,this.z=i,this._zInv=null,this.compressed=!0}Object.defineProperty(a.prototype,\"zInv\",{get:function(){return null===this._zInv&&(this._zInv=this.z.modInverse(this.curve.p)),this._zInv}}),Object.defineProperty(a.prototype,\"affineX\",{get:function(){return this.x.multiply(this.zInv).mod(this.curve.p)}}),Object.defineProperty(a.prototype,\"affineY\",{get:function(){return this.y.multiply(this.zInv).mod(this.curve.p)}}),a.fromAffine=function(e,t,r){return new a(e,t,r,s.ONE)},a.prototype.equals=function(e){return e===this||(this.curve.isInfinity(this)?this.curve.isInfinity(e):this.curve.isInfinity(e)?this.curve.isInfinity(this):0===e.y.multiply(this.z).subtract(this.y.multiply(e.z)).mod(this.curve.p).signum()&&0===e.x.multiply(this.z).subtract(this.x.multiply(e.z)).mod(this.curve.p).signum())},a.prototype.negate=function(){var e=this.curve.p.subtract(this.y);return new a(this.curve,this.x,e,this.z)},a.prototype.add=function(e){if(this.curve.isInfinity(this))return e;if(this.curve.isInfinity(e))return this;var t=this.x,r=this.y,n=e.x,i=e.y.multiply(this.z).subtract(r.multiply(e.z)).mod(this.curve.p),s=n.multiply(this.z).subtract(t.multiply(e.z)).mod(this.curve.p);if(0===s.signum())return 0===i.signum()?this.twice():this.curve.infinity;var u=s.square(),c=u.multiply(s),f=t.multiply(u),l=i.square().multiply(this.z),h=l.subtract(f.shiftLeft(1)).multiply(e.z).subtract(c).multiply(s).mod(this.curve.p),p=f.multiply(o).multiply(i).subtract(r.multiply(c)).subtract(l.multiply(i)).multiply(e.z).add(i.multiply(c)).mod(this.curve.p),d=c.multiply(this.z).multiply(e.z).mod(this.curve.p);return new a(this.curve,h,p,d)},a.prototype.twice=function(){if(this.curve.isInfinity(this))return this;if(0===this.y.signum())return this.curve.infinity;var e=this.x,t=this.y,r=t.multiply(this.z).mod(this.curve.p),n=r.multiply(t).mod(this.curve.p),i=this.curve.a,s=e.square().multiply(o);0!==i.signum()&&(s=s.add(this.z.square().multiply(i)));var u=(s=s.mod(this.curve.p)).square().subtract(e.shiftLeft(3).multiply(n)).shiftLeft(1).multiply(r).mod(this.curve.p),c=s.multiply(o).multiply(e).subtract(n.shiftLeft(1)).shiftLeft(2).multiply(n).subtract(s.pow(3)).mod(this.curve.p),f=r.pow(3).shiftLeft(3).mod(this.curve.p);return new a(this.curve,u,c,f)},a.prototype.multiply=function(e){if(this.curve.isInfinity(this))return this;if(0===e.signum())return this.curve.infinity;for(var t=e,r=t.multiply(o),n=this.negate(),i=this,s=r.bitLength()-2;s>0;--s){var a=r.testBit(s),u=t.testBit(s);i=i.twice(),a!==u&&(i=i.add(a?this:n))}return i},a.prototype.multiplyTwo=function(e,t,r){for(var n=Math.max(e.bitLength(),r.bitLength())-1,i=this.curve.infinity,s=this.add(t);n>=0;){var o=e.testBit(n),a=r.testBit(n);i=i.twice(),o?i=a?i.add(s):i.add(this):a&&(i=i.add(t)),--n}return i},a.prototype.getEncoded=function(e){if(null==e&&(e=this.compressed),this.curve.isInfinity(this))return i.alloc(1,0);var t,r=this.affineX,n=this.affineY,s=this.curve.pLength;return e?(t=i.allocUnsafe(1+s)).writeUInt8(n.isEven()?2:3,0):((t=i.allocUnsafe(1+s+s)).writeUInt8(4,0),n.toBuffer(s).copy(t,1+s)),r.toBuffer(s).copy(t,1),t},a.decodeFrom=function(e,t){var r,i=t.readUInt8(0),o=4!==i,u=Math.floor((e.p.bitLength()+7)/8),c=s.fromBuffer(t.slice(1,1+u));if(o){n.equal(t.length,u+1,\"Invalid sequence length\"),n(2===i||3===i,\"Invalid sequence tag\");var f=3===i;r=e.pointFromX(f,c)}else{n.equal(t.length,1+u+u,\"Invalid sequence length\");var l=s.fromBuffer(t.slice(1+u));r=a.fromAffine(e,c,l)}return r.compressed=o,r},a.prototype.toString=function(){return this.curve.isInfinity(this)?\"(INFINITY)\":\"(\"+this.affineX.toString()+\",\"+this.affineY.toString()+\")\"},e.exports=a},function(e,t,r){function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);null!=e&&(\"number\"==typeof e?this.fromNumber(e,t,r):null==t&&\"string\"!=typeof e?this.fromString(e,256):this.fromString(e,t))}var i=n.prototype;i.__bigi=r(787).version,n.isBigInteger=function(e,t){return e&&e.__bigi&&(!t||e.__bigi===i.__bigi)},n.prototype.am=function(e,t,r,n,i,s){for(;--s>=0;){var o=t*this[e++]+r[n]+i;i=Math.floor(o/67108864),r[n++]=67108863&o}return i},n.prototype.DB=26,n.prototype.DM=67108863;var s=n.prototype.DV=1<<26;n.prototype.FV=Math.pow(2,52),n.prototype.F1=26,n.prototype.F2=0;var o,a,u=\"0123456789abcdefghijklmnopqrstuvwxyz\",c=new Array;for(o=\"0\".charCodeAt(0),a=0;a<=9;++a)c[o++]=a;for(o=\"a\".charCodeAt(0),a=10;a<36;++a)c[o++]=a;for(o=\"A\".charCodeAt(0),a=10;a<36;++a)c[o++]=a;function f(e){return u.charAt(e)}function l(e,t){var r=c[e.charCodeAt(t)];return null==r?-1:r}function h(e){var t=new n;return t.fromInt(e),t}function p(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function d(e){this.m=e}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function m(e,t){return e&t}function g(e,t){return e|t}function v(e,t){return e^t}function b(e,t){return e&~t}function w(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function _(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function k(){}function S(e){return e}function E(e){this.r2=new n,this.q3=new n,n.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}d.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},d.prototype.revert=function(e){return e},d.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},d.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},d.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},y.prototype.convert=function(e){var t=new n;return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(n.ZERO)>0&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=new n;return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},i.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},i.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+s:this.t=0},i.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var i=e.length,s=!1,o=0;--i>=0;){var a=8==r?255&e[i]:l(e,i);a<0?\"-\"==e.charAt(i)&&(s=!0):(s=!1,0==o?this[this.t++]=a:o+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&n.ZERO.subTo(this,this)},i.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},i.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},i.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},i.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+o+1]=this[r]>>i|a,a=(this[r]&s)<<n;for(r=o-1;r>=0;--r)t[r]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},i.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t[0]=this[r]>>n;for(var o=r+1;o<this.t;++o)t[o-r-1]|=(this[o]&s)<<i,t[o-r]=this[o]>>n;n>0&&(t[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}},i.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},i.multiplyTo=function(e,t){var r=this.abs(),i=e.abs(),s=r.t;for(t.t=s+i.t;--s>=0;)t[s]=0;for(s=0;s<i.t;++s)t[s+r.t]=r.am(0,i[s],t,s,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&n.ZERO.subTo(t,t)},i.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},i.divRemTo=function(e,t,r){var i=e.abs();if(!(i.t<=0)){var s=this.abs();if(s.t<i.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=new n);var o=new n,a=this.s,u=e.s,c=this.DB-p(i[i.t-1]);c>0?(i.lShiftTo(c,o),s.lShiftTo(c,r)):(i.copyTo(o),s.copyTo(r));var f=o.t,l=o[f-1];if(0!=l){var h=l*(1<<this.F1)+(f>1?o[f-2]>>this.F2:0),d=this.FV/h,y=(1<<this.F1)/h,m=1<<this.F2,g=r.t,v=g-f,b=null==t?new n:t;for(o.dlShiftTo(v,b),r.compareTo(b)>=0&&(r[r.t++]=1,r.subTo(b,r)),n.ONE.dlShiftTo(f,b),b.subTo(o,o);o.t<f;)o[o.t++]=0;for(;--v>=0;){var w=r[--g]==l?this.DM:Math.floor(r[g]*d+(r[g-1]+m)*y);if((r[g]+=o.am(0,w,r,v,0,f))<w)for(o.dlShiftTo(v,b),r.subTo(b,r);r[g]<--w;)r.subTo(b,r)}null!=t&&(r.drShiftTo(f,t),a!=u&&n.ZERO.subTo(t,t)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),a<0&&n.ZERO.subTo(r,r)}}},i.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},i.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},i.exp=function(e,t){if(e>4294967295||e<1)return n.ONE;var r=new n,i=new n,s=t.convert(this),o=p(e)-1;for(s.copyTo(r);--o>=0;)if(t.sqrTo(r,i),(e&1<<o)>0)t.mulTo(i,s,r);else{var a=r;r=i,i=a}return t.revert(r)},i.toString=function(e){var t;if(this.s<0)return\"-\"+this.negate().toString(e);if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,s=\"\",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(r=this[o]>>a)>0&&(i=!0,s=f(r));o>=0;)a<t?(r=(this[o]&(1<<a)-1)<<t-a,r|=this[--o]>>(a+=this.DB-t)):(r=this[o]>>(a-=t)&n,a<=0&&(a+=this.DB,--o)),r>0&&(i=!0),i&&(s+=f(r));return i?s:\"0\"},i.negate=function(){var e=new n;return n.ZERO.subTo(this,e),e},i.abs=function(){return this.s<0?this.negate():this},i.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},i.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+p(this[this.t-1]^this.s&this.DM)},i.byteLength=function(){return this.bitLength()>>3},i.mod=function(e){var t=new n;return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(n.ZERO)>0&&e.subTo(t,t),t},i.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new d(t):new y(t),this.exp(e,r)},k.prototype.convert=S,k.prototype.revert=S,k.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},k.prototype.sqrTo=function(e,t){e.squareTo(t)},E.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=new n;return e.copyTo(t),this.reduce(t),t},E.prototype.revert=function(e){return e},E.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},E.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},E.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var x=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],A=(1<<26)/x[x.length-1];i.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},i.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return\"0\";var t=this.chunkSize(e),r=Math.pow(e,t),i=h(r),s=new n,o=new n,a=\"\";for(this.divRemTo(i,s,o);s.signum()>0;)a=(r+o.intValue()).toString(e).substr(1)+a,s.divRemTo(i,s,o);return o.intValue().toString(e)+a},i.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),s=!1,o=0,a=0,u=0;u<e.length;++u){var c=l(e,u);c<0?\"-\"==e.charAt(u)&&0==this.signum()&&(s=!0):(a=t*a+c,++o>=r&&(this.dMultiply(i),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(a,0)),s&&n.ZERO.subTo(this,this)},i.fromNumber=function(e,t,r){if(\"number\"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(n.ONE.shiftLeft(e-1),g,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(n.ONE.shiftLeft(e-1),this);else{var i=new Array,s=7&e;i.length=1+(e>>3),t.nextBytes(i),s>0?i[0]&=(1<<s)-1:i[0]=0,this.fromString(i,256)}},i.bitwiseTo=function(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},i.changeBit=function(e,t){var r=n.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},i.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},i.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},i.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},i.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()},i.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},i.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},i.millerRabin=function(e){var t=this.subtract(n.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var i=t.shiftRight(r);(e=e+1>>1)>x.length&&(e=x.length);for(var s=new n(null),o=[],a=0;a<e;++a){for(;c=x[Math.floor(Math.random()*x.length)],-1!=o.indexOf(c););o.push(c),s.fromInt(c);var u=s.modPow(i,this);if(0!=u.compareTo(n.ONE)&&0!=u.compareTo(t)){for(var c=1;c++<r&&0!=u.compareTo(t);)if(0==(u=u.modPowInt(2,this)).compareTo(n.ONE))return!1;if(0!=u.compareTo(t))return!1}}return!0},i.clone=function(){var e=new n;return this.copyTo(e),e},i.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},i.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},i.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},i.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},i.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0===i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},i.equals=function(e){return 0==this.compareTo(e)},i.min=function(e){return this.compareTo(e)<0?this:e},i.max=function(e){return this.compareTo(e)>0?this:e},i.and=function(e){var t=new n;return this.bitwiseTo(e,m,t),t},i.or=function(e){var t=new n;return this.bitwiseTo(e,g,t),t},i.xor=function(e){var t=new n;return this.bitwiseTo(e,v,t),t},i.andNot=function(e){var t=new n;return this.bitwiseTo(e,b,t),t},i.not=function(){for(var e=new n,t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},i.shiftLeft=function(e){var t=new n;return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},i.shiftRight=function(e){var t=new n;return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},i.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+w(this[e]);return this.s<0?this.t*this.DB:-1},i.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=_(this[r]^t);return e},i.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},i.setBit=function(e){return this.changeBit(e,g)},i.clearBit=function(e){return this.changeBit(e,b)},i.flipBit=function(e){return this.changeBit(e,v)},i.add=function(e){var t=new n;return this.addTo(e,t),t},i.subtract=function(e){var t=new n;return this.subTo(e,t),t},i.multiply=function(e){var t=new n;return this.multiplyTo(e,t),t},i.divide=function(e){var t=new n;return this.divRemTo(e,t,null),t},i.remainder=function(e){var t=new n;return this.divRemTo(e,null,t),t},i.divideAndRemainder=function(e){var t=new n,r=new n;return this.divRemTo(e,t,r),new Array(t,r)},i.modPow=function(e,t){var r,i,s=e.bitLength(),o=h(1);if(s<=0)return o;r=s<18?1:s<48?3:s<144?4:s<768?5:6,i=s<8?new d(t):t.isEven()?new E(t):new y(t);var a=new Array,u=3,c=r-1,f=(1<<r)-1;if(a[1]=i.convert(this),r>1){var l=new n;for(i.sqrTo(a[1],l);u<=f;)a[u]=new n,i.mulTo(l,a[u-2],a[u]),u+=2}var m,g,v=e.t-1,b=!0,w=new n;for(s=p(e[v])-1;v>=0;){for(s>=c?m=e[v]>>s-c&f:(m=(e[v]&(1<<s+1)-1)<<c-s,v>0&&(m|=e[v-1]>>this.DB+s-c)),u=r;0==(1&m);)m>>=1,--u;if((s-=u)<0&&(s+=this.DB,--v),b)a[m].copyTo(o),b=!1;else{for(;u>1;)i.sqrTo(o,w),i.sqrTo(w,o),u-=2;u>0?i.sqrTo(o,w):(g=o,o=w,w=g),i.mulTo(w,a[m],o)}for(;v>=0&&0==(e[v]&1<<s);)i.sqrTo(o,w),g=o,o=w,w=g,--s<0&&(s=this.DB-1,--v)}return i.revert(o)},i.modInverse=function(e){var t=e.isEven();if(0===this.signum())throw new Error(\"division by zero\");if(this.isEven()&&t||0==e.signum())return n.ZERO;for(var r=e.clone(),i=this.clone(),s=h(1),o=h(0),a=h(0),u=h(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),t?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(e,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);r.compareTo(i)>=0?(r.subTo(i,r),t&&s.subTo(a,s),o.subTo(u,o)):(i.subTo(r,i),t&&a.subTo(s,a),u.subTo(o,u))}if(0!=i.compareTo(n.ONE))return n.ZERO;for(;u.compareTo(e)>=0;)u.subTo(e,u);for(;u.signum()<0;)u.addTo(e,u);return u},i.pow=function(e){return this.exp(e,new k)},i.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},i.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=x[x.length-1]){for(t=0;t<x.length;++t)if(r[0]==x[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<x.length;){for(var n=x[t],i=t+1;i<x.length&&n<A;)n*=x[i++];for(n=r.modInt(n);t<i;)if(n%x[t++]==0)return!1}return r.millerRabin(e)},i.square=function(){var e=new n;return this.squareTo(e),e},n.ZERO=h(0),n.ONE=h(1),n.valueOf=h,e.exports=n},function(e,t){e.exports=require(\"create-hmac\")},function(e,t,r){var n=r(359),i=r(202);function s(e,t){if(\"number\"!=typeof e)throw new Error(\"cannot write a non-number as a number\");if(e<0)throw new Error(\"specified a negative value for writing an unsigned value\");if(e>t)throw new Error(\"RangeError: value out of range\");if(Math.floor(e)!==e)throw new Error(\"value has a fractional component\")}e.exports={pushDataSize:n.encodingLength,readPushDataInt:n.decode,readUInt64LE:function(e,t){var r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return s((n*=4294967296)+r,9007199254740991),n+r},readVarInt:function(e,t){return{number:i.decode(e,t),size:i.decode.bytes}},varIntBuffer:i.encode,varIntSize:i.encodingLength,writePushDataInt:n.encode,writeUInt64LE:function(e,t,r){return s(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8},writeVarInt:function(e,t,r){return i.encode(t,e,r),i.encode.bytes}}},function(e,t,r){var n=r(20),i=r(29),s=r(15),o=r(35);function a(e){var t=n.compile(e);return 34===t.length&&t[0]===o.OP_0&&32===t[1]}a.toJSON=function(){return\"Witness scriptHash output\"},e.exports={check:a,decode:function(e){return s(a,e),e.slice(2)},encode:function(e){return s(i.Hash256bit,e),n.compile([o.OP_0,e])}}},function(e,t,r){var n=r(20),i=r(29),s=r(15),o=r(35);function a(e){var t=n.compile(e);return 22===t.length&&t[0]===o.OP_0&&20===t[1]}a.toJSON=function(){return\"Witness pubKeyHash output\"},e.exports={check:a,decode:function(e){return s(a,e),e.slice(2)},encode:function(e){return s(i.Hash160bit,e),n.compile([o.OP_0,e])}}},function(e,t,r){var n=r(20),i=r(29),s=r(15),o=r(35),a=o.OP_RESERVED;function u(e,t){var r=n.decompile(e);if(r.length<4)return!1;if(r[r.length-1]!==o.OP_CHECKMULTISIG)return!1;if(!i.Number(r[0]))return!1;if(!i.Number(r[r.length-2]))return!1;var s=r[0]-a,u=r[r.length-2]-a;return!(s<=0)&&(!(u>16)&&(!(s>u)&&(u===r.length-3&&(!!t||r.slice(1,-2).every(n.isCanonicalPubKey)))))}u.toJSON=function(){return\"multi-sig output\"},e.exports={check:u,decode:function(e,t){var r=n.decompile(e);return s(u,r,t),{m:r[0]-a,pubKeys:r.slice(1,-2)}},encode:function(e,t){s({m:i.Number,pubKeys:[n.isCanonicalPubKey]},{m:e,pubKeys:t});var r=t.length;if(r<e)throw new TypeError(\"Not enough pubKeys provided\");return n.compile([].concat(a+e,t,a+r,o.OP_CHECKMULTISIG))}}},function(e,t,r){var n=r(8).Buffer;e.exports={decode:function(e,t,r){t=t||4,r=void 0===r||r;var n=e.length;if(0===n)return 0;if(n>t)throw new TypeError(\"Script number overflow\");if(r&&0==(127&e[n-1])&&(n<=1||0==(128&e[n-2])))throw new Error(\"Non-minimally encoded script number\");if(5===n){var i=e.readUInt32LE(0),s=e.readUInt8(4);return 128&s?-(4294967296*(-129&s)+i):4294967296*s+i}for(var o=0,a=0;a<n;++a)o|=e[a]<<8*a;return 128&e[n-1]?-(o&~(128<<8*(n-1))):o},encode:function(e){for(var t=Math.abs(e),r=function(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}(t),i=n.allocUnsafe(r),s=e<0,o=0;o<r;++o)i.writeUInt8(255&t,o),t>>=8;return 128&i[r-1]?i.writeUInt8(s?128:0,r-1):s&&(i[r-1]|=128),i}}},function(e,t,r){var n=r(207);function i(e){return e.name||e.toString().match(/function (.*?)\\s*\\(/)[1]}function s(e){return n.Nil(e)?\"\":i(e.constructor)}function o(e){return n.Function(e)?e.toJSON?e.toJSON():i(e):n.Array(e)?\"Array\":e&&n.Object(e)?\"Object\":void 0!==e?e:\"\"}function a(e,t,r){var i=function(e){return n.Function(e)?\"\":n.String(e)?JSON.stringify(e):e&&n.Object(e)?\"\":e}(t);return\"Expected \"+o(e)+\", got\"+(\"\"!==r?\" \"+r:\"\")+(\"\"!==i?\" \"+i:\"\")}function u(e,t,r){r=r||s(t),this.message=a(e,t,r),Error.captureStackTrace(this,u),this.__type=e,this.__value=t,this.__valueTypeName=r}function c(e,t,r,n,i){e?(i=i||s(n),this.message=function(e,t,r,n,i){var s='\" of type ';return\"key\"===t&&(s='\" with key type '),a('property \"'+o(r)+s+o(e),n,i)}(e,r,t,n,i)):this.message='Unexpected property \"'+t+'\"',Error.captureStackTrace(this,u),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,c.prototype=Object.create(Error.prototype),c.prototype.constructor=u,e.exports={TfTypeError:u,TfPropertyTypeError:c,tfCustomError:function(e,t){return new u(e,{},t)},tfSubError:function(e,t,r){return e instanceof c?(t=t+\".\"+e.__property,e=new c(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof u&&(e=new c(e.__type,t,r,e.__value,e.__valueTypeName)),Error.captureStackTrace(e),e},tfJSON:o,getValueTypeName:s}},function(e,t,r){var n=r(35);function i(e){return e<n.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}e.exports={encodingLength:i,encode:function(e,t,r){var s=i(t);return 1===s?e.writeUInt8(t,r):2===s?(e.writeUInt8(n.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===s?(e.writeUInt8(n.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(n.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),s},decode:function(e,t){var r,i,s=e.readUInt8(t);if(s<n.OP_PUSHDATA1)r=s,i=1;else if(s===n.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),i=2}else if(s===n.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(s!==n.OP_PUSHDATA4)throw new Error(\"Unexpected opcode\");r=e.readUInt32LE(t+1),i=5}return{opcode:s,number:r,size:i}}}},function(e,t){e.exports=require(\"bip66\")},function(e,t,r){\"use strict\";const n=r(810).Block,i=r(5),s=r(23),o=r(347),a=e=>{const t=s.encode(e,\"dbl-sha2-256\");return new i(1,\"bitcoin-block\",t)};e.exports={hashToCid:a,cid:(e,t)=>{let r,n=null;try{const i=o().update(e.toBuffer(!0)).digest(),s=o().update(Buffer.from(i)).digest();r=a(Buffer.from(s))}catch(e){n=e}finally{t(n,r)}},deserialize:(e,t)=>{let r,i=null;try{r=n.fromBuffer(e)}catch(e){i=e}finally{t(i,r)}},serialize:(e,t)=>{let r,n=null;try{r=e.toBuffer()}catch(e){n=e}finally{t(n,r)}}}},function(e,t,r){\"use strict\";t.resolver=r(811),t.util=r(361)},function(e,t,r){\"use strict\";const n=r(364),i=r(366);(t=e.exports).multicodec=\"git-raw\";const s=[\"original\",\"name\",\"email\",\"date\"];t.resolve=((e,t,r)=>{\"function\"==typeof t&&(r=t,t=void 0),n.deserialize(e,(e,n)=>{if(e)return r(e);if(!t||\"/\"===t)return r(null,{value:n,remainderPath:\"\"});if(Buffer.isBuffer(n))return r(null,{value:n,remainderPath:t});const s=t.split(\"/\"),o=i(n).get(s);if(o)return r(null,{value:o,remainderPath:\"\"});let a,u=s.length;for(let e=0;e<u;e++){const e=s.shift();if(Array.isArray(n)&&(a=n[Number(e)]),!n[e])return a?(s.unshift(e),r(null,{value:a,remainderPath:s.join(\"/\")})):r(new Error(\"path not available at root\"));n=a=n[e]}})}),t.tree=((e,t,r)=>{\"function\"==typeof t&&(r=t,t=void 0),t=t||{},n.deserialize(e,(e,t)=>{if(e)return r(e);if(Buffer.isBuffer(t))return r(null,[]);let n=[];switch(t.gitType){case\"commit\":n=(n=(n=(n=[\"message\",\"tree\"]).concat(s.map(e=>\"author/\"+e))).concat(s.map(e=>\"committer/\"+e))).concat(t.parents.map((e,t)=>\"parents/\"+t)),t.encoding&&n.push(\"encoding\");break;case\"tag\":n=[\"object\",\"type\",\"tag\",\"message\"],t.tagger&&(n=n.concat(s.map(e=>\"tagger/\"+e)));break;default:Object.keys(t).forEach(e=>{n.push(e),n.push(e+\"/hash\"),n.push(e+\"/mode\")})}r(null,n)})}),t.isLink=((e,r,n)=>{t.resolve(e,r,(e,t)=>e?n(e):t.remainderPath.length>0?n(new Error(\"path out of scope\")):void(\"object\"==typeof t.value&&t.value[\"/\"]?n(null,t.value):n(null,!1)))})},function(e,t,r){\"use strict\";const n=r(2),i=r(3),s=r(31),o=r(5),a=r(363),u=r(139),c=r(814),f=r(813),l=r(812);(t=e.exports).serialize=((e,t)=>{if(null!==e)if(Buffer.isBuffer(e))\"blob\"===e.slice(0,4).toString()?n(()=>t(null,e)):n(()=>t(new Error(\"unexpected dagNode passed to serialize\"),null));else switch(e.gitType){case\"commit\":c.serialize(e,t);break;case\"tag\":f.serialize(e,t);break;default:l.serialize(e,t)}else n(()=>t(new Error(\"dagNode passed to serialize was null\"),null))}),t.deserialize=((e,t)=>{let r=u.find(e,0),i=e.slice(0,r).toString().match(/([^ ]+) (\\d+)/);if(i)switch(i[1]){case\"blob\":t(null,e);break;case\"commit\":c.deserialize(e.slice(r+1),t);break;case\"tag\":f.deserialize(e.slice(r+1),t);break;case\"tree\":l.deserialize(e.slice(r+1),t);break;default:n(()=>t(new Error(\"unknown object type \"+i[1]),null))}else n(()=>t(new Error(\"invalid object header\"),null))}),t.cid=((e,r)=>{i([r=>t.serialize(e,r),(e,t)=>s(e,\"sha1\",t),(e,t)=>t(null,new o(1,a.multicodec,e))],r)})},function(e,t,r){\"use strict\";t.util=r(364),t.resolver=r(363)},function(e,t){var r=e.exports=function(e){return new n(e)};function n(e){this.value=e}function i(e,t,r){var n=[],i=[],a=!0;return function e(l){var h={},p=!0,d={node:r?s(l):l,node_:l,path:[].concat(n),parent:i[i.length-1],parents:i,key:n.slice(-1)[0],isRoot:0===n.length,level:n.length,circular:null,update:function(e,t){d.isRoot||(d.parent.node[d.key]=e),d.node=e,t&&(p=!1)},delete:function(e){delete d.parent.node[d.key],e&&(p=!1)},remove:function(e){u(d.parent.node)?d.parent.node.splice(d.key,1):delete d.parent.node[d.key],e&&(p=!1)},keys:null,before:function(e){h.before=e},after:function(e){h.after=e},pre:function(e){h.pre=e},post:function(e){h.post=e},stop:function(){a=!1},block:function(){p=!1}};if(!a)return d;function y(){if(\"object\"==typeof d.node&&null!==d.node){d.keys&&d.node_===d.node||(d.keys=o(d.node)),d.isLeaf=0==d.keys.length;for(var e=0;e<i.length;e++)if(i[e].node_===l){d.circular=i[e];break}}else d.isLeaf=!0,d.keys=null;d.notLeaf=!d.isLeaf,d.notRoot=!d.isRoot}y();var m=t.call(d,d.node);return void 0!==m&&d.update&&d.update(m),h.before&&h.before.call(d,d.node),p?(\"object\"!=typeof d.node||null===d.node||d.circular||(i.push(d),y(),c(d.keys,function(t,i){n.push(t),h.pre&&h.pre.call(d,d.node[t],t);var s=e(d.node[t]);r&&f.call(d.node,t)&&(d.node[t]=s.node),s.isLast=i==d.keys.length-1,s.isFirst=0==i,h.post&&h.post.call(d,s),n.pop()}),i.pop()),h.after&&h.after.call(d,d.node),d):d}(e).node}function s(e){if(\"object\"==typeof e&&null!==e){var t;if(u(e))t=[];else if(\"[object Date]\"===a(e))t=new Date(e.getTime?e.getTime():e);else if(function(e){return\"[object RegExp]\"===a(e)}(e))t=new RegExp(e);else if(function(e){return\"[object Error]\"===a(e)}(e))t={message:e.message};else if(function(e){return\"[object Boolean]\"===a(e)}(e))t=new Boolean(e);else if(function(e){return\"[object Number]\"===a(e)}(e))t=new Number(e);else if(function(e){return\"[object String]\"===a(e)}(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var r=e.constructor&&e.constructor.prototype||e.__proto__||{},n=function(){};n.prototype=r,t=new n}return c(o(e),function(r){t[r]=e[r]}),t}return e}n.prototype.get=function(e){for(var t=this.value,r=0;r<e.length;r++){var n=e[r];if(!t||!f.call(t,n)){t=void 0;break}t=t[n]}return t},n.prototype.has=function(e){for(var t=this.value,r=0;r<e.length;r++){var n=e[r];if(!t||!f.call(t,n))return!1;t=t[n]}return!0},n.prototype.set=function(e,t){for(var r=this.value,n=0;n<e.length-1;n++){var i=e[n];f.call(r,i)||(r[i]={}),r=r[i]}return r[e[n]]=t,t},n.prototype.map=function(e){return i(this.value,e,!0)},n.prototype.forEach=function(e){return this.value=i(this.value,e,!1),this.value},n.prototype.reduce=function(e,t){var r=1===arguments.length,n=r?this.value:t;return this.forEach(function(t){this.isRoot&&r||(n=e.call(this,n,t))}),n},n.prototype.paths=function(){var e=[];return this.forEach(function(t){e.push(this.path)}),e},n.prototype.nodes=function(){var e=[];return this.forEach(function(t){e.push(this.node)}),e},n.prototype.clone=function(){var e=[],t=[];return function r(n){for(var i=0;i<e.length;i++)if(e[i]===n)return t[i];if(\"object\"==typeof n&&null!==n){var a=s(n);return e.push(n),t.push(a),c(o(n),function(e){a[e]=r(n[e])}),e.pop(),t.pop(),a}return n}(this.value)};var o=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function a(e){return Object.prototype.toString.call(e)}var u=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)},c=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)};c(o(n.prototype),function(e){r[e]=function(t){var r=[].slice.call(arguments,1),i=new n(t);return i[e].apply(i,r)}});var f=Object.hasOwnProperty||function(e,t){return t in e}},function(e,t,r){\"use strict\";const n=r(371),i=r(366);var s,o;(t=e.exports).multicodec=\"dag-cbor\",t.resolve=((e,t,r)=>{\"function\"==typeof t&&(r=t,t=void 0),n.deserialize(e,(e,n)=>{if(e)return r(e);if(!t||\"/\"===t)return r(null,{value:n,remainderPath:\"\"});const s=t.split(\"/\"),o=i(n).get(s);if(o)return r(null,{value:o,remainderPath:\"\"});let a,u=s.length;for(let e=0;e<u;e++){const e=s.shift();if(Array.isArray(n)&&!Buffer.isBuffer(n)&&(a=n[Number(e)]),!n[e])return a?(s.unshift(e),r(null,{value:a,remainderPath:s.join(\"/\")})):r(new Error(\"path not available at root\"));n=a=n[e]}})}),t.tree=((e,t,r)=>{\"function\"==typeof t&&(r=t,t=void 0),t=t||{},n.deserialize(e,(e,t)=>{if(e)return r(e);const n=(s=t,o=o||\"/\",0===Object.keys(s).length?[]:i(s).reduce(function(e,t){\"object\"==typeof t&&t[\"/\"]&&this.update(void 0);const r=this.path.join(o);return\"\"!==r&&e.push({path:r,value:t}),e},[])).map(e=>e.path);r(null,n)})}),t.isLink=((e,r,n)=>{t.resolve(e,r,(e,t)=>e?n(e):t.remainderPath.length>0?n(new Error(\"path out of scope\")):void(\"object\"==typeof t.value&&t.value[\"/\"]?n(null,t.value):n(null,!1)))})},function(e,t,r){\"use strict\";class n{constructor(e,t,r){if(this.tag=e,this.value=t,this.err=r,\"number\"!=typeof this.tag)throw new Error(\"Invalid tag type (\"+typeof this.tag+\")\");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error(\"Tag must be a positive integer: \"+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var t,r;if(\"function\"!=typeof(r=null!=e?e[this.tag]:void 0)&&\"function\"!=typeof(r=n[\"_tag\"+this.tag]))return this;try{return r.call(n,this.value)}catch(e){return t=e,this.err=t,this}}}e.exports=n},function(e,t,r){\"use strict\";const n=r(140),i=n.MT,s=n.SIMPLE,o=n.SYMS;class a{constructor(e){if(\"number\"!=typeof e)throw new Error(\"Invalid Simple type: \"+typeof e);if(e<0||e>255||(0|e)!==e)throw new Error(\"value must be a small positive integer: \"+e);this.value=e}toString(){return\"simple(\"+this.value+\")\"}inspect(){return\"simple(\"+this.value+\")\"}encodeCBOR(e){return e._pushInt(this.value,i.SIMPLE_FLOAT)}static isSimple(e){return e instanceof a}static decode(e,t){switch(null==t&&(t=!0),e){case s.FALSE:return!1;case s.TRUE:return!0;case s.NULL:return t?null:o.NULL;case s.UNDEFINED:return t?void 0:o.UNDEFINED;case-1:if(!t)throw new Error(\"Invalid BREAK\");return o.BREAK;default:return new a(e)}}}e.exports=a},function(e,t,r){\"use strict\";const n=r(819),i=r(141),s=r(818),o=r(208),a=r(140),u=r(369),c=r(368),f=r(51);class l{constructor(e){!(e=e||{}).size||e.size<65536?e.size=65536:e.size=o.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._reset(),this._knownTags=Object.assign({0:e=>new Date(e),1:e=>new Date(1e3*e),2:e=>o.arrayBufferToBignumber(e),3:e=>a.NEG_ONE.minus(o.arrayBufferToBignumber(e)),4:e=>a.TEN.pow(e[0]).times(e[1]),5:e=>a.TWO.pow(e[0]).times(e[1]),32:e=>f.parse(e),35:e=>new RegExp(e)},e.tags),this.parser=s(global,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case a.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case a.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case a.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case a.PARENT.MAP:if(e.values%2>0)throw new Error(\"Odd number of elements in the map\");this._push(this.createMap(e.ref,e.length));break;case a.PARENT.OBJECT:if(e.values%2>0)throw new Error(\"Odd number of elements in the map\");this._push(this.createObject(e.ref,e.length));break;case a.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length))}this._currentParent&&this._currentParent.type===a.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,0===e.length&&this._closeParent())}_push(e,t){const r=this._currentParent;switch(r.values++,r.type){case a.PARENT.ARRAY:case a.PARENT.BYTE_STRING:case a.PARENT.UTF8_STRING:r.length>-1?this._ref[this._ref.length-r.length]=e:this._ref.push(e),this._dec();break;case a.PARENT.OBJECT:null!=r.tmpKey?(this._ref[r.tmpKey]=e,r.tmpKey=null,this._dec()):(r.tmpKey=e,\"string\"!=typeof r.tmpKey&&(r.type=a.PARENT.MAP,r.ref=o.buildMap(r.ref)));break;case a.PARENT.MAP:null!=r.tmpKey?(this._ref.set(r.tmpKey,e),r.tmpKey=null,this._dec()):r.tmpKey=e;break;case a.PARENT.TAG:this._ref.push(e),t||this._dec();break;default:throw new Error(\"Unknown parent type\")}}_createParent(e,t,r){this._parents[this._depth]={type:t,length:r,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:a.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,t){const r=this._knownTags[e];return r?r(t):new c(e,t)}createMap(e,t){return e}createObject(e,t){return e}createArray(e,t){return e}createByteString(e,t){return Buffer.concat(e)}createByteStringFromHeap(e,t){return e===t?Buffer.alloc(0):Buffer.from(this._heap.slice(e,t))}createInt(e){return e}createInt32(e,t){return o.buildInt32(e,t)}createInt64(e,t,r,n){return o.buildInt64(e,t,r,n)}createFloat(e){return e}createFloatSingle(e,t,r,i){return n.read([e,t,r,i],0,!1,23,4)}createFloatDouble(e,t,r,i,s,o,a,u){return n.read([e,t,r,i,s,o,a,u],0,!1,52,8)}createInt32Neg(e,t){return-1-o.buildInt32(e,t)}createInt64Neg(e,t,r,n){const s=o.buildInt32(e,t),u=o.buildInt32(r,n);return s>a.MAX_SAFE_HIGH?a.NEG_ONE.minus(new i(s).times(a.SHIFT32).plus(u)):-1-(s*a.SHIFT32+u)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8Stri€€